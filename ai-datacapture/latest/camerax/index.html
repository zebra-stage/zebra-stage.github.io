
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="CameraX">
    <title>CameraX - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <!-- 6/13/24- a "crown" icon randomly appeared in the MX matrix today. Rob said it looked like sumo. 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script> -->
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <p class="navbar-text">
                                            AI Data Capture SDK
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/ai-datacapture/latest/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/setup">
                                    Setup
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/localizer">
                                    Localizer
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/productrecognition">
                                    Product Recognition
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/barcodedecoder">
                                    Barcode Decoder
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/textocr">
                                    Text OCR
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/camerax">
                                    CameraX
                            </a>
                        </li>
                        <li>
                            <a href="/ai-datacapture/latest/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>CameraX</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="camerax" class="anchor"><a class="heading-anchor" href="#camerax"><span></span></a>CameraX</h1>
                                    <p>
                                            AI Data Capture SDK
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p><a href="https://developer.android.com/media/camera/camerax">CameraX</a> is a Jetpack support library for Android that simplifies camera app development by providing a consistent, easy-to-use API across various Android devices. It offers backward compatibility, facilitates smoother camera operations, and integrates seamlessly with existing camera APIs. CameraaX enhances the developer experience with features such as automatic lifecycle management and easy access to use cases such as preview, image capture, and image analysis. </p>

<p>AI Data Capture SDK supports integration with CameraX-based applications by providing: </p>

<ul>
<li><strong>EntityTrackerAnalyzer –</strong> A CameraX <code>ImageAnalysis.Analyzer</code> that detects, decodes and tracks <code>Entities</code>.</li>

<li><strong>Detectors for BarcodeDecode and TextOCR –</strong> Tools for building custom Analyzers.</li>

<li><strong>EntityView –</strong> An integrated viewfinder designed to work alongside <code>EntityTrackerAnalyzer</code>. </li>
</ul>

<p>For details on compatibility, refer to the <a href="https://developer.android.com/media/camera/camerax/architecture#requirements">CameraX requirements</a>. </p>

<hr>

<h2 id="entitytrackeranalyzer" class="anchor"><a class="heading-anchor" href="#entitytrackeranalyzer"><span></span></a>EntityTrackerAnalyzer</h2>

<p><code>EntityTrackerAnalyzer</code> implements the <code>ImageAnalysis.Analyzer</code> interface for real-time detection and tracking of <a href="../entity/">entities</a>. It integrates seamlessly with CameraX, processing image frames using a list of detectors to deliver aggregated entity tracking results. The analyzer efficiently manages image buffers and executes detectors asynchronously, ensuring optimal performance. It also automatically handles coordinate system transformations automatically based on the coordinate system value passed to the constructor. <em>Currently, only BarcodeDecoder is supported as a detector.</em></p>

<p><strong>Use Cases:</strong></p>

<ol>
<li><strong>Real-Time Object Tracking -</strong> Develop applications that require real-time entity tracking using camera feeds.</li>

<li><strong>Augmented Reality Experiences -</strong> Leverage entity tracking for dynamic augmented reality (AR) experiences that respond to entity movements and interactions.</li>

<li><strong>Security and Surveillance Systems -</strong> Integrate into security systems that monitor and track entities in real-time.</li>
</ol>

<p><strong>Notes:</strong></p>

<ul>
<li><strong>Extensibility -</strong> The analyzer is designed to be extended with additional detectors and consumer logic. However, currently only <a href="../barcodedecoder/">BarcodeDecoder</a> is supported as a detector. Only one instance of a detector can be passed in to the constructor.</li>

<li><strong>Lifecycle handling -</strong> Developers are responsible for managing the session throughout the Android application lifecycle, including the initialization and deinitialization of <code>EntityTrackerAnalyzer</code>. The application must manage the session, since <code>EntityTrackerAnalyzer</code> does not handle this internally.   </li>

<li><strong>Threading -</strong> The processing of image frames is efficiently managed using threads within the <code>EntityTrackerAnalyzer</code>.</li>
</ul>

<hr>

<h3 id="developerguide" class="anchor"><a class="heading-anchor" href="#developerguide"><span></span></a>Developer Guide</h3>

<p>This section provides a step-by-step guide to setting up a barcode detection system using the <a href="../barcodedecoder/">Barcode Decoder</a> and <a href="#entitytrackeranalyzer">EntityTrackerAnalyzer</a>. </p>

<ol>
<li><p><strong>Initialize AI Data Capture SDK -</strong> Initialize the AI Data Capture SDK to enable Zebra-specific features in the application. This initialization should be performed in <code>MainActivity</code>. <em>Ensure this initialization step is completed before making any other calls to the AI Data Capture SDK.</em> If the initialization fails, it indicates a critical problem, and the application should not proceed further.</p>

<pre class="prettyprint"><code>if (!AIVisionSDK.getInstance(this.getApplicationContext()).init()) {
    throw new IllegalStateException("Critical component initialization failed");
}
</code></pre></li>

<li><p><strong>Setup Barcode Decoder -</strong> Configure the barcode decoder settings and obtain an instance:</p>

<pre class="prettyprint"><code>BarcodeDecoder.Settings settings = new BarcodeDecoder.Settings();
decorderExecutor = Executors.newSingleThreadExecutor();
BarcodeDecoder barcodeDecoder = BarcodeDecoder.getBarcodeDecoder(settings, executor).get();
</code></pre></li>

<li><p><strong>Configure Camera Controller -</strong> Set up the camera controller to use the <code>EntityTrackerAnalyzer</code> as the <code>ImageAnalysis.Analyzer</code> for processing image frames:</p>

<pre class="prettyprint"><code>resultsExecutor = Executors.newSingleThreadExecutor();

cameraController.setImageAnalysisAnalyzer(
    resultsExecutor,
    new EntityTrackerAnalyzer(
        Collections.singletonList(barcodeDecoder),
        ImageAnalysis.COORDINATE_SYSTEM_VIEW_REFERENCED,
        resultsExecutor,
        new Consumer&lt;EntityTrackerAnalyzer.Result&gt;() {
            @Override
            public void accept(EntityTrackerAnalyzer.Result result) {
                List&lt;? extends Entity&gt; entities = result.getValue(barcodeDecoder);
                for (Entity entity : entities) {
                    if (entity instanceof BarcodeEntity) {
                        BarcodeEntity barcodeEntity = (BarcodeEntity) entity;
                        Log.d(TAG, "value: " + barcodeEntity.getValue());
                    }
                }
            }
        }
    )
);
</code></pre></li>

<li><p><strong>Configure the Camera Controller Lifecycle -</strong> Integrate the camera controller with the activity’s lifecycle.</p>

<pre class="prettyprint"><code>cameraController.bindToLifecycle(this); 
previewView.setController(cameraController);
</code></pre></li>

<li><p><strong>Resource Cleanup After Usage -</strong> Properly dispose of resources after use to prevent memory leaks and ensure that all resources are released after use:</p>

<pre class="prettyprint"><code>protected void dispose() {

<pre><code>// Shutdown executors to release threads
if (decorderExecutor!= null &amp;amp;&amp;amp; ! resultsExecutor.isShutdown()) {
    decorderExecutor.shutdown();
    decorderExecutor = null;
}

if (resultsExecutor != null &amp;amp;&amp;amp; !resultsExecutor.isShutdown()) {
    resultsExecutor.shutdown();
    ResultsExecutor = null;
}

// Close any clients or scanners to free up resources
if (barcodeScanner != null) {
    barcodeScanner.close();
    barcodeScanner = null;
}
</code></pre>

}
</code></pre></li>
</ol>

<hr>

<h3 id="methods" class="anchor"><a class="heading-anchor" href="#methods"><span></span></a>Methods</h3>

<h4 id="constructor-NaN" class="anchor"><a class="heading-anchor" href="#constructor-NaN"><span></span></a>Constructor</h4>

<pre class="prettyprint"><code>    public EntityTrackerAnalyzer(
            @NonNull List&lt;Detector&lt;? extends List&lt;? extends Entity&gt;&gt;&gt; detectors,
            int targetCoordinateSystem,
            @NonNull Executor executor,
            @NonNull Consumer&lt;EntityTrackerAnalyzer.Result&gt; consumer
    )
</code></pre>

<p>Constructs an <code>EntityTrackerAnalyzer</code> using specified entity detectors, target coordinate system, an executor, and a consumer. It initializes components for entity tracking, including a buffer manager and an entity tracker, using specified detectors. The analyzer configures entity processing and sets the coordinate system for analysis. The executor is used to execute the consumer. </p>

<p>Currently, only <a href="../barcodedecoder/">BarcodeDecoder</a> is supported as a detector. Only one detector of each type is accepted. Providing multiple detectors of the same type results in undefined behavior.</p>

<p>The <code>EntityTrackerAnalyzer</code> calculates the output bounding box coordinates based on the <code>targetCoordinateSystem</code> set by the user:</p>

<ul>
<li><code>COORDINATE_SYSTEM_ORIGINAL</code> - Bounding boxes are delivered in the analyzer's coordinate system, accounting rotation at the analyzer.</li>

<li><code>COORDINATE_SYSTEM_SENSOR</code> (default) - Bounding boxes are delivered in the sensor's coordinate system after applying rotation at the analyzer.  </li>

<li><code>COORDINATE_SYSTEM_VIEW_REFERENCE</code> - Bounding boxes are delivered in the PreviewView coordinate system by applying rotation at the analyzer, transformation from analyzer to sensor, and transformation from sensor to PreviewView.</li>
</ul>

<p>All transformations take into account the image rotation (from <code>ImageInfo.getRotationDegrees()</code>). For example, with a 90 degree rotation using <code>COORDINATE_SYSTEM_ORIGINAL</code>, the point (0,0) maps to (0, h), where h is the <code>imageProxy</code>’s height.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>Detectors -</strong> A list of entity detectors to be utilized for detection and tracking.</li>

<li><strong>TargetCoordinateSystem -</strong> The coordinate system used for image analysis: <code>COORDINATE_SYSTEM_ORIGINAL</code>, <code>COORDINATE_SYSTEM_SENSOR</code> or <code>COORDINATE_SYSTEM_VIEW_REFERENCED</code>; see Android Developers <a href="https://developer.android.com/reference/androidx/camera/core/ImageAnalysis">ImageAnalysis API reference</a>.</li>

<li><strong>executor -</strong> The executor responsible for executing the consumer.</li>

<li><strong>consumer -</strong> A consumer function to handle the processing of detected entities.</li>
</ul>

<hr>

<h3 id="imageanalysisanalyzerinterface" class="anchor"><a class="heading-anchor" href="#imageanalysisanalyzerinterface"><span></span></a>ImageAnalysis.Analyzer Interface</h3>

<h4 id="voidanalyzeimageproxyimage" class="anchor"><a class="heading-anchor" href="#voidanalyzeimageproxyimage"><span></span></a>void analyze(ImageProxy image)</h4>

<pre class="prettyprint"><code>    public void analyze(@NonNull ImageProxy image)
</code></pre>

<p>Analyzes the image with the Detectors. This method forwards the image to the detectors. Typically, this method is called by ImageAnalysis when a new frame becomes available:</p>

<pre class="prettyprint"><code>    void camerax.EntityTrackerAnalyzer.analyze(ImageProxy image)    
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>image -</strong> An <code>ImageProxy</code> object representing the image to be analyzed.</li>
</ul>

<p><br></p>

<h4 id="getdefaulttargetresolution" class="anchor"><a class="heading-anchor" href="#getdefaulttargetresolution"><span></span></a>GetDefaultTargetResolution()</h4>

<pre class="prettyprint"><code>    public Size getDefaultTargetResolution()
</code></pre>

<p>Returns the default target resolution for image analysis in the <code>EntityTrackerAnalyzer</code>.</p>

<p><strong>Return Value:</strong>
A Size object representing the default resolution for target images.</p>

<p><br></p>

<h4 id="gettargetcoordinatesystem" class="anchor"><a class="heading-anchor" href="#gettargetcoordinatesystem"><span></span></a>getTargetCoordinateSystem()</h4>

<pre class="prettyprint"><code>    public int getTargetCoordinateSystem()
</code></pre>

<p>Returns the current coordinate system used inside the Analyzer. This is passed to the analyzer when it is created via the constructor.    </p>

<p><strong>Returns:</strong>
An integer representing the coordinate system type.</p>

<p><br></p>

<h4 id="finalvoidupdatetransform" class="anchor"><a class="heading-anchor" href="#finalvoidupdatetransform"><span></span></a>final void    updateTransform()</h4>

<pre class="prettyprint"><code>    final EntityTrackerAnalyzer.updateTransform()    
</code></pre>

<p>This method should be implemented to receive a transformation matrix that converts coordinates from the camera sensor’s system to the target system defined in <code>getTargetCoordinateSystem()</code>. It is used for transforming detected coordinates, such as those of a detected face. If the matrix is <code>null</code>, it indicates no valid transformation is available. This can occur if the target system is set to <code>COORDINATE_SYSTEM_ORIGINAL</code> or if the target system is unavailable, such as when the viewfinder is not visible. The method is invoked whenever a new transformation is ready, for example, when the viewfinder is launched or resized.</p>

<p><strong>Returns:</strong>
A <code>Matrix</code> object for transformation adjustments.</p>

<p><br></p>

<h4 id="updatetransform" class="anchor"><a class="heading-anchor" href="#updatetransform"><span></span></a>updateTransform()</h4>

<pre class="prettyprint"><code>    public final void updateTransform(@Nullable Matrix matrix)
</code></pre>

<p>Receives a transformation matrix that converts coordinates from the camera sensor’s system to the target system, which was passed as <code>targetCoordinateSystem</code> in the constructor. </p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>matrix -</strong> A <code>Matrix</code> object for transformation adjustments.</li>
</ul>

<p><br></p>

<h4 id="setcroprectrectfcroprect" class="anchor"><a class="heading-anchor" href="#setcroprectrectfcroprect"><span></span></a>setCropRect(RectF cropRect)</h4>

<pre class="prettyprint"><code>    public void setCropRect(RectF cropRect)
</code></pre>

<p>Sets the crop rectangle, which specifies the region of the image that the analyzer process for entities. It should be specified in <code>COORDINATE_SYSTEM_SENSOR</code> from <code>ImageAnalysis</code>.</p>

<p>Parameters:</p>

<ul>
<li><strong>cropRect -</strong> A <code>RectF</code> object with crop rectangle.</li>
</ul>

<hr>

<h2 id="detectors" class="anchor"><a class="heading-anchor" href="#detectors"><span></span></a>Detectors</h2>

<p>The <code>BarcodeDecoder</code> and <code>TextOCR</code> classes implement a detector interface, enabling efficient image analysis using the <code>process(ImageData imageData)</code> method: </p>

<ul>
<li><a href="../barcodedecoder/">BarcodeDecoder</a> – This detector method accepts <code>ImageData</code> and generates a list of <code>BarcodeEntity</code> objects.</li>

<li><a href="../textocr/">TextOCR</a> - This detector interface facilitates integration with CameraX as the frame source, allowing the creation of custom analyzers for detecting and decoding barcodes within frames provided to the <code>analyze()</code> interface. This is particularly beneficial for applications requiring the combination of multiple detectors within the CameraX analyzer. This detector processes <code>ImageData</code> to analyze textual content.</li>
</ul>

<hr>

<h3 id="developerguide-1" class="anchor"><a class="heading-anchor" href="#developerguide-1"><span></span></a>Developer Guide</h3>

<p>To build a custom CameraX Analyzer using the BarcodeDecoder Detector interface, follow these steps:</p>

<h4 id="step1createacustomanalyzer" class="anchor"><a class="heading-anchor" href="#step1createacustomanalyzer"><span></span></a>Step 1: Create a Custom Analyzer</h4>

<ol>
<li><strong>Implement ImageAnalysis.Analyzer -</strong> Implement the <code>ImageAnalysis.Analyzer</code> interface and override the <code>analyze()</code> method.</li>
</ol>

<h4 id="step2setupdecoderandlocalizersettings" class="anchor"><a class="heading-anchor" href="#step2setupdecoderandlocalizersettings"><span></span></a>Step 2: Set Up Decoder and Localizer Settings</h4>

<ol>
<li><strong>Create BarcodeDecoder Settings:</strong> Instantiate a <code>Settings</code> object for the BarcodeDecoder and enable the desired symbologies.</li>

<li><strong>Initialize BarcodeDecoder:</strong> Obtain a BarcodeDecoder instance asynchronously using <code>CompletableFuture</code>.</li>
</ol>

<h4 id="step3processframes" class="anchor"><a class="heading-anchor" href="#step3processframes"><span></span></a>Step 3: Process Frames</h4>

<ol>
<li><strong>Override analyze() -</strong> CameraX continuously feeds frames to the Analyzers bound to it. Override the <code>analyzer()</code> interface for their specific functionalities.</li>

<li><strong>Convert ImageProxy to ImageData -</strong> The <code>process()</code> interface requires <code>ImageData</code>. Use the <code>fromImageProxy()</code> method to convert from <code>ImageProxy</code>.</li>

<li><strong>Call process() -</strong> Invoke the <code>process()</code> method on the <code>ImageData</code> object to initiate barcode detection.</li>

<li><strong>Success Handling -</strong> Upon successful detection, <code>addOnSuccessListener</code> is activated, retrieving the barcode value and symbology type.</li>

<li><strong>Failure Handling -</strong> If detection fails, <code>addOnFailureListener</code> logs the error and closes the image.</li>

<li><strong>Exception Handling -</strong> Handle exceptions such as <code>InvalidInputException</code> and <code>AIVisionSDKException</code> by logging issues during processing and properly closing the image.</li>
</ol>

<p><strong>Sample Code:</strong></p>

<pre class="prettyprint"><code>    //import necessary packages

    public class CompositeAnalyzer implements ImageAnalysis.Analyzer {
        @Override
        public void analyze(@NonNull ImageProxy image) {
            try {
                barcodeDecoder.process(ImageData.fromImageProxy(image)).addOnSuccessListener(result -&gt;{

                    for(Entity&lt;?&gt; bb:result){
                        // Access bounding box and confidence
                        BoundingBox boundingBox = bb.getBoundingBox();
                        float confidence = bb.accuracy();

                        // Type cast Entity to BarcodeEntity for specific operations
                        BarcodeEntity barcodeEntity = (BarcodeEntity) bb;

                        // Access barcode-specific data
                        String barcodeValue = barcodeEntity.getValue();
                        String barcodeType = barcodeEntity.getSymbology();
                    }
                    image.close();
                })

                .addOnFailureListener(e -&gt;{
                    image.close();
                });
            } 
            catch (Exception e) {
                Log.e(TAG, "Analysis failed: " + e.getMessage());
            }
        }
    }
</code></pre>

<hr>

<h2 id="entityviewfinder" class="anchor"><a class="heading-anchor" href="#entityviewfinder"><span></span></a>Entity Viewfinder</h2>

<p><code>Entity Viewfinder</code> is a built-in viewfinder designed for seamless integration with CameraX as a preview component. It surpasses the default PreviewView by offering advanced features, such as rendering and interacting with <a href="../entity/">Entities</a>, making it an ideal choice for developers seeking to deliver a high-performance, intuitive user experience.</p>

<p>This viewfinder is utilized in applications requiring a visual interface for camera operations and entity detection, such as augmented reality applications, barcode scanners, and image recognition systems. It offers user interaction capabilities with camera controls, including zoom levels, flash settings, and draggable viewfinder functionality.</p>

<p><img alt="image" style="height:500px" src="./entity-viewfinder.png"></p>

<p><em>Sample Entity Viewfinder Screen</em></p>

<p><strong>Key Features:</strong></p>

<ul>
<li><strong>Entity Rendering -</strong> The viewfinder is optimized to display Entities directly within the camera preview, eliminating the need for additional layers or complex integrations.</li>

<li><strong>Simplified Styling -</strong> Developers can leverage prebuilt StylePens, making it easy to associate visual styles with generated Entities.</li>

<li><strong>Integrated Camera Controls -</strong> The Entity Viewfinder includes built-in camera controls such as zoom and flash, minimizing the need for manual implementation of these features.</li>

<li><strong>Adjustable and Movable Viewfinder -</strong> The Entity Viewfinder can be expanded to full-screen mode and reverted to its original dimensions using onscreen buttons. Additionlly, users can reposition the viewfinder by dragging it anywhere within the screen boundaries.</li>
</ul>

<p>The Entity Viewfinder mainly consists of three parts:</p>

<ul>
<li><strong><a href="#entityview">EntityView</a> -</strong> A visual interface that allows for customization of the viewfinder’s appearance and behavior.</li>

<li><strong><a href="#entityviewcontroller">EntityViewController</a> -</strong> A functional interface that manages and implements the operational features of the viewfinder.</li>

<li><strong>StylePen -</strong> A visual representation of the entities of the Entity Viewfinder.</li>
</ul>

<hr>

<h3 id="developerguide-2" class="anchor"><a class="heading-anchor" href="#developerguide-2"><span></span></a>Developer Guide</h3>

<p>This guide illustrates the integration and configuration of <code>EntityViewFinder</code> with a camera system using CameraX in an Android application. It covers setting up a viewfinder for camera preview and rendering entities with customizable styles. The guide also demonstrates how to manage user interactions and dynamically update the viewfinder with detected entities. </p>

<ol>
<li><p><strong>Integrate EntityView in XML Layout -</strong> Define <code>EntityView</code> in your XML layout file, specifying attributes to configure its initial behavior and appearance. </p>

<pre class="prettyprint"><code>//  Integrate EntityView in XML Layout 
&lt;com.zebra.ai.vision.viewfinder.EntityView 
    android:id="@+id/entity_view" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    app:zoom="x2" 
    app:draggable="false" /&gt; 
</code></pre></li>

<li><p><strong>Initialize EntityView and EntityViewController -</strong> Use <code>findViewById()</code> to obtain a reference to the <code>EntityView</code>, and instantiate an <code>EntityViewController</code> with this <code>EntityView</code> instance and the current context aas a lifecycleOwner. The controller manages the viewfinder’s operations and interactions. </p></li>

<li><p><strong>Setup Camera -</strong> Use <code>ProcessCameraProvider</code> to manage the camera lifecycle and <code>CameraSelector</code> to select the back-facing camera. </p></li>

<li><p><strong>Create a Preview Case -</strong> Create a <code>Preview</code> use case and set its surface provider using the <code>EntityViewController</code>. </p></li>

<li><p><strong>Set Up Image Analysis -</strong> Define an <code>ImageAnalysis</code> use case to analyze the camera feed. Set the resolution and necessary configuration and assign an <code>EntityTrackerAnalyzer</code> to process the images. </p></li>

<li><p><strong>Bind Camera to Lifecycle -</strong> Unbind any previous use cases before binding the camera to the lifecycle with the configured preview and image analysis use cases. Set the camera controller in the <code>EntityViewController</code>. </p></li>

<li><p><strong>Register Event Listeners -</strong> Register listeners to handle user interactions, such as entity click events, and to manage dynanmic layout changes, like viewfinder resize events. The resize listener allows users to establish field of view and entity coordinates between the preview and analyzer.  <br></p>

<p>Sample code for steps 2 to 6: </p>

<pre class="prettyprint"><code>// Initialize EntityView 
EntityView entityView = findViewById(R.id.entity_view); 

// Initialize the EntityViewController 
EntityViewController entityViewController = new EntityViewController(entityView, this); 

// Setup Camera 
ProcessCameraProvider cameraProvider = ProcessCameraProvider.getInstance(this).get(); 
CameraSelector cameraSelector = new CameraSelector.Builder() 
    .requireLensFacing(CameraSelector.LENS_FACING_BACK) 
    .build(); 

// Setup a Preview usecase 
Preview preview = new Preview.Builder().build(); 

// Set SurfaceProvider to preview usecase by retrieving it from the entityViewController 
preview.setSurfaceProvider(entityViewController.getSurfaceProvider()); 

// Set up image analysis use case 
ImageAnalysis imageAnalysis = new ImageAnalysis.Builder().setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST).build(); 
imageAnalysis.setAnalyzer(cameraExecutor, entityTrackerAnalyzer); 

// Unbind previous use cases before rebinding 
cameraProvider.unbindAll(); 

// Bind camera to lifecycle and get session camera instance 
camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, imageAnalysis); 

// Configure entity view controller with camera and listeners 
entityViewController.setCameraController(camera); 

// Register listener for entity click events 
entityViewController.registerEntityClickListener(entity -&gt; { 
    // Handle entity click events 
}); 

// Register Listener for Viewfinder Resize Events 
entityViewController.registerViewfinderResizeListener(specs -&gt; { 
    // Handle viewfinder size changes 
}); 
</code></pre></li>

<li><p><strong>Initialize StylePens for Entity Visualization -</strong> Create various <code>StylePen</code> instances for visualizing different entities as required. Configure these pens with desired styles, such as stroke width and icon type. </p>

<pre class="prettyprint"><code>// Initialize various style pens as per the use case 

private void initializeStylePens() { 
    StylePen qrCodeBoundingBoxPen = BoundingBoxDrawPen.builder() 
        .setStroke(8f, Color.BLUE) 
        .build(); 

<pre><code>StylePen upcaIconPen = IconDrawPen.builder() 
    .setIconStyle(IconStyle.SUCCESSFUL_DECODE) 
    .setClickable(true) 
    .build(); 
</code></pre>

} 
</code></pre></li>

<li><p><strong>Apply StylePens and Render Entities -</strong> In the analyzer results consumer method, clear previous entities and retrieve detected entities. Apply the appropriate <code>StylePen</code> to each entity based on your application use case and add them to the <code>EntityViewController</code>. Finally, render all entities on the viewfinder at once for optimized performance. </p>

<pre class="prettyprint"><code>// Analyzer results consumer method
private void handleEntities(EntityTrackerAnalyzer.Result result) { 

<pre><code>// Clear previous entities 
entityViewController.removeAll(); 

// Get detected entities 
List&amp;lt;? extends Entity&amp;gt; entities = result.getValue(barcodeDecoder); 

if (entities != null) { 
    Log.i(TAG, "Handle entities: " + entities.size()); 
    // Process each entity 
    for (Entity entity : entities) { 
        if (!(entity instanceof BarcodeEntity)) { 
            continue; 
        } 

        BarcodeEntity barcodeEntity = (BarcodeEntity) entity;       

        int symbology = barcodeEntity.getSymbology(); 

        // QR Code symbology 
        if (isQRCodeSymbology(symbology)) { 
            // Associate style pen initialized for QR codes 
            entityViewController.add(barcodeEntity, qrCodeBoundingBoxPen); 
        } 

        // UPCA symbology 
        if (isUPCASymbology(symbology)) { 
            // Associate style pen initialized for UPCA barcodes 
            entityViewController.add(barcodeEntity, upcaIconPen); 
        }             
    } 
} 

// Render all entities at once 
entityViewController.render(); 
</code></pre>

} 
</code></pre></li>
</ol>

<p><img alt="image" style="height:1000px" src="./entity-viewfinder-steps.png"></p>

<p><em>Workflow for integrating Entity Viewfinder with EntityTrackerAnalyzer</em></p>

<hr>

<h3 id="entityview" class="anchor"><a class="heading-anchor" href="#entityview"><span></span></a>EntityView</h3>

<p>The <code>EntityView</code> is a custom view designed to render the visual interface of a viewfinder. It is the UI representation of the <code>Entity Viewfinder</code>, displaying the camera preview along with interactive controls. It includes camera controls such as zoom and flash, as well as viewfinder-related features like a full-screen toggle button and a reset position button, providing essential functionality for managing the viewfinder and camera operations. </p>

<p>This view is meant to be integrated into your XML layout file to define the display area for the viewfinder interface. The <code>EntityView</code> should be used in conjunction with the <code>EntityViewController</code> to ensure proper operational management and seamless integration within your application.  </p>

<p>Currently the programmatic instantiation of the viewfinder is not supported. It is recommended to integrate it in the application using XML-based UI layouts. </p>

<hr>

<h4 id="methods-1" class="anchor"><a class="heading-anchor" href="#methods-1"><span></span></a>Methods</h4>

<h5 id="entityviewcontextcontext" class="anchor"><a class="heading-anchor" href="#entityviewcontextcontext"><span></span></a>EntityView(Context context)</h5>

<pre class="prettyprint"><code>    EntityView(Context context) throws AIVisionSDKException
</code></pre>

<p>Constructor that creates a new EntityView with the given context. </p>

<p><strong>Parameters:</strong> </p>

<ul>
<li><strong>context -</strong> The activity context. </li>
</ul>

<p><strong>Exceptions:</strong></p>

<ul>
<li><strong>AIVisionSDKException -</strong> Thrown if the context is null. </li>
</ul>

<h5 id="entityviewcontextcontextattributesetattrs" class="anchor"><a class="heading-anchor" href="#entityviewcontextcontextattributesetattrs"><span></span></a>EntityView(Context context, AttributeSet attrs)</h5>

<pre class="prettyprint"><code>    EntityView(Context context, AttributeSet attrs) throws AIVisionSDKException
</code></pre>

<p>Constructor that initializes the view with XML attributes. </p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>context -</strong> The activity context.  </li>

<li><strong>attrs -</strong> The XML attributes for configuration. </li>
</ul>

<p><strong>Exceptions:</strong></p>

<ul>
<li><strong>AIVisionSDKException -</strong> Thrown if the context is null. </li>
</ul>

<h5 id="entityviewcontextcontextattributesetattrsintdefstyleattr" class="anchor"><a class="heading-anchor" href="#entityviewcontextcontextattributesetattrsintdefstyleattr"><span></span></a>EntityView(Context context, AttributeSet attrs, int defStyleAttr)</h5>

<pre class="prettyprint"><code>    EntityView(Context context, AttributeSet attrs, int defStyleAttr) 
</code></pre>

<p>Constructor that initializes the view with XML attributes and a default style. </p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>context -</strong> The activity context.  </li>

<li><strong>attrs -</strong> The XML attributes for configuration. </li>

<li><strong>defStyleAttr -</strong> Default style attribute. </li>
</ul>

<h5 id="entityviewcontextcontextattributesetattrsintdefstyleattrintdefstyleres" class="anchor"><a class="heading-anchor" href="#entityviewcontextcontextattributesetattrsintdefstyleattrintdefstyleres"><span></span></a>EntityView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes)</h5>

<pre class="prettyprint"><code>    EntityView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) 
</code></pre>

<p>Constructor that initializes the view with XML attributes, default style, and default resources. </p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>context -</strong> The activity context. </li>

<li><strong>attrs -</strong> The XML attribute set for configuration. </li>

<li><strong>defStyleAttr -</strong> The default style attribute. </li>
</ul>

<h5 id="entityviewcontextcontextattributesetattrsintdefstyleattrintdefstyleres-1" class="anchor"><a class="heading-anchor" href="#entityviewcontextcontextattributesetattrsintdefstyleattrintdefstyleres-1"><span></span></a>EntityView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes)</h5>

<pre class="prettyprint"><code>    EntityView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) 
</code></pre>

<p>Constructor that initializes the view with XML attributes, a default style, and default resources. </p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>context -</strong> The activity context. </li>

<li><strong>attrs -</strong> The XML attribute set for configuration. </li>

<li><strong>defStyleAttr -</strong> The default style attribute. </li>

<li><strong>defStyleRes -</strong> The default style resource. </li>
</ul>

<h5 id="iviewfindercontrollergetviewfindercontroller" class="anchor"><a class="heading-anchor" href="#iviewfindercontrollergetviewfindercontroller"><span></span></a>IViewfinderController getViewfinderController()</h5>

<pre class="prettyprint"><code>    IViewfinderController getViewfinderController() 
</code></pre>

<p>Returns the viewfinder controller instance. </p>

<p><strong>Return Value:</strong> Returns either an instance of <code>IViewfinderController</code> or <code>null</code> if the view is not properly initialized. </p>

<p>NOTE: This API is not intended for developers use. </p>

<hr>

<h2 id="entityviewcontroller" class="anchor"><a class="heading-anchor" href="#entityviewcontroller"><span></span></a>EntityViewController</h2>

<hr>

<p>Related Guides:</p>

<ul>
<li><a href="../about/">About</a></li>

<li><a href="../setup/">Setup</a></li>

<li><a href="../localizer/">Localizer</a></li>

<li><a href="../productrecognition/">Product Recognition</a>


<ul>
<li><a href="../productrecognition/#featureextractor">Feature Extractor</a></li>

<li><a href="../productrecognition/#featurestorage">Feature Storage</a></li>

<li><a href="../productrecognition/#recognizer">Recognizer</a></li></ul>
</li>

<li><a href="../barcodedecoder/">Barcode Decoder</a></li>

<li><a href="../types/">Data Types</a></li>

<li><a href="../entity/">Entity</a></li>
</ul><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2025 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>