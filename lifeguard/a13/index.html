
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Migrating to Android 13">
    <title>Migrating to Android 13 - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <p class="navbar-text">
                                            LifeGuard
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/lifeguard/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/lifeguard/update">
                                    Device Update
                            </a>
                        </li>
                        <li>
                            <a href="/lifeguard/a13">
                                    A-13 Guide
                            </a>
                        </li>
                        <li>
                            <a href="/lifeguard/faq">
                                    FAQ
                            </a>
                        </li>
                        <li>
                            <a href="/lifeguard/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Migrating to Android 13</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="migrating-to-android-13" class="anchor"><a class="heading-anchor" href="#migrating-to-android-13"><span></span></a>Migrating to Android 13</h1>
                                    <p>
                                            LifeGuard
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><blockquote>
  <p><i class="fa fa-calendar" style="color:#27AE60;"></i> <strong>PAGE UPDATED: June 30, 2023</strong></p>
</blockquote>

<p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p><strong>Android 13 presents some unique challenges for organizations planning to migrate their Zebra <u><a href="https://supportcommunity.zebra.com/s/article/000022440?language=en_US">SDM660 platform devices</a></u></strong> from earlier Android versions. Updating such devices to Android 13 <u>generally requires conversion from Full-Disk Encryption to File-Based Encryption,</u> resulting in <u>loss of applications, data and settings when the partition is rebuilt using the new encryption.</u> However, <b>Zebra has developed a unique migration process to reduce data loss by backing up and restoring up to 3GB of applications, data, and settings locally on devices during the upgrade.</b></p>

<p><strong>Choose <em>one</em> of the following migration upgrade methods based on whether data preservation is required:</strong></p>

<ul>
<li><a href="#android13migrationprocess">Android 13 Migration Process</a> - Use this method if special action for data preservation is required.</li>

<li><a href="#android13quickupgrade">Android 13 Quick Upgrade</a> - Use this method if data preservation is <em>NOT</em> required, or if special action is <em>NOT</em> required to preserve data.
<!-- 
**The first section of this document covers the migration process to handle scenarios in which special action to achieve  <u>data preservation is required.</u>** If data preservation is ***NOT*** required, or if **special action is _NOT_ required to preserve data,** then [skip to the A13 Quick Upgrade (data loss)](#a13quickupgradedataloss) section of this document for Zebra's alternative simpler upgrade process.--></li>
</ul>

<!--
> <i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **This process is NOT NECESSARY for devices that comply with [Common Criteria Certification](https://www.zebra.com/us/en/cpn/common-criteria-certification.html)**.<br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Such devices should be upgraded to Android 13 using the normal process to avoid unwanted behavior.<br>-->

<hr>

<h2 id="android13migrationprocess" class="anchor"><a class="heading-anchor" href="#android13migrationprocess"><span></span></a>Android 13 Migration Process</h2>

<p><strong>This migration process allows for the preservation of select apps, data and settings on the device through data backup and restore.</strong> To simplify this migration process, Zebra developed <strong>Zebra File Guardian Utility</strong> that administrators must use to select the applications, data and settings to be preserved. </p>

<p>The <strong>File Guardian Utility</strong> is a Zebra application contained within <strong>Zebra Conversion Package (ZCP)</strong> that allows administrators to choose which non-system applications, data, and settings for backup and restoration during the migration process to prevent data loss. By creating a single "Golden Configuration" for use on all the devices in a group for a device persona, this single Golden Configuration can specify information about how to <strong>preserve the <em>MOST</em> important application, data and settings,</strong> allowing the migration process to proceed even if some of the devices in a group contain data in excess of the maximum size that can be preserved. The average estimated time on-device to perform this process is approximately 25 minutes.</p>

<blockquote>
  <p><i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> <span style="color:red">ATTENTION!!</span><br>
  <strong>Before proceeding to use this migration process, carefully read this entire section and follow all the provided guidelines.</strong> Failure to follow the guidelines and process could lead to data loss and/or failure that requires manual recovery. Any device that started but did not fully complete the migration process should be considered unsuitable for production use until it is successfully recovered as described in the <a href="#failurerecovery">Failure Recovery</a> section.<br> </p>
</blockquote>

<p><strong>Note:</strong> ZCP is a tool required for the migration. See migration <a href="#processoverviewpreparation">preparation</a>.</p>

<h3 id="considerations" class="anchor"><a class="heading-anchor" href="#considerations"><span></span></a>Considerations</h3>

<p><strong>Process Limitations:</strong></p>

<ul>
<li><strong>The My LifeGuard Updates feature of the <a href="/stagenow/latest/smartprofile">StageNow</a> workstation tool cannot be used to automate the creation of a Staging Profile to perform this migration process.</strong> This is because any Staging Profile created using the My LifeGuard Updates feature may result in data loss. To avoid data loss, a Staging Profile can manually be created to automate the migration process based on the guidance provided in this document.</li>

<li><strong>This migration process <em>ONLY</em> applies to devices that are currently using Full Disk Encryption.</strong> Without using this migration process, these devices would encounter data loss if upgraded to Android 13.


<ul>
<li>This generally includes devices in the following list: SDM660 device list.</li>

<li>If a device is already using File-Based Encryption (e.g., the device underwent Common Criterial Conversion) then there is no data loss and therefore this migration process is not required.</li></ul>
</li>

<li><strong>This migration process should <em>NOT</em> be used on devices that utilize the SD Card in Adoptable mode.</strong> It does not support the backup and restoration of apps, data, and settings stored on the SD Card. Applying this migration process to such devices will result in the loss of all data on the SD Card and may require manual intervention as described in the <a href="#failurerecovery">Failure Recovery</a> section of this document.</li>

<li><strong>This migration process should <em>NOT</em> be used on devices with multiple profiles or users.</strong> The migration process cannot backup and restore data for secondary profiles or users (e.g., COPE mode, BYOD mode, multi-user mode) and therefore would result in loss of data and unstable device functionality.</li>

<li><strong>Device batteries must have 30% charge (or more) or the device must be connected to AC power in order to perform the OS update part of the migration.</strong> Otherwise, it could cause the process to be delayed or fail. If that occurs, manual intervention may be required as described in the Failure Recovery section of this document.</li>

<li><strong>Normally, data stored in the <code>/enterprise</code> partition is not subject to data loss. However, the normal persistence process is suspended during the migration process.</strong> Therefore, applications, data, and settings persisted via the <code>/enterprise</code> partition will not be operative after the migration process <em>unless they are specified to be backed up and restored from step 13 in the procedure below to Prepare Golden Configuration.</em>


<ul>
<li><strong>After the migration process is complete and the device upgraded to Android 13, the normal persistence process applies again</strong> (e.g. files are peristed in subsequent data wipes).</li></ul>
</li>

<li><strong>The migration process is capable of preserving (backup and restore) a maximum of approximately 3GB of applications, data, and settings.</strong> If additional storage is required, you can prioritize which items to be backed up first. However, if there is insufficient space, some items may not be preserved.</li>

<li><strong>On non-GMS devices migrating to Android 13, this migration process does <em>NOT</em> persist data from the Android Messaging app.</strong></li>
</ul>

<p><strong>Backup and Restore Considerations:</strong></p>

<ul>
<li><strong>App, data, and settings that were originally applied by an EMM and that are not requested to be backed up and restored as part of the migration process could be reapplied by the EMM.</strong> This is provided that the app, data, and settings of the EMM are selected to be backed up and if the EMM is configured to do so.</li>

<li><strong>Data and settings for system apps are automatically and unconditionally backed up and restored before any non-system apps are backed up and restored.</strong></li>

<li><strong>GMS apps are system apps, so their data and settings are automatically and unconditionally backed up and restored.</strong>


<ul>
<li>Since GMS apps can be updated Over The Air (OTA) to newer versions, the migration to Android 13 could result in a temporary downgrade to an older version. When the migration is complete, this might cause the device to be updated again using OTA.</li></ul>
</li>

<li><strong>A device administrator is expected to select a representative device from deployment and consider it as a <em>Golden Configuration</em> device.</strong></li>

<li><strong>Non-system apps and their data and settings are <em>NOT</em> backed up and restored,</strong> unless they are explicitly selected via a Golden Configuration created using the File Guardian Utility.</li>
</ul>

<p><strong>Other Process Considerations:</strong></p>

<ul>
<li>The migration process may not configure all devices identically.


<ul>
<li>Since the migration process relies on backup and restore to preserve data, it may need to be executed differently on devices with significantly different application sets. Organizing th edevices into groups may be necessary, allowing for a customized migration process tailored to the specific needs of each group.</li></ul>
</li>

<li>Generally, some preparation is required before executing certain parts of the migration process.</li>

<li>The execution of the migration process may need to be adjusted based on the specific devices and timing of its application.</li>

<li>After executing certain stages of the migration process, additional finalization steps may be required to ensure that the devices reach an appropriate final production state.</li>

<li>Verification should be performed to ensure that the results of the migration process meet expectations and that the devices are ready to return to production use.</li>
</ul>

<h3 id="requirements" class="anchor"><a class="heading-anchor" href="#requirements"><span></span></a>Requirements</h3>

<ul>
<li><p>Zebra <a href="https://supportcommunity.zebra.com/s/article/000022440?language=en_US">SDM660 platform device</a> upgrading to Android 13. The Android platforms that support this migration process are:</p>

<ul>
<li>Android 8 - For devices with LG version earlier than 01-23-18.00-OG-U15-STD, the device must be upgraded to this version or newer prior to beginning the migration process.</li>

<li>Android 10 - All versions</li>

<li>Android 11 - All versions</li></ul>

<p><strong>Note:</strong> For Android 9, the device must be upgraded to Android 10 or 11 to meet this requirement.</p></li>

<li><p>A cable to connect a device to the PC via USB. The cable varies depending on device model. </p></li>

<li><p>An Admin host PC suitable for running the <a href="https://developer.android.com/tools/adb">Android Debug Bridge (adb).</a> Throughout this document, this will be referred to as the "PC" for simplicity.</p></li>
</ul>

<h3 id="processoverviewpreparation" class="anchor"><a class="heading-anchor" href="#processoverviewpreparation"><span></span></a>Process Overview &amp; Preparation</h3>

<ul>
<li><p><strong>Perform initial preparation:</strong></p>

<ul>
<li>Install Android Debug Bridge (adb) on the PC. <a href="/enterprise-browser/latest/guide/setup/#connections">Learn how to set up adb.</a></li>

<li>Download the <a href="https://www.zebra.com/us/en/support-downloads/lifeguard-security.html">Zebra Conversion Package (ZCP)</a> to the PC.</li>

<li>Download a suitable Android 13 OS image to the PC from the <a href="https://www.zebra.com/us/en/support-downloads/lifeguard-security.html">Zebra Support Portal.</a>


<ul>
<li>Zebra recommends to rename the downloaded Android 13 OS image file to FBE_FOTA.zip and store it in a folder from which adb will be executed. This simplifies subsequent steps that involve using adb.</li>

<li>It is required for sufficient storage space to be available in the data partition of the devices in order to store this image file and successfully perform the migration process. If sufficient space is not available, the devices cannot use this migration process.</li></ul>

<p></p></li><p></p>

<p></p><li>Optionally, some EMM policies can be disabled, which may interfere with or complicate the migration process.</li><p></p></ul><p></p></li>

<li><p><strong>Organize your devices into groups based on their usage persona:</strong></p>

<ul>
<li>Identify each group of devices that is representative of a typical usage persona. Organize devices into multiple groups if there are different applications installed and/or significant differences in the amount of data stored.</li>

<li>Choose a device in each group that is representative of the devices in that group. Throughout this document, the chosen device for a group will be referred to as the "Golden device” for that group and all devices in a group that are not the Golden device will be referred to as "Target devices" for simplicity.</li>

<li>If all devices are configured very similarly, then there is only one usage persona, resulting to a single group and a single Golden device.  </li></ul></li>

<li><p><strong>Execute the <a href="#migrationprocedure">Migration Procedure</a> for each group of devices.</strong></p></li>

<li><p><strong>If applicable, perform any final steps required after all groups of devices have completed the upgrade.</strong> This may include a reversal or stricter enforcement of certain steps performed during preparation. For example, it may be desirable to re-enable some EMM policies that were disabled as part of preparation.</p></li>

<li><p><strong>Optionally, verification can be performed to ensure that the resulting outcome meets expectations.</strong> For example, a report could be generated from an EMM to verify whether all devices that underwent the migration process are correctly reporting Android 13 as their operating system and functioning as expected.</p></li>
</ul>

<!-- The tool also permits file prioritization, allowing for a single "Golden Configuration" to be created for each device persona, or "Golden Device," so that a single instruction set **for preserving the *MOST* important data** can be deployed to devices that might contain data in excess of the maximum. -->

<h3 id="migrationprocedure" class="anchor"><a class="heading-anchor" href="#migrationprocedure"><span></span></a>Migration Procedure</h3>

<p>Follow this procedure for each group of devices required for the migration. See <a href="#processoverviewpreparation">Process Overview &amp; Preparation</a> to identify individual device groups.</p>

<h4 id="part1adjustpasswordpolicyforalldevicesinagroup" class="anchor"><a class="heading-anchor" href="#part1adjustpasswordpolicyforalldevicesinagroup"><span></span></a>Part 1: Adjust Password Policy for All Devices in a Group</h4>

<ol>
<li>IF NECESSARY: <strong>Remove password policies from all devices in the group</strong> to ensure that migration operations can be completed.


<ul>
<li>The migration process <em>ALWAYS</em> results in the loss of any existing PIN/password that was present on the device prior to the migration process. If a password policy is applied using your EMM, it could result in an EMM-specific interruption in the migration process flow. Removing such a policy could result to a smoother migration process. Any such policies removed may likely need to be restored during finalization.</li></ul>
</li>

<li>IF DESIRED: <strong>Remove PINs/passwords from devices to make the migration process fully unattended.</strong>


<ul>
<li>If Android Secure Startup is enabled on the devices, the user is REQUIRED to enter a PIN/password after every reboot. Since the migration process includes multiple reboots, enabling Secure Startup prevents the migration process from being fully unattended.</li>

<li>If Android Secure Startup is disabled on the devices and a PIN/password is set, the user is REQUESTED to enter a PIN/password after each reboot. The migration process is designed to proceed even without such entry and therefore can proceed fully unattended.</li></ul>
</li>
</ol>

<h4 id="part2producethegoldenconfigurationupgradethegoldendeviceofthegroup" class="anchor"><a class="heading-anchor" href="#part2producethegoldenconfigurationupgradethegoldendeviceofthegroup"><span></span></a>Part 2: Produce the Golden Configuration &amp; Upgrade the Golden Device of the Group</h4>

<p>To produce a <em>Golden Configuration</em> to apply to <em>Target devices,</em> perform the following steps MANUALLY on the <em>Golden device</em> (identified from a group of devices for a usage persona):</p>

<ol>
<li><p>IF NECESSARY, relax any restrictions applied to the Golden device that might prevent the use of adb on the PC to send and pull files from the Golden device. Restrictions that could prevent the use of adb and therefore may need to be relaxed include one or more of the following:</p>

<ul>
<li>MX UsbMgr USB Module Usage set to Disable, thus preventing all use of USB on the Golden device.</li>

<li>MX UsbMgr ADB Enable/Disable set to Disable, thus preventing use of adb on the Golden device.</li>

<li>MX AccessMgr System Settings Access set to anything other than Full, thus preventing the user from launching the Settings UI to enable adb.</li>

<li>MX UiMgr Gear Icon Show/Hide set to Hide, thus preventing the user from launching the Settings UI from the Gear Icon in the Notification Panel.</li>

<li>MX UiMgr Notification Pulldown Enable/Disable set to Disable, thus preventing the user from pulling down the Notification Panel and thus preventing the user from launching the Settings UI from the Gear Icon in the Notification Panel.</li>

<li>If an EMM is preventing the use of adb, then enable adb usage on the Golden device by configuring the EMM settings.</li>

<li>Using a launcher to lock-down the device and prevent the user from launching the Settings UI.</li></ul></li>

<li><p>Set up adb on the Golden device by following these steps:</p>

<ul>
<li>Launch <strong>Settings</strong> on the Golden Device</li>

<li>Scroll down and select <strong>About phone</strong></li>

<li>Scroll down to <strong>Build number</strong></li>

<li>Tap on <strong>Build number</strong> 7 times to “become a developer”</li>

<li>Tap back to the <strong>Settings</strong> main page</li>

<li>Scroll down and select <strong>System</strong></li>

<li>Select <strong>Advanced</strong></li>

<li>Select <strong>Developer options</strong></li>

<li>Scroll down and enable <strong>USB debugging</strong></li>

<li>Connect the appropriate cable between the Golden device and the PC</li>

<li>On the PC, open a command prompt and change to a directory where adb can be executed. For more information on adb see <a href="/enterprise-browser/latest/guide/setup/#connections">Learn how to set up adb.</a></li>

<li>On the PC use the command <code>adb devices</code> to connect the PC to the Golden device via adb.</li>

<li>On the PC, adb may display the device ID and the word “unauthorized” if the USB debugging has not previously been allowed on the Golden device.</li>

<li>On the Golden device, if USB debugging was not previously allowed, a popup appears: “Allow USB debugging?”. Tap the <strong>Allow</strong> button.</li>

<li>On the PC use the command <code>adb devices</code> for the PC to connect to the Golden device via adb.</li>

<li>On the PC adb should now display the device ID and the word “device”, indicating that USB debugging is now allowed on the device and that adb is working properly.</li></ul></li>

<li><p>RECOMMENDED: Check if data preservation is required for the Golden device. Therefore, it would need to be applied to Target devices in the same group.</p>

<ul>
<li>This can be done from the PC by using the command <code>adb shell getprop ro.crypto.type</code>.</li>

<li>If the value “block” is returned, then the device is using Full Disk Encryption and will be converted to File Based Encryption as part of the upgrade to Android 13. Therefore, the migration process is required to prevent data loss.</li>

<li>If the value “file” is returned, then the device is already using File Based Encryption and no data loss will occur as part of the upgrade to Android 13. Safely skip forward to the <a href="#android13quickupgrade">Android 13 Quick Upgrade</a> section of this document.</li></ul></li>

<li><p>On the PC, use the command <code>adb push FBE_FOTA.zip /data/tmp/public/FBE_FOTA.zip</code> to push the Android 13 OS image to the required folder and with the required file name in the Golden device using adb.</p>

<ul>
<li>The above adb command assumes that the Android 13 OS image is downloaded to the PC and placed in the folder from which adb is run with the required name. If that is not the case, then the first (source file) argument to the adb command needs to be modified to specify the path to where the file is located with the correct file name.</li>

<li>The second (destination) argument to the adb command must not be changed since the exact specified folder and file name of the file on the device must be used in order for the migration process to work correctly.</li></ul>

<blockquote>
  <p><i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> <span style="color:red">ATTENTION!!</span><br>
  <b><i>DO NOT</i> proceed with the subsequent steps if the adb command for this step fails,</b> e.g. there is insufficient free storage space. If this occurs, the Golden device needs to be recovered as described in the <b><a href="#failurerecovery">Failure Recovery</a></b> section.</p>
</blockquote></li>

<li><p>On the PC use the command <code>adb shell chmod 666 /data/tmp/public/FBE_FOTA.zip</code> to ensure that the file is world read/write.</p></li>

<li><p>On the PC use the command <code>adb reboot recovery</code> to cause the Golden device to enter Recovery Mode.</p></li>

<li><p>From the Recovery Mode UI on Golden device, select “Apply upgrade from adb” to start listening for ZCP to be sent from PC.</p></li>

<li><p>On the PC, use the command <code>adb sideload ZCP</code> command to send ZCP from PC to the Golden device, where zcp is the path and file name of where ZCP was previously downloaded to on the PC.</p></li>

<li><p>From the Recovery Mode UI on the Golden device, select “Reboot system now” to boot the device into ZCP.</p></li>

<li><p>ZCP presents a screen on the Golden device from which the File Guardian Utility can be launched. 
<img alt="image" style="height:350px" src="zcp-launch-zfg.png">
If this icon is visible, proceed to step 12.</p></li>

<li><p>If your EMM has been enrolled and configured to “disable system apps”, then File Guardian Utility may be disabled:
<img alt="image" style="height:350px" src="zcp-zfg-disabled.png"></p>

<ul>
<li>If this occurs, use your EMM to enable the File Guardian Utility (package name: com.zebra.fileutility) on the Golden device and then reboot the Golden device. The screen from step 10 allowing the File Guardian Utility should appear on the Golden device after it reboots. </li></ul></li>

<li><p>Based on the image from step 10, click on the icon to launch the File Guardian Utility.</p></li>

<li><p>Select and prioritize the apps, data, and settings to be preserved. Save backup information as the “Golden Configuration” file for the group of devices represented by the Golden device. </p></li>

<li><p>Tap <strong>Get Started</strong> to proceed: 
<img alt="image" style="height:350px" src="begin_1.jpg">
<br></p></li>

<li><p>After a few moments, the tool presents a list of all apps and data** on the device with an interface for making selections:
<img alt="image" style="height:350px" src="begin_7.jpg">
<br></p></li>

<li><p><strong>Tap to select apps and files</strong> to preserve. <br>
<i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> If the size limit is reached, it might be necessary to de-select some items or move them lower in the priority (see next step). 
<img alt="image" style="height:350px" src="begin_12.jpg">
<br></p></li>

<li><p>After selecting files** to be preserved, <strong>drag the most important files toward the top</strong>.<br>
When finished, <strong>tap "Proceed" and then "Save XML"</strong> to store the Golden Config:
<img alt="image" style="height:350px" src="begin_13.jpg">
<br></p></li>

<li><p><strong>OPTIONAL: Select additional tests</strong> as desired, then <strong>tap "Proceed"</strong> button:
<img alt="image" style="height:350px" src="begin_14a.jpg">
<br> </p></li>

<li><p><strong>When the message below is displayed, it's safe to proceed</strong> to the next step.<br>
&nbsp;&nbsp;&nbsp;Notice the path indicating the <strong>backup file location</strong>: 
<img alt="image" style="height:350px" src="begin_15.jpg">
<br> </p></li>

<li><p>Tap <strong>Ok.</strong></p></li>

<li><p>On the PC use the command <code>adb pull /enterprise/usr/persist/backup_restore_config.xml backup_restore_config.xml</code> to extract the Golden Configuration file from the Golden device onto the PC.</p>

<ul>
<li>The second (destination) argument may be changed to give the file a different name on the PC than is on the Golden device. This might desirable if there is a need to keep track of multiple Golden Configuration files for multiple groups.</li>

<li>When pushing a Golden Configuration file to devices, it must be pushed with the same name it had on the Golden device, regardless of what name it was extracted to on the PC.</li></ul></li>

<li><p>Tap <strong>Proceed with Device Update.</strong>
<img alt="image" style="height:350px" src="zcp-proceed.png"></p></li>

<li><p>When the Golden device boots into Android 13, reapply any restrictions that were relaxed in Step 1 (if applicable) to finalize the state of the Golden device.</p></li>

<li><p>Test the Golden device to ensure that the manual process has properly updated the Golden device and that the Golden device is in an acceptable production state. Verify the expected preservation of required applications, data, and settings.</p>

<ul>
<li>If the Golden device is not in an acceptable state, then it is not advisable to move on to the next part of the migration process. Make any necessary corrections in the manual process and apply the revised process to a new Golden device selected from the same group until the Golden device is in an acceptable state.</li></ul></li>

<li><p>Any failure in the migration process on a Golden device should be handled as described in the <a href="#failurerecovery">Failure Recovery</a> section of this document.</p></li>
</ol>

<h4 id="part3testthegoldenconfigurationbyupgradingasubsetoftargetdevicesinthegroup" class="anchor"><a class="heading-anchor" href="#part3testthegoldenconfigurationbyupgradingasubsetoftargetdevicesinthegroup"><span></span></a>Part 3: Test the Golden Configuration by Upgrading a Subset of Target Devices in the Group</h4>

<p>To test the golden configuration, perform the following steps on a selected subset of Target devices:</p>

<ol>
<li>Determine the method used to automate this migration process (e.g., EMM, StageNow, etc.). Use that method as needed to perform the following steps.


<ul>
<li>The details on how to accomplish this cannot provided here since it depends on multiple factors, such as the EMM in use, personal choice, etc.</li>

<li>Verify that the selected method used to push files ensures that the permissions on the pushed files allow global read/write (e.g. 666 or 777 permissions). Note that using the Zebra MX FileMgr (using StageNow, MX, OemConfig, etc.) automatically does this, but if a file is being pushed using an EMM, an extra step might be required.</li></ul>
</li>

<li>Use the selected automation method from step 1 to push the Golden Configuration file “backup_restore_config.xml” (extracted from the Golden device for the group) to the file path <code>/enterprise/usr/persist/backup_restore_config.xml</code> on all Target devices in the chosen subset.</li>

<li>Push the Android 13 OS image to the file path <code>/data/tmp/public/FBE_FOTA.zip</code> on the Target device in the chosen subset using the chosen method. If Zebra LifeGuard OTA is not used via Zebra DNA Cloud or an integrated EMM, this step is not required.</li>

<li>Perform an OS upgrade to the ZCP on the Target devices in the chosen subset using the chosen method. If using Zebra LifeGuard OTA via Zebra DNA Cloud or an integrated EMM, this step is not required.</li>

<li>If the automated process cannot proceed fully unattended, have device operators enter the PIN/password as needed on the Target devices in the chosen subset to ensure that all Target devices complete the process.</li>

<li>Verify the Target devices in the chosen subset to ensure that they are properly updated from the automated process and they are all in an acceptable production state (including the expected preservation of required applications and data).


<ul>
<li>If not satisfied with the state of any of the any devices in the chosen subset, then it is not advisable to move onto the next part of the process. Make any necessary corrections in the automated process and apply it to a new chosen subset of Target devices selected from the same group until the expected result is achieved on all Target devices in the chosen subset.</li></ul>
</li>

<li>Any failure in the migration process on a Target device should be handled as described in the <a href="#failurerecovery">Failure Recovery</a> section.</li>
</ol>

<p>The migration process may proceed fully unattended, automatically rebooting multiple times until the device is in the final state on Android 13. Otherwise, depending on the starting state of the device and depending on whether any configurations are changed during preparation, the process may not proceed fully unattended and manual interventions (e.g. enter a PIN/passcode) may be required for a device to reach the final state on Android 13. Aside from any required interventions, users should be instructed not to interfere with devices during the migration process.</p>

<h4 id="part4massdeploytheupgradeprocesstotheremainingtargetdevicesinthegroup" class="anchor"><a class="heading-anchor" href="#part4massdeploytheupgradeprocesstotheremainingtargetdevicesinthegroup"><span></span></a>Part 4: Mass Deploy the Upgrade Process to the Remaining Target Devices in the Group</h4>

<p>After successfully verifying a small chosen subset of Target devices in a group, the migration process may be applied to ALL remaining Target devices in the group. These remaining devices may be broken down into subsets for logistical reasons. Follow the same steps described in Part 3 for the remainder of the Target devices in the group or subsets of devices until the migration process is complete for the group.</p>

<h4 id="part5repeatupgradeprocessuntilalldevicegroupsaremigrated" class="anchor"><a class="heading-anchor" href="#part5repeatupgradeprocessuntilalldevicegroupsaremigrated"><span></span></a>Part 5: Repeat Upgrade Process Until All Device Groups are Migrated</h4>

<p>If there are multiple device groups, repeat the Migration Procedure for every group.</p>

<hr>

<!--
## File Guardian Utility

**File Guardian Utility** is a Zebra application contained within ZCP that allows administrators to choose which non-system applications, data, and settings for backup and restoration during the migration process to prevent data loss. It also allows administrators to prioritize items in case not all applications, data, and settings can be backed up.

**1. Tap "Get Started"** to proceed: 
 <img alt="image" style="height:350px" src="begin_1.jpg"/>
<br>

 **2. After a few moments, the tool presents a list of all apps and data** on the device with an interface for making selections:
 <img alt="image" style="height:350px" src="begin_7.jpg"/>
 <br>

 **3. Tap to select apps and files** to preserve. <br>
 <i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> If the size limit is reached, it might be necessary to de-select some items or move them lower in the priority (see next step). 
 <img alt="image" style="height:350px" src="begin_12.jpg"/>
 <br>

 **4. After selecting files** to be preserved, **drag the most important files toward the top**.<br>
 When finished, **tap "Proceed" and then "Save XML"** to store the Golden Config:
 <img alt="image" style="height:350px" src="begin_13.jpg"/>
 <br>

 **5. OPTIONAL: Select additional tests** as desired, then **tap "Proceed"** button:
 <img alt="image" style="height:350px" src="begin_14a.jpg"/>
 <br> 

 **6. When the message below is displayed, it's safe to proceed** to the next step.<br>
 &nbsp;&nbsp;&nbsp;Notice the path indicating the **backup file location**: 
 <img alt="image" style="height:350px" src="begin_15.jpg"/>
 <br> 

**7. Tap **Ok.**

**8. Proceed with step 15 from Part II.**
-->

<h2 id="failurerecovery" class="anchor"><a class="heading-anchor" href="#failurerecovery"><span></span></a>Failure Recovery</h2>

<p>If the <a href="#android13migrationprocess">Android Migration</a> process fails to complete on a Golden device or on a Target device, it could leave the device running the Zebra Conversion Package (ZCP). Since devices running ZCP are NOT suitable for production use, some manual intervention is generally required in this situation.</p>

<p>If any of the following symptoms of failure is detected on any device, take the recommended actions to recover that device:</p>

<ul>
<li>If the device remains in boot mode or repeatedly boots into the Zebra Conversion Package OS:


<ol>
<li>Reboot the device into Recovery mode. Instructions for rebooting into Recovery Mode vary by device. Refer to the device update guide or product documentation for the specific device.</li>

<li>From the Recovery Mode UI on the device, select “Apply upgrade from adb” to start listening for the Android 13 OS image to be sent from PC.</li>

<li>On the PC, use the command <code>adb sideload a13</code> to send the Android 13 OS image from PC to the Golden device, where "a13" is the path and file name of the location where the Android 13 OS image was previously downloaded on the PC.</li>

<li>From the Recovery Mode UI on the Golden device, select “Reboot system now” to boot the device into ZCP.</li>

<li>If the device is running Android 13 and appears stable (e.g. device does not crash, all expected apps, data, and settings are present and working as expected):


<ul>
<li>Reapply any restrictions that were relaxed on a Golden device to allow the use of adb.</li>

<li>Re-enable any policies that were disabled to return the device to production state.</li>

<li>Test the device to be sure it is ready for production deployment.</li></ul>
</li>

<li>If the device is not running Android 13 or is unstable (e.g. device crashes or expected apps, data, and settings are not present or not working as expected), contact <a href="https://www.zebra.com/us/en/about-zebra/contact-zebra/contact-tech-support.html">Zebra Support</a> for further assistance.</li></ol>
</li>

<li>If a device appears to be stuck in the middle of the upgrade process to Android 13:


<ol>
<li>Try rebooting the device. ZCP should automatically attempt the upgrade again to Android 13.</li>

<li>If the device keeps getting stuck in the upgrade, perform the same recovery action described in the first bulletpoint above with the first step: Reboot the device into Recovery mode.</li></ol>
</li>
</ul>

<hr>

<!-- <a id="#a13quickupgradedataloss"></a>-->

<h2 id="android13quickupgrade" class="anchor"><a class="heading-anchor" href="#android13quickupgrade"><span></span></a>Android 13 Quick Upgrade</h2>

<blockquote>
  <p><i style="color:#FF0000;"></i><font size="5" color="red"><b>STOP!!</b></font><br>
  <b>Follow this Simple Upgrade Procedure ONLY when certain that data loss is NOT a concern.</b> If unsure whether data loss is a concern, read the earlier portions of this document to determine whether using the simple procedure is appropriate for your situation.
  <br> </p>
</blockquote>

<h3 id="simpleupgradeprocedure" class="anchor"><a class="heading-anchor" href="#simpleupgradeprocedure"><span></span></a>Simple Upgrade Procedure</h3>

<p>The same standard methods may be used to perform an upgrade to Android 13 as commonly used to perform any other OS upgrade. The following are common methods for Android upgrades based on the tool used:</p>

<p><strong>StageNow:</strong></p>

<ul>
<li>Use the My LifeGuard Updates feature of the <a href="/stagenow/latest/smartprofile">StageNow</a> workstation tool to automate the creation of a Staging Profile to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>

<li>Use the StageNow workstation tool to manually build a Staging Profile to automate the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>
</ul>

<p><strong>Zebra DNA Cloud:</strong></p>

<ul>
<li>Use the Zebra DNA Cloud Console to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>
</ul>

<p><strong>EMM:</strong></p>

<ul>
<li>Use an EMM with integrated support for Zebra Firmware Over The Air (FOTA) to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>

<li>Use an EMM that supports Zebra <a href="/oemconfig">OEMConfig</a> to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>

<li>Use an EMM with integrated support for performing OS upgrades of Zebra devices to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>

<li>Use an EMM that supports submitting XML to Zebra MX to perform the upgrade from the current (pre-Android 13) OS to the desired Android 13 OS.</li>
</ul>

<!-- #### Part 1: Golden Device > Golden Config

Perform this process ***ONCE for each device*** considered representative of a typical **usage persona**. 

##### On a device that's representative of a typical usage persona:

1. **[Download Zebra Conversion Package](https://www.zebra.com/us/en/support-downloads/lifeguard-security.html)** (ZCP) to admin host PC
2. **IF NECESSARY**: Remove password policies from devices to ensure that migration operations can be completed.&dagger;
3. **ON GOLDEN DEVICE ONLY**:<br>
&nbsp;&nbsp;&nbsp; a. Relax restrictions that prevent use of adb for file extraction during process setup.&dagger; [Learn how to set up adb](/enterprise-browser/3-4/guide/setup/#connections).<br>
&nbsp;&nbsp;&nbsp; b. **Download the Android 13 image** from the [Zebra Support Portal](https://www.zebra.com/us/en/support-downloads/lifeguard-security.html) and **push to device**.&dagger;&dagger;
4. **Push ZCP to a "Golden" device** (see below) **use Zebra MX Power Manager** (or the equivalent EMM function) to **perform an "OS Upgrade" and reboot device**. 
5. File Guardian utility appears on the Golden Device. **Select files to be preserved and save backup as the "Golden Configuration"** for that device class.
6. **Use adb to pull the Golden Config** from the Golden Device, storing it on the admin host PC.
7. **Push Golden Config to a specific location** on target device(s) being upgraded to Android 13. 
8. **FOR TARGET DEVICES ONLY** (not Golden Device):<br>
&nbsp;&nbsp;&nbsp; **a. Download the desired Android 13 image** from Zebra, change file name and **push to specific location** on target device(s).<br> 
&nbsp;&nbsp;&nbsp; b. **Push the Zebra Conversion Package** to the target device(s) and **perform "OS Upgrade"** with Zebra Power Manager Action or equivalent EMM function. 
9. When Golden device loads Android 13, restore file-access restrictions relaxed in Step 3a (if applicable).  
10. Repeat this process on all devices representative of typical usage personas.  

&dagger; <i><font size="2" color="DimGrey">Such policies must be restored manually after successful migration.</font></i>

&dagger;&dagger; <i><font size="2" color="DimGrey">This step allows the device to return to normal use after its utility in the migration process.</font></i>

#### Part 2: Golden Config > Target Devices 

After testing on one or a small group of devices, apply this process ***to ALL devices considered representative of each usage persona***. 

##### On devices representative of the typical usage persona for a given Golden Config: 

1. **IF NECESSARY**: Remove password policies from devices to ensure that automated migration operations can be completed without manual intervention.&dagger;
2. **Push ZCP to a "Golden" device** (see below) **use Zebra MX Power Manager** (or the equivalent EMM function) to **perform an "OS Upgrade" and reboot device**. 
3. **Push Golden Config to a specific location** on target device(s) being upgraded to Android 13. 
4. **Download the desired Android 13 image** from Zebra, change file name and **push to specific location** on target device(s).
5. **Push the Zebra Conversion Package** to the target device(s) and **perform "OS Upgrade"** with Zebra Power Manager Action or equivalent EMM function. 
6. When Golden device loads Android 13, restore file-access restrictions relaxed in Step 3a (if applicable).  
7. Repeat this process on all devices representative of typical usage personas.  

&dagger; <i><font size="2" color="DimGrey">Such policies must be restored manually after successful migration.</font></i>

<i class="fa fa-check-circle" style="color:#27AE60;"></i> **The process continues automatically**, rebooting several times before running Android 13 when completed successfully. <br><i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **USERS SHOULD BE INSTRUCTED NOT TO INTERFERE WITH THE AUTOMATED MIGRATION PROCESS**.<br>
<i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> Zebra STRONGLY recommends testing the migration process on a small group of devices from each persona before wider enterprise deployment.

><i class="fa fa-hand-paper-o fa-5x" style="color:#FF0000;"></i><br><font size="5" color="red">&nbsp;ATTENTION!!</font><br>
**<u>Before proceeding</u>, please read the [Notes](#notes), [Limitations](#limitations) and [Preconditions](#preconditions) sections below**.<br> Failure to do so could lead to data loss and/or unusable devices after attempting migration.<br> 

-->

<!-- 
-----

### Notes 

* Applies to **SDM660-platform devices only** ([see SDM660 device list](https://supportcommunity.zebra.com/s/article/000022440?language=en_US)) 
* **Converts device to file-based encryption** (from disk-based)
* **Preserves approximately 3GB** of apps and data 
* **The File Guardian utility allows data prioritization** for devices containing more than 3GB to preserve
* **Any data in** `/enterprise` **partition is preserved** 
* **Does NOT support Zebra's "[Smart Profile](/stagenow/latest/smartprofile/)" feature**
* **GMS app data and settings are preserved. GMS apps installed as part of A-13 might require an OTA update.** 
* **Expected availability: Late June, 2023**

### Limitations

* **App data and non-factory apps are NOT backed** up unless explicitly selected in the Golden Config.  
* **Android System settings are backed up by default**; no action or file-selection is required.  
* **Maximum backup size is approximately 3GB**.
* **Devices with SD Cards formatted as [Adoptable Storage](https://source.android.com/devices/storage/adoptable) are NOT supported**.
* **The process works only on the device's Primary User**. Work profiles, COPE and other multi-user scenarios are NOT preserved and cannot be recreated in Android 13.
* **GMS data and settings are preserved; GMS apps are deleted**.
* **App(s) originally installed by an EMM system from Google Play and NOT backed up** using the Zebra utility and must be reinstalled manually after migration.
* **If an automated upgrade fails and the device remains booted in the Zebra Conversion Package (interim OS), the upgrade to Android 13 must be completed manually**; the interim OS is NOT suitable for production environments.

> <i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **Failure to follow all steps and meet all preconditions** (below) prior to beginning the upgrade process could halt the automated process (and require manual intervention to continue) **and/or result in migration failure** (possibly in data loss and/or temporarily leaving device in an unusable state). 

### Preconditions
The following conditions must be met on devices before attempting to upgrade using this process.  -->

<!-- 1. Device must contain **LifeGuard update NO LATER THAN FEB 2023**  `<< REQUIRES CLARIFICATION`  -->

<!--
1. <b>Battery must have 30% charge</b> (or more) <b>or be connected to AC power</b>
2. **"Secure startup" PIN/password feature must be DISABLED** to allow process to continue unattended<br> 
To check: **Settings > Biometrics and security > Secure startup**
3. <b>Screen lock must be DISABLED</b> to allow process to continue unattended<br> 
To check: **Settings > Security > Screen Lock > PIN/Password/Pattern/Swipe**
4. **Password Policy must be DISABLED**<br> **For EMM users**, it also might be necessary to remove any password policy to ensure automated migration operations to complete. Such policies must be restored manually after migration is completed.
5. **SD Card must NOT be configured as [Adoptable Storage](https://source.android.com/devices/storage/adoptable)**<br> <i class="fa fa-external-link" style="color:#3498DB;"></i> <i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **LOSS OF CUSTOMER-APP DATA COULD RESULT**
6. **Device encryption type must be "FDE"** <br> 
To check: **Settings > About Phone > SW Components > Encryption Type > block**<br>
<i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> **Devices with "FBE" encryption type** support standard upgrade methods with no risk of data loss.
-->

<!-- removed oer eng. 
  8. **OPTIONAL**: If logs are to be collected for later debugging, **USB debugging MUST be ENABLED**  -->

<!--
> <i class="fa fa-hand-paper-o fa-5x" style="color:#FF0000;"></i> **Zebra strongly recommends backing up devices before attempting migration**.  

-----

## Migration Process Details

> <i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **This process is NOT NECESSARY for devices that comply with [Common Criteria Certification](https://www.zebra.com/us/en/cpn/common-criteria-certification.html)**.<br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Such devices should be upgraded to Android 13 using the normal process to avoid unwanted behavior.<br>

#### To upgrade Zebra SDM660-platform devices to Android 13: 

**&#49;. Identify "Golden" device(s)**, defined as device(s) typical of usage persona(s) within the organization that might include devices with: 
 * **Specific Zebra-provided apps** and data 
 * **Specific company-installed apps** and data
 * **System settings** such as pre-configured Wi-Fi access points, passwords, etc.
 * **EMM enrollment data** and agent apps
 * **Files and/or folders** created by the company or device users

**&#50;. [Download Zebra Conversion Package](https://www.zebra.com/us/en/support-downloads/lifeguard-security.html)** (ZCP), **use Zebra MX Power Manager** (or the equivalent EMM function) to **perform an "OS Upgrade" on the ZCP file and reboot device**. 

**&#51;. At boot, the device automatically runs File Guardian**, a Zebra utility used to select apps and data to be backed up and restored to devices after migration. <br>The resulting **backup is called a "Golden Configuration."** 
> <i class="fa fa-check-circle" style="color:#27AE60;"></i> Click any image to enlarge; ESC to exit.

 **a. Tap "Get Started"** to proceed: 
 <img alt="image" style="height:350px" src="begin_1.jpg"/>
<br>

 **b. After a few moments, the tool presents a list of all apps and data** on the device with an interface for making selections:
 <img alt="image" style="height:350px" src="begin_7.jpg"/>
 <br>

 **c. Tap to select apps and files** to preserve. <br>
 <i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> If the size limit is reached, it might be necessary to de-select some items or move them lower in the priority (see next step). 
 <img alt="image" style="height:350px" src="begin_12.jpg"/>
 <br>

 **d. After selecting files** to be preserved, **drag the most important files toward the top**.<br>
 When finished, **tap "Proceed" and then "Save XML"** to store the Golden Config:
 <img alt="image" style="height:350px" src="begin_13.jpg"/>
 <br>

 **e. OPTIONAL: Select additional tests** as desired, then **tap "Proceed"** button:
 <img alt="image" style="height:350px" src="begin_14a.jpg"/>
 <br> 

 **f. When the message below is displayed, it's safe to proceed** to the next step.<br>
 &nbsp;&nbsp;&nbsp;Notice the path indicating the **backup file location**: 
 <img alt="image" style="height:350px" src="begin_15.jpg"/>
 <br> 

**&#52;. Use adb to extract Golden Config from device at** `/enterprise/Usr/persist/backup_restore_config.xml` and store it on the administrative host PC. 

**&#53;. Use StageNow, OEMConfig, an EMM system to push the Golden Config to target device(s)** in the same location: 

* `/enterprise/Usr/persist/backup_restore_config.xml` 

**&#54;. Download the desired Android 13 OS image** appropriate for the device:
* [TC21 devices with GMS](https://www.zebra.com/us/en/support-downloads/software/operating-system/tc21-operating-system-for-gms.html)
* [TC21 devices without GMS](https://www.zebra.com/us/en/support-downloads/software/operating-system/tc21-operating-system-non-gms.html)

<i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> Reminder: **This process is for [Zebra SDM660-platform devices](https://supportcommunity.zebra.com/s/article/000022440?language=en_US) with FDE only**. Devices on most other platforms can use the [Quick Upgrade process](#a13quickupgradedataloss) with no fear of data loss. 

**&#55;. Push the Android 13 OS image to all device(s) (except Golden device)** using the following path and file name:<br>

* `/data/tmp/public/FBE_FOTA.zip` <br>
<i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **The Android 13 image MUST be in this location with this file name** or the process will **FAIL**. 

**&#56;. Push the Zebra Conversion Package to all target device(s) (except Golden device)** to be upgraded to Android 13. 

**&#57;. Perform an "OS Upgrade" on the ZCP using Zebra MX Power Manager** (or the equivalent EMM function). 

**&#49;&#48;. Repeat the process for devices from other personas**. 

> <i class="fa fa-check-circle" style="color:#27AE60;"></i> **The remainder of this process continues automatically**, rebooting several times before running Android 13 when completed successfully. <br>
<i class="fa fa-exclamation-circle" style="color:#FF0000;"></i> **USERS SHOULD BE INSTRUCTED NOT TO INTERFERE WITH THE AUTOMATED MIGRATION PROCESS**.<br><br>
> <i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> Once migration is completed, **restore policies removed to facilitate the process, if any**.<br>
> <i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> Zebra STRONGLY recommends testing the migration process on a small group of devices from each persona before wider enterprise deployment.

-----

## Failure Recovery

If an upgrade fails to complete, it could leave the device running the Zebra Conversion Package (ZCP). The steps below might be useful for restarting the upgrade attempt. Based on information displayed on the ZCP screen, perform one or more of the following steps: 

1. **If device is stuck at installation of Android 13 OS image**, try rebooting. ZCP will attempt to install Android 13 OS image again.

2. **If Step 1 fails, put device in recovery mode**. Instructions for entering recovery mode vary slighly by device. Some can be found in the [Device Update](../update) guide elsewhere in these LifeGuard TechDocs. Use [Android Debug Bridge (adb)](https://developer.android.com/tools/adb) <i class="fa fa-external-link" style="color:#3498DB;"></i> commands to push and install the Android 13 OS image. This should install and boot the device into Android 13. 

3. **If Android 13 boots but is unstable** (apps repeatedly crash, preserved data missing, etc.), [contact Zebra Support](https://www.zebra.com/us/en/about-zebra/contact-zebra/contact-tech-support.html) for further assistance.
-->

<!-- 
Per Allan: 
https://dl.google.com/android/repository/platform-tools-latest-windows.zip

If you simply unzip this to some suitable folder (e.g, c:\adb) on the PC and open a command shell to that folder, you should be able to use ADB commands on that PC without much muss or fuss.

The only uncertainty is device-specific drivers which is always an open question.  But I think most (if not all) of our devices may be using standard drivers now.

So, it MAY be the case that it “just works”.  I think it has “just worked” using the above approach for every device I have tried in the last several years.
 -->

<hr>

<!-- 
1. Push Special Conversion Package (SCP) to one golden target device > MX > PowerMgr > "Install" and reboot
File Guardian automatically launches, admin selects files for preservation, FG creates `/enterprise/usr/persist/backup_restore_config.xml`

2. Get Golden Config (GC) data file `/enterprise/usr/persist/backup_restore_config.xml` to local admin host PC

3. Push GC to `/enterprise/usr/persist/backup_restore_config.xml` to intended target(s) (slide 2) using any means available (SN, EMM, adb) (to /ent/usr)

4. a. OPTIONAL install file guardian as a side-loadable app. use MX or OEMConfig to send an intent to launch the file guardian, which operates on its own to examine target for adequate space and other prerequisite settings and creates a "PASS/FAIL" for each device. (against data file in step 3 and other requirements). 

4. b. Pull the pass/fail file examine it (some EMMs (i.e. soti) can parse file and take actions on contents). MX can pull file and put it somewhere. 

Choose whether to move forward with failed devices and let prioritization decide which files to save

5. push A-13 image (BSP, from Zebra) AND the SCP (same as before) to targets, changing the name of A-13 image to (/data/tmp/public/FBE_FOTA.zip) use MX Power Mgr to "install" the SCP. it sees the golden config there and does other stuff (magic)

5. If OPTIONAL step is not taken, then file prioritization kicks in. 
-->

<!-- 
<a id="#a13quickupgradedataloss"></a>
## A-13 Quick Upgrade (data loss)

><i class="fa fa-hand-paper-o fa-5x" style="color:#FF0000;"></i><br><font size="5" color="red">&nbsp;STOP!!</font><br>
**<u>All device data is erased</u> when upgrading SDM660 devices** to Android 13 ***except*** data in the `/enterprise` partition.<br> 

Upgrading to **Android 13 is <u>supported only on Zebra TC21 devices</u>** at this time. Other models will follow as Android 13 becomes available. During the upgrade process, an [Enterprise Reset](/stagenow/5-8/csp/power/#osupgradedowngrade) is performed, removing all device data except that stored in the `/enterprise` partition. The process is otherwise identical to that of a traditional upgrade (shown below). 

<i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> The following instructions are for Zebra StageNow, and should be modified accordingly for use with Zebra [OEMConfig](/oemconfig) or a company's own an EMM system.  

#### To upgrade to Android 13 without preserving device data:

**&#49;. Download the Android 13 OS image** appropriate for the device:
* [TC21 devices with GMS](https://www.zebra.com/us/en/support-downloads/software/operating-system/tc21-operating-system-for-gms.html)
* [TC21 devices without GMS](https://www.zebra.com/us/en/support-downloads/software/operating-system/tc21-operating-system-non-gms.html)


**&#50;. Push the OS image to the device(s)** by any available means (adb, StageNow, EMM, etc.).

**&#51;. Create a Profile with [Power Manager](/stagenow/latest/csp/power/#osupgradedowngrade)** to [perform an OSUpdate](/stagenow/5-9/Profiles/osupdate/), generate barcode(s) and scan with device scanner.

> <i class="fa fa-check-circle" style="color:#27AE60;"></i> **Success is indicated when device boots with Android 13**. <br>Proceed with EMM enrollment and additional provisioning as desired.  

### Notes

* **LifeGuard Over the Air is not supported** for Android 13 OS image deployment (coming later in 2023)
* **Zebra has successfully tested persistence** only when using Zebra [Persist Manager](/stagenow/5-8/csp/persistence/)
* **Persistence by means *other* than Zebra PersistMgr cannot be guaranteed**
* **Upgrades** to Android 13 are **supported only from devices running Android 8, 9, 10 or 11** 

-----

--><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2023 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>