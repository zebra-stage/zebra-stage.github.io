
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="PD40 Remote Firmware and EMV Param Update">
    <title>PD40 Remote Firmware and EMV Param Update - Zebra Technologies Techdocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <script type="text/javascript">
(function(e, t) {
    function r(e, t) {
        e[t] = function() {
            e.push([ t ].concat(Array.prototype.slice.call(arguments, 0)));
        };
    }
    var n = "JacoRecorder";
    (function(e, t, i, s) {
        if (!i.__VERSION) {
            e[n] = i;
            var o = [ "init", "identify", "startRecording", "stopRecording", "removeUserTracking", "setUserInfo" ];
            for (var u = 0; u < o.length; u++) r(i, o[u]);
            i.__VERSION = .9, i.__INIT_TIME = 1 * new Date;
            var a = t.createElement("script");
            a.async = !0, a.setAttribute("crossorigin", "anonymous"), a.src = s;
            var f = t.getElementsByTagName("head")[0];
            f.appendChild(a);
        }
    })(e, t, e[n] || [], "//recorder-assets.getjaco.com/recorder.js");
}).call(window, window, document), window.JacoRecorder.push([ "init", "0e8738ef-44eb-4eed-8d47-e564ec9b5587", {} ]);
</script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:42px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 5.0
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/5-0/guide/about">
                                    Home
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/guide/gettingstarted">
                                    Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/5-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>PD40 Remote Firmware and EMV Param Update</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="pd40-remote-firmware-and-emv-param-update" class="anchor"><a class="heading-anchor" href="#pd40-remote-firmware-and-emv-param-update"><span></span></a>PD40 Remote Firmware and EMV Param Update</h1>
                                    <p>
                                        EMDK For Android
                                        5.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>The Payment Manager is a service runs on mobile device which allows
querying the information such as firmware/application version and
current battery level; updating the firmware, updating EMV parameters
and installing font on remote PD40 payment device. The updating EMV
parameters and installing font will be supported in the future version.
The PD40 payment devices must be paired with mobile device before using
the Payment Manager.</p>

<p>The Payment Manager takes the input profile xml, performs the tasks
specified in the input profile xml and returns response xml.</p>

<h2 id="communicatingwithpaymentservice" class="anchor"><a class="heading-anchor" href="#communicatingwithpaymentservice"><span></span></a>Communicating with Payment Service</h2>

<p>The application must include the permission to access Payment Manager
Service in application’s AndroidManifest.xml as below:</p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.permission.PAYMENTMGR"/&gt;;
</code></pre>

<p>The application must write a code start the Payment Manager Service and
this can be achieved in two ways:</p>

<ol>
<li><p>Binding Method</p></li>

<li><p>Intent Method</p></li>
</ol>

<h3 id="bindingmethod" class="anchor"><a class="heading-anchor" href="#bindingmethod"><span></span></a>Binding Method</h3>

<p>The Payment Manager Service exposes an AIDL (Android Interface
Definition Language) for the application to communicate Payment Manager
Service for querying and updating payment device.</p>

<p>The AIDL interface file name is “IPaymentManager.aidl” and its content
is below:</p>

<pre class="prettyprint"><code>
package com.symbol.paymentmgr; 

 interface IPaymentManager {

 String processXML(String profileXml);

 }
</code></pre>

<p>The application can bind to Payment Manager Service and when the service
is connected, the application can call the processXML method to perform
the tasks specified the profile XML.</p>

<p>The Payment Manager Service package name and class details are below:</p>

<pre class="prettyprint"><code>
 String PAYMENT_SERVICE_PACKAG_NAME = "com.symbol.paymentmgr"; 

 String PAYMENT_SERVICE_CLASS_NAME =
 "com.symbol.paymentmgr.PaymentMgrService";
</code></pre>

<p><strong>Code snippet</strong></p>

<pre class="prettyprint"><code>
Intent bindSvcIntent = new Intent();

bindSvcIntent.setComponent(new
ComponentName(PAYMENT_SERVICE_PACKAG_NAME,
PAYMENT_SERVICE_CLASS_NAME ));&nbsp;

bindService(bindSvcIntent, paymentMgrServiceConnObj,
Context.BIND_AUTO_CREATE);

IPaymentManager paymentMgr = null;

public class PaymentMgrServiceConn implements ServiceConnection {

@Override
public void onServiceConnected(ComponentName name, IBinder service) {

paymentMgr = IPaymentManager .Stub.asInterface(service);

String responseXml = paymentMgr. processXML(profileXml)

}

@Override

public void onServiceDisconnected(ComponentName name) {

}

}

unbindService(this);// Unbind service connection once at the end of
processing or application exit.
</code></pre>

<h3 id="intentmethod" class="anchor"><a class="heading-anchor" href="#intentmethod"><span></span></a>Intent Method</h3>

<p>The Payment Manager Service exposes intent for the application to
communicate Payment Manager Service for querying and updating payment
device. The application must the send the profile XML as a part of the
intent which starts the service and service will be exited automatically
at the end of completion of the tasks specified in the profile.</p>

<pre class="prettyprint"><code>
Intents to start the payment service:

String PAYMENT_SERVICE_PACKAG_NAME = "com.symbol.paymentmgr"; 

String PAYMENT_SERVICE_CLASS_NAME &nbsp;=
"com.symbol.paymentmgr.PaymentMgrService";

String PAYMENT_SERVICE_PROFILE_EX_DATA_NAME &nbsp;=
"com.symbol.paymentmgr.PROFILE_XML”;

Intents to receive the result from the payment service:

String PAYMENT_SERVICE_RESULT_INTENT_NAME =
"com.symbol.paymentmgr.RESULT”;

String PAYMENT_SERVICE_ RESULT_EX_DATA_NAME =
"com.symbol.paymentmgr.RESPONSE”;
</code></pre>

<p><strong>Code Snippet:</strong></p>

<p>Start the Payment Service by sending intent to update the PD40 payment
device.</p>

<p>Option 1:&nbsp;</p>

<pre class="prettyprint"><code>
Intent intent = new Intent();

intent.setAction(PAYMENT_SERVICE_PACKAG_NAME);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

intent.putExtra(PAYMENT_SERVICE_PROFILE_EX_DATA_NAME,
profileXmlString);

startService(intent);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</code></pre>

<p>Option 2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>

<pre class="prettyprint"><code>
Intent intent = new Intent();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
intent.setComponent(new
ComponentName(PAYMENT_SERVICE_PACKAG_NAME,
PAYMENT_SERVICE_CLASS_NAME ));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

intent.putExtra(PAYMENT_SERVICE_PROFILE_EX_DATA_NAME,
profileXmlString);

startService(intent);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</code></pre>

<p>Register for the intent to receive result from the payment service:</p>

<pre class="prettyprint"><code>
IntentFilter filter = new IntentFilter();

filter.addAction(INTENT_PAYMNT_SERVICE_RESULT);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

appContext.registerReceiver(broadcastReceiver, filter);

private final BroadcastReceiver broadcastReceiver = new
BroadcastReceiver() {

@Override&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

public void onReceive(Context context, Intent intent) {

if
(intent.getAction().equals(INTENT_PAYMNT_SERVICE_RESULT)) {

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String responseString =
intent.getStringExtra(PAYMENT_SERVICE_ RESULT_EX_DATA_NAME);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp; };

//…

unregisterReceiver(broadcastReceiver); //Unregister the intent
receiver at the end.
</code></pre>

<h2 id="paymentmanagerprofilexml" class="anchor"><a class="heading-anchor" href="#paymentmanagerprofilexml"><span></span></a>Payment Manager Profile XML</h2>

<p>The Payment Manager Profile allows the system admin application to query
the payment device information such as firmware version and battery
level, and update Payment Device. These capabilities are grouped
together into single XML, what is referred to as Payment Manager
Profiles.</p>

<h3 id="supportedparameterslist" class="anchor"><a class="heading-anchor" href="#supportedparameterslist"><span></span></a>Supported Parameters List</h3>

<table border="1">
<tbody><tr><th>Parm Name</th><th>Description</th></tr>
<tr><td>DeviceAddress</td><td>List of PD40 Mac addresses or friendly names separated by “|”. If this value is empty or field doesn’t exists, all paired PD40 devices considered for query and update.

                                 Example:

                                 &lt;parm name =“DeviceAddress” value=“11:22:33:44:55:66|MPOS-12345667”/&gt;</td></tr>

<tr><td>IsUpgradeOnly</td><td>The supported values are true/false.

                                 If this parameter is set to true, the downloading lower or same versions of firmware is not allowed. If this parameter is set to false, device will be updated independent of the version. The default value is true. This is an optional field, applicable only for firmware update and for others it will be ignored.

                                 Example:

                                 &lt;parm name=“IsUpgradeOnly” value=“false”/&gt;</td></tr>

<tr><td>BatteryLevel</td><td>This queries the battery level of the PD40 Payment Device. This is optional field in the XML and is required only to query the PD40 battery level.

                                 Example:

                                 &lt;parm-query name=“BatteryLevel”&gt;

                                 Response:

                                 &lt;parm name=“BatteryLevel” Value=“3”&gt;

                                 The Battery level response values will be separated by | when queried for multiple devices.</td></tr>

<tr><td>Version</td><td>This returns version of the PD40 firmware and application in the format “F&lt;version&gt;_A&lt;version&gt;”. This is required only to query the version.

                                 Example:

                                 &lt;parm-query name=“Version”&gt;

                                 Response:

                                 &lt;parm name=“Version” Value=“F1.09_A1.2.0”&gt; 

                                 The versions will be separated by | for multiple devices.</td></tr>

<tr><td>DownloadType</td><td>Download file types are “FIRMWARE”, “EMVPARAM” and “FONT”. This is mandatory to update the device. The EMVPARAM and FONT will be supported in the future version.

                                 Example:

                                 &lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;</td></tr>

<tr><td>DownloadFile</td><td>Name of the download file and its path. This is mandatory to update the device. The Firmware update file name format must be “D180_F&lt;&lt;version&gt;_A&lt;&lt;version&gt;&gt;.bin or PD40_F&lt;&lt;version&gt;_A&lt;&lt;version&gt;&gt;.bin

                                 Example:

                                 “D180_F1.07_A1.1.6.bin”

                                 The EMV Param update file name may look like emvpara or emvpara_&lt;&lt;n&gt;&gt; or any other name.

                                 Example:

                                 &lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

                                 &lt;parm name=“DownloadFile” value=“/sdcard/emvpara”/&gt;</td></tr>

<tr><td>NumberOfRetries</td><td>Re-tries when connection failure or error occurs to update PD40 device. The default value is “1”. The range is 1 to 5. This is optional field in the XML. The Payment Manager will re-try after 500 ms if error any occurs and number of re-tries is greater than 1.

                                 Example:

                                 &lt;parm name=“ NumberOfRetries” value=“2”/&gt;</td></tr>

<tr><td>MinPaymentDeviceBatteryLevel</td><td>Minimum Payment Device battery level to start the update process. If this field is not set, the payment device defined default value is used. This is optional field in the XML. Range is 0 to 4.

                                 Example:

                                 &lt;parm name=“ MinPaymentDeviceBatteryLevel” value=“1”/&gt;</td></tr>

<tr><td>MinMobileDeviceBatteryLevel</td><td>Minimum Mobile Device battery level to start the update process. If this field is not set, 30% is considered as default. This is optional field in the XML.

                                 &lt;parm name=“ MinMobileDeviceBatteryLevel” value=“40”/&gt;</td></tr>
</tbody></table>

<h3 id="profilexmlinput" class="anchor"><a class="heading-anchor" href="#profilexmlinput"><span></span></a>Profile XML input</h3>

<p>The profile must contain <em>wap-provisioningdoc</em> as root node, one or more
<em>characteristic</em> node with type as <em>PaymentMgr</em>, <em>version</em> value as
“0.1”. The version attribute is reserved for future use only. Each
<em>characteristic</em> node can have one or more parm or parm-query nodes.</p>

<p>Example:</p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;!—Sample characteristic node to update firmware --&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt; parm name =“DeviceAddress”
value=“11:22:33:44:55:66|MPOS-12345667”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic&gt;

&lt;!—Sample characteristic node to update firmware --&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345001”/&gt;

&lt;parm name=“DownloadType” value=“ FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic&gt;

&lt;!—Sample characteristic node to query version --&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm-query name =“Version”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h2 id="profilexmlresponse" class="anchor"><a class="heading-anchor" href="#profilexmlresponse"><span></span></a>Profile XML response</h2>

<h3 id="successcase" class="anchor"><a class="heading-anchor" href="#successcase"><span></span></a>Success Case</h3>

<p>The Payment Manager Service returns the xml same as the profile input or
updated parm value(in case of query) if the request is processed
successfully.</p>

<h3 id="failurecase" class="anchor"><a class="heading-anchor" href="#failurecase"><span></span></a>Failure Case</h3>

<p>The corresponding characteristic node with failure will be renamed to
characteristic-error, desc attribute will be added with the error
details. If parm values specified are not valid, the corresponding parm
node will be renamed to parm-error and desc attribute will be added with
the error details.</p>

<p>If XML characteristic node has multiple devices requests, then desc will
have error separated by | in the order of the devices list at the
characteristic node desc filed.</p>

<p>Example:</p>

<p>If the input xml parm node has:</p>

<pre class="prettyprint"><code>
&lt;parm name =“DeviceAddress” value=“11:22:33:44:55:66|00:00:00:00:99:11|MPOS-12345667”/&gt;
</code></pre>

<p>The response xml characteristic node will be like:</p>

<pre class="prettyprint"><code>
characteristic-error type=“PaymentMgr” version="0.1"
desc=“REMOTE_DEVICE_NOT_PAIRED: Bluetooth remote device is not paired
with mobile device.|SUCCESS| REMOTE_DEVICE_BATTERY_LOW: Remote device
has low battery and operation can't be performed.”&gt;
</code></pre>

<h3 id="notsupportedcase" class="anchor"><a class="heading-anchor" href="#notsupportedcase"><span></span></a>Not Supported Case</h3>

<p>If any of the characteristic or parm node names specified is not valid
or not supported, the desc attribute will be added with the feature not
supported error information.</p>

<p>Example:</p>

<p>If the input xml parm node is:</p>

<pre class="prettyprint"><code>
&lt;parm name="TimeZone1" value="GMT+05:30"&gt;
</code></pre>

<p>The response xml parm node will like:</p>

<pre class="prettyprint"><code>
&lt;parm-error name="TimeZone1" value="GMT+05:30"
desc="FEATURE_NOT_SUPPORTED:The feature or parameters or its value is
not supported."/&gt;
</code></pre>

<p>Example:</p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;!—Firmware update response --&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt; parm name =“DeviceAddress”
value=“11:22:33:44:55:66|MPOS-12345667”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic&gt;

&lt;!— Firmware update response --&gt;

&lt;characteristic-error type=“PaymentMgr” version="0.1"
desc=”REMOTE_DEVICE_NOT_PAIRED:Bluetooth remote device is not
paired with mobile device.”&gt;

&lt; parm name =“DeviceAddress” value=“MPOS-12345001”/&gt;

&lt;parm name=“DownloadType” value=” FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic&gt;

&lt;!—Version query response --&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt; parm name =“Version” value=”F1.09_A1.2.0”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h2 id="errorcodes" class="anchor"><a class="heading-anchor" href="#errorcodes"><span></span></a>Error Codes</h2>

<table border="1">
<tbody><tr><th>Error Name</th><th>Description</th></tr>
<tr><td>SUCCESS</td><td>Success</td></tr>
<tr><td>FAILURE</td><td>Failure</td></tr>
<tr><td>UNDEFINED</td><td>Unknown error occurred</td></tr>
<tr><td>NULL_POINTER</td><td>Null pointer</td></tr>
<tr><td>EMPTY_PROFILE_XML</td><td>Profile XML is empty</td></tr>
<tr><td>INVALID_PROFILE_XML</td><td>The profile xml syntax is incorrect or not supported.</td></tr>
<tr><td>INVALID_VALUE</td><td>Value is not valid.</td></tr>
<tr><td>BUSY</td><td>Processing the other request. Try later...</td></tr>
<tr><td>XML_SYNTAX_ERROR</td><td>XML syntax error</td></tr>
<tr><td>FEATURE_NOT_SUPPORTED</td><td>The feature or parameters or its value is not supported.</td></tr>
<tr><td>REMOTE_DEVICE_NOT_PAIRED</td><td>Bluetooth remote device is not paired with mobile device.</td></tr>
<tr><td>FILE_NOT_EXISTS</td><td>The file specified in the profile xml does not exist.</td></tr>
<tr><td>INITIALIZATION_ERROR</td><td>Error occurred during Initialization.</td></tr>
<tr><td>UNINITIALIZATION_ERROR</td><td>Error occurred during un- Initialization.</td></tr>
<tr><td>INVALID_FIRMWARE_FILE_NAME_FORMAT</td><td>The firmware file name format is invalid</td></tr>
<tr><td>REMOTE_DEVICE_IN_USE</td><td>The remote device is used by other application.</td></tr>
<tr><td>FAILED_ENABLE_REMOTE_DEVICE</td><td>Failed to open connection with remote device.</td></tr>
<tr><td>FAILED_DISABLE_REMOTE_DEVICE</td><td>Failed to close connection with the remote device.</td></tr>
<tr><td>FAILED_CONNECT_TO_REMOTE_DEVICE</td><td>Failed to establish Bluetooth connection with remote device.</td></tr>
<tr><td>FIRMWARE_DOWNGRADE_NOT_ALLOWED</td><td>Downgrading the Firmware is not allowed. Set isUpgradeOnly=false in profile and try.</td></tr>
<tr><td>REMOTE_DEVICE_BATTERY_LOW</td><td>Remote device has low battery and operation can't be performed.</td></tr>
<tr><td>MOBILE_DEVICE_BATTERY_LOW</td><td>Mobile device battery level is low and operation can't be performed.</td></tr>
<tr><td>REMOTE_DEVICE_DISCONNECTED</td><td>The remote device is got disconnected from mobile device.</td></tr>
<tr><td>UPDATE_FILE_SIGNATURE_ERROR</td><td>The update file signature is not valid.</td></tr>
<tr><td>REMOTE_DEVICE_TIME_OUT_ERROR</td><td>Remote device timed out during update process. Try again</td></tr>
<tr><td>AUTHENTICATION_FAILED</td><td>Remote device failed to authenticate with mobile device.</td></tr>
<tr><td>COMMUNICATION_ERROR</td><td>Error occurred during communication with the remote device.</td></tr>
<tr><td>INCOMPLETE_UPDATE_FILE</td><td>The update file is incomplete or incorrect.</td></tr>
<tr><td>UPDATE_FILE_TOO_LARGE</td><td>The update file passed is too large for remote device to update.</td></tr>
<tr><td>DOWNLOAD_TIMEOUT</td><td>The download file request on payment device is timed out.</td></tr>
<tr><td>BLUETOOTH_OFF</td><td>Bluetooth is OFF on host mobile device.</td></tr>
<tr><td>FILE_VERIFICATION_FAILED</td><td>The download file format is not valid.</td></tr>
</tbody></table>

<h2 id="usecaseswithsamplexml" class="anchor"><a class="heading-anchor" href="#usecaseswithsamplexml"><span></span></a>Use Cases with Sample XML</h2>

<p>This document lists XML format for only few use cases and it does not
shows all the possible combinations.</p>

<h3 id="querypd40firmwareapplicationversion" class="anchor"><a class="heading-anchor" href="#querypd40firmwareapplicationversion"><span></span></a>Query PD40 Firmware/Application Version</h3>

<p>The application should be able to query the payment device
firmware/application versions.</p>

<h3 id="case1querysinglepaymentdeviceversion" class="anchor"><a class="heading-anchor" href="#case1querysinglepaymentdeviceversion"><span></span></a>Case 1: Query single payment device version</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm-query name =“Version”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm name =“Version” value=”F1.09_A1.2.0”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case2querymultiplepaymentdevicesversion" class="anchor"><a class="heading-anchor" href="#case2querymultiplepaymentdevicesversion"><span></span></a>Case 2: Query multiple payment devices version</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress”
value=“MPOS-12345000|MPOS-123457865”/&gt;
&lt;parm-query name =“Version”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress”
value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name =“Version” value=”F1.09_A1.2.0|F1.09_A1.1.9”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case3queryallpairedpaymentdevicesversion" class="anchor"><a class="heading-anchor" href="#case3queryallpairedpaymentdevicesversion"><span></span></a>Case 3: Query all paired payment devices version</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm-query name =“Version”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress”
value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name =“Version” value=”F1.09_A1.2.0|F1.09_A1.1.9”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="querypd40batterylevel" class="anchor"><a class="heading-anchor" href="#querypd40batterylevel"><span></span></a>Query PD40 Battery Level</h3>

<p>The application should be able to query the payment device battery
level.</p>

<h3 id="case1querysinglepaymentdevicebatterylevel" class="anchor"><a class="heading-anchor" href="#case1querysinglepaymentdevicebatterylevel"><span></span></a>Case 1: Query single payment device battery level</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm-query name =“BatteryLevel”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm name =“BatteryLevel” value=”2”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case2querymultiplepaymentdevicesbatterylevel" class="anchor"><a class="heading-anchor" href="#case2querymultiplepaymentdevicesbatterylevel"><span></span></a>Case 2: Query multiple payment devices battery level</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress”
value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm-query name =“BatteryLevel”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name =“BatteryLevel” value=”1|4”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case3queryallpairedpaymentdeviceslevels" class="anchor"><a class="heading-anchor" href="#case3queryallpairedpaymentdeviceslevels"><span></span></a>Case 3: Query all paired payment devices levels</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt; parm-query name =“BatteryLevel”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt; parm name =“ BatteryLevel” value=”1|4”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="updatingpd40paymentdevicefirmware" class="anchor"><a class="heading-anchor" href="#updatingpd40paymentdevicefirmware"><span></span></a>Updating PD40 Payment Device Firmware</h3>

<p>The application should be able to update the payment device firmware.</p>

<h3 id="case1updatingsinglepaymentdevicefirmware" class="anchor"><a class="heading-anchor" href="#case1updatingsinglepaymentdevicefirmware"><span></span></a>Case 1: Updating single payment device firmware</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.0.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000”/&gt;
&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.0.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case2updatingmultiplepaymentdeviceswithsamefirmware" class="anchor"><a class="heading-anchor" href="#case2updatingmultiplepaymentdeviceswithsamefirmware"><span></span></a>Case 2: Updating multiple payment devices with same firmware.</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case3updatingallpairedpaymentdeviceswithsamefirmware" class="anchor"><a class="heading-anchor" href="#case3updatingallpairedpaymentdeviceswithsamefirmware"><span></span></a>Case 3: Updating all paired payment devices with same firmware</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="case4updatingmultiplepaymentdeviceswithdifferentfirmware" class="anchor"><a class="heading-anchor" href="#case4updatingmultiplepaymentdeviceswithdifferentfirmware"><span></span></a>Case 4: Updating multiple payment devices with different firmware.</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.0.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.0.bin”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="combinationofqueryandfirmwareupdate" class="anchor"><a class="heading-anchor" href="#combinationofqueryandfirmwareupdate"><span></span></a>Combination of Query and Firmware Update</h3>

<p><strong>Input XML</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress”
value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345002|MPOS-123457822”/&gt;

&lt;parm-query name =“Version”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<p><strong>Response XML (Success Case)</strong></p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345000|MPOS-123457865”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A1.2.1.bin”/&gt;

&lt;/characteristic&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345002|MPOS-123457822”/&gt;

&lt;parm name =“Version” value=”F1.09_A1.2.0| F1.09_A1.1.9”/&gt;

&lt;/characteristic&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h2 id="errorresponsexmlsamples" class="anchor"><a class="heading-anchor" href="#errorresponsexmlsamples"><span></span></a>Error Response XML Samples</h2>

<h3 id="example1" class="anchor"><a class="heading-anchor" href="#example1"><span></span></a>Example 1:</h3>

<p>The response for the profile input XML with</p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;! --Success Node - -&gt;

&lt;characteristic type=“PaymentMgr” version="0.1" &gt;

&lt; parm name =“DeviceAddress” value=“11:22:33:44:55:66”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic&gt;

&lt;! –Update failed Node - -&gt;

&lt;characteristic-error type=“PaymentMgr” version="0.1"
desc=“REMOTE_DEVICE_NOT_PAIRED:Bluetooth remote device is not
paired with mobile device.”&gt;

&lt; parm name =“DeviceAddress” value=“MPOS-12345678”/&gt;

&lt;parm name=“DownloadType” value=“FIRMWARE”/&gt;

&lt;parm name=“DownloadFile”
value=“/sdcard/D180_F1.07_A1.1.6.bin”/&gt;

&lt;/characteristic-error&gt;

&lt;! –Invalid parameter Node -&gt;

&lt;characteristic-error type=“PaymentMgr” version="0.1” desc=“INVALID_VALUE: The download type is missing”&gt;

&lt; parm name =“DeviceAddress” value=“ MPOS-12345123”&gt;

&lt;parm -error name=“DownloadType” value=“” desc =“INVALID_VALUE:The download type is missing”/&gt;

&lt;parm name=“DownloadFile” value=“/sdcard/D180_F1.07_A10.5.0.bin”/&gt;

&lt;/characteristic-error&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="example2" class="anchor"><a class="heading-anchor" href="#example2"><span></span></a>Example 2:</h3>

<p>The payment mgr response XML sample with two device successes and one
device error for the version query.</p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;wap-provisioningdoc&gt;

&lt;! –Combination of success and error cases-&gt;

&lt;characteristic-error type=“PaymentMgr” version="0.1"

desc=“SUCCESS|FAILED_CONNECT_TO_REMOTE_DEVICE:Failed to establish Bluetooth connection with remote device|SUCCESS”&gt;

&lt;parm name =“DeviceAddress” value=“MPOS-12345678|MPOS-12000002|MPOS-12300001”&gt;

&lt;parm name=“Version” value=“F1.07_A1.1.6||F1.07_A1.2.0/&gt;

&lt;/characteristic-error&gt;

&lt;/wap-provisioningdoc&gt;
</code></pre><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        © 2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>