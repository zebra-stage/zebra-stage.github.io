
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="SerialComm Programmer's Guide">
    <title>SerialComm Programmer's Guide - Zebra Technologies TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TECHDOCS</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 6.7
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/6-7/guide/about">
                                    Home
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/gettingstarted">
                                    Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>SerialComm Programmer's Guide</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="serialcomm-programmers-guide" class="anchor"><a class="heading-anchor" href="#serialcomm-programmers-guide"><span></span></a>SerialComm Programmer's Guide</h1>
                                    <p>
                                            EMDK For Android
                                            6.7
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>The <code>serialCommManager</code> is the primary object created by the <code>SerialCommManager</code> class. It is used to communicate with remote devices through a serial or USB port on the mobile device.</p>

<hr>

<h3 id="getserialcommmanager" class="anchor"><a class="heading-anchor" href="#getserialcommmanager"><span></span></a>Get SerialCommManager</h3>

<p>An EMDK app must be opened before getting the <code>serialCommManager</code> object and must release the <code>SerialCommManager</code> class before quitting.</p>

<p>To get the <code>SerialCommManager</code>:</p>

<pre class="prettyprint"><code>
serialCommManager = (SerialCommManager) this.emdkManager.getInstance(FEATURE_TYPE.SERIALCOMM_EX);
//
// FEATURE_TYPE.SERIALCOMM method is deprecated - use FEATURE_TYPE.SERIALCOMM_EX instead
//
</code></pre>

<p>If serial communication is not supported in a device, a <code>getInstance()</code> call will return null. Before making any calls that use <code>SerialCommManager</code>, check to whether it is null: </p>

<pre class="prettyprint"><code>
if (serialCommManager != null) {
    //..
}
</code></pre>

<hr>

<h3 id="getserialcommport" class="anchor"><a class="heading-anchor" href="#getserialcommport"><span></span></a>Get SerialComm/Port</h3>

<p>An app can get a <code>SerialComm</code> port object by enumerating the <code>SerialPortInfo</code>. </p>

<p>First use the <code>SerialCommManager.getSupportedPorts()</code> first and pass one of the received <code>SerialPortInfo</code> objects to <code>SerialCommManager.getPort(SerialPortInfo portInfo)</code>: </p>

<pre class="prettyprint"><code>
List&lt;SerialPortInfo&gt; serialPorts = serialCommManager.getSupportedPorts();
serialComm = serialCommManager.getPort(serialPorts.get(0));
</code></pre>

<p><strong>Support Notes</strong>: </p>

<ul>
<li><strong>TC70/TC75</strong> devices enumerate only one port. </li>

<li><strong>VC80X</strong> devices enumerate two or more ports.</li>
</ul>

<hr>

<h3 id="useserialcommport" class="anchor"><a class="heading-anchor" href="#useserialcommport"><span></span></a>Use SerialComm/Port</h3>

<p>To use a SerialComm port, the port must first be enabled and opened in a session with the hardware. Zebra also recommends disabling the port when communications are concluded.</p>

<h4 id="writingdata" class="anchor"><a class="heading-anchor" href="#writingdata"><span></span></a>Writing Data</h4>

<pre class="prettyprint"><code>
String writeData = "Text to write";
int bytesWritten = serialComm.write(writeData.getBytes(), writeData.getBytes().length);
</code></pre>

<p>The <code>SerialComm.Write()</code> method writes a specified number of bytes from the buffer to the open communication channel. This method returns the numbers bytes written. An exception will be thrown in the event of any errors (see notes below). </p>

<p><strong>Notes</strong>: </p>

<ul>
<li><strong>Can write no more than 4096 bytes at a time. -</strong> Attempts to pass more will result in an error.</li>

<li><strong>Synchronous method -</strong> could potentially block the application's main thread depending on the time it takes to send the data to the remote device. </li>
</ul>

<h4 id="readingdata" class="anchor"><a class="heading-anchor" href="#readingdata"><span></span></a>Reading Data</h4>

<pre class="prettyprint"><code>
byte[] readBuffer = serialComm.read(10000); //Timeout after 10 seconds
</code></pre>

<p>The <code>SerialComm.Read()</code> method reads the available data and returns it immediately. If no data is available, it waits until a timeout occurs and returns null if no data is available. An exception will be thrown in the event of any errors (see notes below).</p>

<p><strong>Notes</strong>:</p>

<ul>
<li><strong>App must handshake with remote-device client -</strong> to avoid the data loss.</li>

<li><strong>Can receive no more than 4096 bytes at a time. -</strong> All data will be lost if read buffer is greater than 4096 bytes when data arrives from remote-device client.</li>

<li><strong>Synchronous method -</strong> could potentially block the application's main thread depending on the read timeout, leading to an "application not responding" state. The application should call this method on a separate thread to avoid ANR problems.</li>
</ul>

<hr>

<h3 id="getsetconfig" class="anchor"><a class="heading-anchor" href="#getsetconfig"><span></span></a>Get/Set Config</h3>

<p><strong>Note</strong>: TC70/TC75 devices running Lollipop and Marshmallow do not support <code>getConfig</code> or <code>setConfig</code> functions. </p>

<h4 id="getconfig" class="anchor"><a class="heading-anchor" href="#getconfig"><span></span></a>Get Config</h4>

<p>Get the current configuration settings of the <code>SerialComm</code> channel: </p>

<pre class="prettyprint"><code>
SerialCommConfig config = serialComm.getConfig();
</code></pre>

<p>If modifications are made to the returned <code>SerialCommConfig</code> object, the <code>SerialComm.setConfig(SerialCommConfig)</code> must be called for changes to take effect.</p>

<p>The <code>SerialComm</code> object must be enabled before calling <code>getConfig()</code> and <code>setConfig()</code> methods.</p>

<h4 id="setconfig" class="anchor"><a class="heading-anchor" href="#setconfig"><span></span></a>Set Config</h4>

<p>Set the <code>SerialComm</code> settings for the currently selected port: </p>

<pre class="prettyprint"><code>
//Get the supported configuration for the serial port:
SerialCommConfig config = serialComm.getConfig(); 
config.baudRate = SerialCommConfig.BaudRates.BR_9600; //Set baud rate
config.dataBit = SerialCommConfig.DataBits.EIGHT; //Set dataBit
config.parity = SerialCommConfig.ParityBits.EVEN; //Set parity
config.stopBit = SerialCommConfig.StopBits.ONE; //Set stopBit
config.flowControlMode = SerialCommConfig.FlowControlMode.RTS_CTS; //Set flow control
serialComm.setConfig(config); // Save the configuration for the port
</code></pre>

<p>If the given value is not supported or is invalid, an exception will be thrown with an error code and failure description. The <code>SerialComm</code> object must be enabled before calling <code>getConfig()</code> and <code>setConfig()</code> methods.</p>

<hr>

<h3 id="signalstate" class="anchor"><a class="heading-anchor" href="#signalstate"><span></span></a>Signal State</h3>

<p><strong>Note: Some BSPs do not support this function</strong>. </p>

<h4 id="getsignalstate" class="anchor"><a class="heading-anchor" href="#getsignalstate"><span></span></a>Get Signal State</h4>

<p>Use this method to query the signal status of DTR, DCD, DSR, RI, RTS and CTS: </p>

<pre class="prettyprint"><code>
boolean signalState = serialComm.getSignalState(SerialComm.ControlSignal.DTR);
</code></pre>

<h4 id="setsignalstate" class="anchor"><a class="heading-anchor" href="#setsignalstate"><span></span></a>Set Signal State</h4>

<p>This method allows the application to set the status of control signal. </p>

<pre class="prettyprint"><code>
boolean signalState = serialComm.getSignalState(SerialComm.ControlSignal.DTR);
serialComm.setSignalState(SerialComm.ControlSignal.DTR, signalState);
</code></pre>

<p><strong>Supports setting of RTS and DTR only</strong>. Attempts to set other signaling states will return a "read only" error message.</p>

<hr>

<h2 id="samplecode" class="anchor"><a class="heading-anchor" href="#samplecode"><span></span></a>Sample Code</h2>

<p>The code below demonstrates how to get the <code>SerialCommManager</code> object, enumerate, get, configure and write to a serial port, and to disable it when the app is finished using it.  </p>

<pre class="prettyprint"><code>    
public class MainActivity extends Activity implements EMDKListener {
    SerialComm serialComm;
    SerialCommManager serialCommManager;
    EMDKManager emdkManager;
    private String TAG = MainActivity.class.getSimpleName();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //
        // Get the EMDK manager:
        EMDKResults results = EMDKManager.getEMDKManager(getApplicationContext(), this); 
    }
    @Override
    public void onOpened(EMDKManager emdkManager) {
        this.emdkManager = emdkManager;
        Log.d(TAG, "EMDK Opened and ready to use.");
        //
        // Get the serialCommManager instance:
        serialCommManager = (SerialCommManager) this.emdkManager.getInstance(FEATURE_TYPE.SERIALCOMM_EX); 
        try {
            //...
            // Note: For most devices, this method (below) will return only one port.
            // On the VC80, this could return two or more ports.
            //
            // Get the list of supported ports on the device. 
            List&lt;SerialPortInfo&gt; serialPorts = serialCommManager.getSupportedPorts();
            //
            // Get the serialComm/port object by passing a SerialPortInfo object:
            serialComm = serialCommManager.getPort(serialPorts.get(0)); 
            //...
            //
            // Enable the serial port:
            serialComm.enable(); 
            //
            // Get the supported configuration for the serial port:
            SerialCommConfig config = serialComm.getConfig(); 
            config.baudRate = SerialCommConfig.BaudRates.BR_9600; // Set baud rate
            config.dataBit = SerialCommConfig.DataBits.EIGHT; // Set dataBit
            config.parity = SerialCommConfig.ParityBits.EVEN; // Set parity
            config.stopBit = SerialCommConfig.StopBits.ONE; // Set stopBit
            config.flowControlMode = SerialCommConfig.FlowControlMode.RTS_CTS; // Set flow control
            serialComm.setConfig(config); // Set the configuration for the port

            //...
            String writeData = "Text to write";
            //
            // Write the data in writeData object to serial port:
            int bytesWritten = serialComm.write(writeData.getBytes(), writeData.getBytes().length); 
            //...
            //
            // Disable the serial port after using:
            serialComm.disable(); 
            //...
            //
            // Release the serialCommManager after using:
            emdkManager.release(FEATURE_TYPE.SERIALCOMM_EX);
        }
        catch (Exception ex)
        {
        }
    }
    @Override
    public void onDestroy() {
        if(this.emdkManager != null) {
            this.emdkManager.release();
            this.emdkManager = null;
        }
        super.onDestroy();
    }
    @Override
    public void onClosed() {
        if(this.emdkManager != null) {
            this.emdkManager.release();
        }
        Log.d(TAG, "EMDK closed");
    }
}
</code></pre><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        © 2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>