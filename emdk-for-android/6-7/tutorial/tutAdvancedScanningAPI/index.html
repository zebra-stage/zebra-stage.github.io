
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Advanced Scanning Tutorial using Barcode API">
    <title>Advanced Scanning Tutorial using Barcode API - Zebra Technologies TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TECHDOCS</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 6.7
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/6-7/guide/about">
                                    Home
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/gettingstarted">
                                    Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-7/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Advanced Scanning Tutorial using Barcode API</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="advanced-scanning-tutorial-using-barcode-api" class="anchor"><a class="heading-anchor" href="#advanced-scanning-tutorial-using-barcode-api"><span></span></a>Advanced Scanning Tutorial using Barcode API</h1>
                                    <p>
                                            EMDK For Android
                                            6.7
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This guide will walk you through creating an EMDK For Android application that will use <a href="/emdk-for-android/6-7/api">Barcode/Scanning APIs</a> introduced in EMDK V 3.0, to perform some of the additional options along with Scanning operations on your Symbol Android devices without using Profile Wizard. The API uses <a href="/emdk-for-android/6-7/api/barcode/BarcodeManager">Barcode Manager</a>, which is the primary object to access barcode scanning feature. </p>

<p>In this tutorial, we will explore the <a href="/emdk-for-android/6-7/api/barcode">Barcode/Scanning API</a> by using some of its features for developing an advanced application that will scan barcodes. The application focuses on scanning the barcodes using soft scan trigger, which would be a button that we are going to use in the application itself and not the hard scan trigger on the device.</p>

<blockquote>
  <p>Note: You don't need the Profile Wizard while using the Barcode/Scanning APIs as everything could be configured programmatically through code.</p>
</blockquote>

<p>We will be configuring following features:</p>

<ul>
<li><p><strong>Device Types:</strong>
Using this feature, we will get the scanning devices supported by a specific Symbol device (Ex. Serial SSI Scanner, Camera Scanner etc.)</p></li>

<li><p><strong><a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-DecoderParams">Decoder Params</a>:</strong>
This feature will be used to configure various types of decoders through our applications for scanning specific type of decoder scanner. (Ex. Code 11, Code 39, UPCA etc.)</p></li>

<li><p><strong><a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ReaderParams">Reader Params</a>:</strong>
Reader params are used to configure reader specific options of a particular scanning device. In this tutorial, we will configure Illumination Mode for "Camera Scanner".</p></li>
</ul>

<blockquote>
  <p>Note: "Illumination Mode" is available only for Camera Scanner device.</p>
</blockquote>

<ul>
<li><strong><a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ScanParams">Scan Params</a>:</strong>
ScanParams class provides access to scanning parameters that are available for all decoders.
In this tutorial we will configure following Scanning Params:</li>
</ul>

<ol>
<li>Vibration: This Scan Param is used to configure Vibration of the scanner device when scanning barcodes.</li>

<li>Scan Tone: This Scan Param is used to set Scan tone while scanning barcodes. We can apply various media, notification or alarm tones to the device while scanning barcodes. We can also keep a silent tone by not passing any parameter to this attribute. In this tutorial, we will provide a list of Scan Tones for the user to select including silent mode where we won't pass any parameter to Scan Tone attribute.      </li>
</ol>

<h2 id="creatingtheproject" class="anchor"><a class="heading-anchor" href="#creatingtheproject"><span></span></a>Creating The Project</h2>

<blockquote>
  <p>Note: Provide "AdvancedScanningTutorial" as the project name for this tutorial.</p>
</blockquote>

<p>Create a new project with Android Studio, click <a href="/emdk-for-android/6-7/tutorial/tutCreateProjectAndroidStudio">here</a>.</p>

<h2 id="enablingandroidpermissions" class="anchor"><a class="heading-anchor" href="#enablingandroidpermissions"><span></span></a>Enabling Android Permissions</h2>

<ol>
<li><p>Modify the Application's Manifest.xml to use the EMDK library and to set permission for the EMDK to scan the barcodes.</p>

<p><img src="../../images/AdvancedScanningTutorialImages/manifest_file.jpg" alt="img"></p>

<p>You must first enable permissions for 'com.symbol.emdk.permission.EMDK': </p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK" /&gt; 
</code></pre>

<p>Then you must enable the library for EMDK:  </p>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk" /&gt;
</code></pre>

<p>When done, your manifest.xml should look like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/manifest_permissions_added.jpg" alt="img"> </p></li>
</ol>

<h2 id="addingsomecode" class="anchor"><a class="heading-anchor" href="#addingsomecode"><span></span></a>Adding Some Code</h2>

<ol>
<li><p>Now we will start to add some code. </p>

<p>First you must add references to the libraries:  </p>

<pre class="prettyprint"><code>
import com.symbol.emdk.EMDKManager;
import com.symbol.emdk.EMDKManager.EMDKListener;
import com.symbol.emdk.barcode.ScanDataCollection;
import com.symbol.emdk.barcode.Scanner.DataListener;
import com.symbol.emdk.barcode.Scanner.StatusListener;
import com.symbol.emdk.barcode.StatusData;   
</code></pre>

<p>Then you must extend the activity to implement EMDKListener. </p>

<p>After that you also need to implement <code>StatusListener</code> for notifying client applications to notify scan events. Override its <code>onStatus</code> function.</p>

<p>Implement <code>DataListener</code> for notifying client applications when the scan data is available. Override its <code>onData</code> function.</p>

<p>Finally, we will implement <code>OnCheckedChangeListener</code> that has an overriden method <code>onCheckedChanged</code>, which gets called whenever the user checks or unchecks any checkbox. We will be using checkboxes for various decoders that user can check or uncheck based on the requirement.  </p>

<pre class="prettyprint"><code>
public class MainActivity extends Activity implements EMDKListener,
StatusListener, DataListener, OnCheckedChangeListener {  

<pre><code>.. .. .. .. .. .. ...  
</code></pre>

 @Override
 public void onClosed() {
  // TODO Auto-generated method stub

 }

 @Override
 public void onOpened(EMDKManager arg0) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onData(ScanDataCollection scanDataCollection) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onStatus(StatusData statusData) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
  // TODO Auto-generated method stub

 }  

}
</code></pre>

<blockquote>
  <p>Note: To organize imports in Android Studio, press CTRL+ALT+O or CMD+ALT+O.    </p>
</blockquote>

<p>We will now create some global variables to hold the instance objects of EMDKManager, <a href="/emdk-for-android/6-7/api/barcode/BarcodeManager">BarcodeManager</a> and <a href="/emdk-for-android/6-7/api/barcode/Scanner">Scanner</a>. These variables would be used throughout the code.</p>

<p>It will have some UI elements such as <a href="http://developer.android.com/reference/android/widget/CheckBox.html">Checkboxes</a> to  </p>

<p>We will then add some UI elements starting with a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> to display the status of scanning operation and then <a href="http://developer.android.com/reference/android/widget/EditText.html">EditText</a> to populate scanned barcode data.</p>

<p>We will also declare a boolean variable to call setProfile() method only when required avoiding scanner exceptions while setting profile.</p>

<pre class="prettyprint"><code>
// Declare a variable to store EMDKManager object
private EMDKManager emdkManager = null;

// Declare a variable to store Barcode Manager object
private BarcodeManager barcodeManager = null;

// Declare a variable to hold scanner device to scan
private Scanner scanner = null;

// Button to scan barcodes through the app using soft trigger
private Button scanButton;

// Text view to display status of EMDK and Barcode Scanning Operations
private TextView statusTextView = null;

// Edit Text that is used to display scanned barcode data
private EditText dataView = null;

// CheckBox to set Decoder Param Code 11;
private CheckBox checkBoxCode11;

// CheckBox to set Decoder Param Code 39;
private CheckBox checkBoxCode39;

// CheckBox to set Decoder Param Code 128;
private CheckBox checkBoxCode128;

// CheckBox to set Decoder Param Code UPCA;
private CheckBox checkBoxCodeUPCA;

// CheckBox to set Decoder Param EAN 8;
private CheckBox checkBoxEAN8;

// CheckBox to set Decoder Param EAN 13;
private CheckBox checkBoxEAN13;

// CheckBox to set Reader Param Illumination Mode;
private CheckBox checkBoxIlluminationMode;

// CheckBox to set Scan Param Vibration Mode (decodeHapticFeedback);
private CheckBox checkBoxVibrationMode;

// Drop Down for selecting scanner devices
private Spinner deviceSelectionSpinner;

// Drop Down for selecting the type of streaming on which the scan beep
// should
// be played
private Spinner scanToneSpinner;

// Array Adapter to hold arrays that are used in various drop downs
private ArrayAdapter&lt;String&gt; spinnerDataAdapter;

// List of supported scanner devices
private List&lt;ScannerInfo&gt; deviceList;

// Provides current scanner index in the device Selection Spinner
private int scannerIndex = 0;

// Boolean to avoid calling setProfile() method again in the scan tone
// listener
private boolean isScanToneFirstTime;
</code></pre>

<p>The code till here looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/variables_added.jpg" alt="img"></p>

<p>and the remaining part looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/variables_added_remaining.jpg" alt="img"></p>

<blockquote>
  <p>Note: Due to more variables, it has been divided into multiple screen captures. </p>
</blockquote></li>

<li><p>Now, let us design the simple UI that has fields for each of the features mentioned above starting with <a href="http://developer.android.com/guide/topics/ui/controls/spinner.html">Spinner</a> to display list of scanner devices and scan tones at the bottom. It will then have some <a href="http://developer.android.com/reference/android/widget/CheckBox.html">Checkboxes</a> to display decoder params, reader params and scan params for scanner. We then have a <a href="http://developer.android.com/reference/android/widget/Button.html">Button</a> that would be set as a soft trigger in the app to scan barcodes later in this tutorial as we are not using the hard scan trigger of the device. Finally the screen has a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> to display the status of scanning operation and above that an <a href="http://developer.android.com/reference/android/widget/EditText.html">EditText</a> to populate scanned barcode data. Since the UI has lots of elements, we need to embed it in a <a href="http://developer.android.com/reference/android/widget/ScrollView.html">ScrollView</a> to view all the UI elements.</p>

<p>So, remove all the code, inside "res/layout/activity_main.xml" and add following XML layout code for UI.</p>

<pre class="prettyprint"><code>
&lt;ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingBottom="5dip" &gt;

<pre><code>&amp;lt;RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" &amp;gt;

    &amp;lt;TextView
        android:id="@+id/device_Selection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:text="Select Scanner Device Type:"
        android:textSize="16sp"
        android:textStyle="bold" /&amp;gt;

    &amp;lt;Spinner
        android:id="@+id/device_selection_spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/device_Selection"
        android:layout_margin="5dip" /&amp;gt;

    &amp;lt;TextView
        android:id="@+id/decoder_selection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/device_selection_spinner"
        android:layout_margin="5dip"
        android:text="Select Decoder Params:"
        android:textSize="16sp"
        android:textStyle="bold" /&amp;gt;

    &amp;lt;RelativeLayout
        android:id="@+id/decoder_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/decoder_selection"
        android:layout_margin="5dip" &amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxCode39"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_margin="3dip"
            android:checked="true"
            android:text="Code 39"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxCode128"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="3dip"
            android:layout_toRightOf="@+id/checkBoxCode39"
            android:checked="true"
            android:text="Code 128"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxUPCA"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="3dip"
            android:layout_toRightOf="@+id/checkBoxCode128"
            android:checked="true"
            android:text="UPCA"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxCode11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/checkBoxCode39"
            android:layout_margin="3dip"
            android:checked="true"
            android:text="Code 11"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxEan8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/checkBoxCode128"
            android:layout_margin="3dip"
            android:layout_toRightOf="@+id/checkBoxCode11"
            android:checked="true"
            android:text="EAN 8"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/checkBoxEan13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/checkBoxUPCA"
            android:layout_marginLeft="25dip"
            android:layout_marginTop="3dip"
            android:layout_toRightOf="@+id/checkBoxEan8"
            android:checked="true"
            android:text="EAN 13"
            android:textSize="14sp" /&amp;gt;
    &amp;lt;/RelativeLayout&amp;gt;

    &amp;lt;TextView
        android:id="@+id/reader_selection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/decoder_layout"
        android:layout_margin="5dip"
        android:text="Select Reader Params:"
        android:textSize="16sp"
        android:textStyle="bold" /&amp;gt;

    &amp;lt;CheckBox
        android:id="@+id/illumination"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/reader_selection"
        android:layout_margin="3dip"
        android:checked="false"
        android:text="Illumination Mode"
        android:textSize="14sp" /&amp;gt;

    &amp;lt;TextView
        android:id="@+id/scan_selection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/illumination"
        android:layout_margin="5dip"
        android:text="Select Scan Params:"
        android:textSize="16sp"
        android:textStyle="bold" /&amp;gt;

    &amp;lt;RelativeLayout
        android:id="@+id/scan_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/scan_selection"
        android:layout_margin="5dip" &amp;gt;

        &amp;lt;CheckBox
            android:id="@+id/vibration"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_margin="3dip"
            android:checked="false"
            android:text="Vibration"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;TextView
            android:id="@+id/scan_tone"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/vibration"
            android:layout_margin="5dip"
            android:text="Select Scan Tone:"
            android:textSize="14sp" /&amp;gt;

        &amp;lt;Spinner
            android:id="@+id/scan_tone_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/scan_tone"
            android:layout_margin="5dip" /&amp;gt;
    &amp;lt;/RelativeLayout&amp;gt;

    &amp;lt;Button
        android:id="@+id/btn_scan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/scan_layout"
        android:layout_centerHorizontal="true"
        android:layout_margin="5dip"
        android:text="Scan" /&amp;gt;

    &amp;lt;EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btn_scan"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:fadeScrollbars="true"
        android:focusableInTouchMode="false"
        android:inputType="none|textMultiLine" /&amp;gt;

    &amp;lt;TextView
        android:id="@+id/textViewStatusTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:text="Status:" /&amp;gt;

    &amp;lt;TextView
        android:id="@+id/textViewStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textViewStatusTitle"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dip"
        android:text="" /&amp;gt;
&amp;lt;/RelativeLayout&amp;gt;
</code></pre>

&lt;/ScrollView&gt;
</code></pre>

<p>The code till here looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/ui_layout.jpg" alt="img">      </p></li>

<li><p>In the <code>onCreate</code> method, we take reference of UI elements that are declared in <code>res/layout/activity_main.xml</code> in order to use them in our <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a>. We would then set <code>OnCheckedChangeListener</code> for all the checkboxes followed by <code>setOnTouchListener</code> for the "Scan" button that we have declared in UI.</p>

<p>We will also set the Spinner Adapter to hold the list of Scanner devices and Scan Tones followed by the listener calls for both spinners.    </p>

<p>We then call getEMDKManager so that the EMDK can be initialized and checked to see if it is ready. </p>

<pre class="prettyprint"><code>
// Reference to UI elements
statusTextView = (TextView) findViewById(R.id.textViewStatus);
dataView = (EditText) findViewById(R.id.editText1);
checkBoxCode11 = (CheckBox) findViewById(R.id.checkBoxCode11);
checkBoxCode39 = (CheckBox) findViewById(R.id.checkBoxCode39);
checkBoxCode128 = (CheckBox) findViewById(R.id.checkBoxCode128);
checkBoxCodeUPCA = (CheckBox) findViewById(R.id.checkBoxUPCA);
checkBoxEAN8 = (CheckBox) findViewById(R.id.checkBoxEan8);
checkBoxEAN13 = (CheckBox) findViewById(R.id.checkBoxEan13);

checkBoxIlluminationMode = (CheckBox) findViewById(R.id.illumination);
checkBoxVibrationMode = (CheckBox) findViewById(R.id.vibration);

checkBoxCode11.setOnCheckedChangeListener(this);
checkBoxCode39.setOnCheckedChangeListener(this);
checkBoxCode128.setOnCheckedChangeListener(this);
checkBoxCodeUPCA.setOnCheckedChangeListener(this);
checkBoxEAN8.setOnCheckedChangeListener(this);
checkBoxEAN13.setOnCheckedChangeListener(this);
checkBoxIlluminationMode.setOnCheckedChangeListener(this);
checkBoxVibrationMode.setOnCheckedChangeListener(this);

deviceSelectionSpinner = (Spinner) findViewById(R.id.device_selection_spinner);
scanToneSpinner = (Spinner) findViewById(R.id.scan_tone_spinner);

// Adapter to hold the list of scan tone options
spinnerDataAdapter = new ArrayAdapter&lt;String&gt;(this,
        android.R.layout.simple_spinner_item, getResources()
                .getStringArray(R.array.scan_tone_array));
spinnerDataAdapter
        .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Set adapter to scan tone drop down
scanToneSpinner.setAdapter(spinnerDataAdapter);

// Add onClick listener for scan button to enable soft scan through app
addScanButtonListener();

// On Item Click Listener of Scanner Devices Spinner
addSpinnerScannerDevicesListener();

// On Item Click Listener of Scan Tone Spinner
addSpinnerScanToneListener();

// The EMDKManager object will be created and returned in the callback.
EMDKResults results = EMDKManager.getEMDKManager(
        getApplicationContext(), this);
// Check the return status of getEMDKManager and update the status Text
// View accordingly
if (results.statusCode != EMDKResults.STATUS_CODE.SUCCESS) {
    statusTextView.setText("EMDKManager Request Failed");
}
</code></pre>

<p>So the complete <code>onCreate</code> method looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_create_added.jpg" alt="img"></p></li>

<li><p>You will see some errors, which we need to get rid of. So first, we need to provide <code>scan_tone_array</code> to the spinner data adapter. So create <code>arrays.xml</code> file under <code>res/values</code> folder and write following code of array in <code>&lt;resources&gt;</code> tag. This will remove the adapter error.</p>

<pre class="prettyprint"><code>
&lt;!-- Array of type of streaming on which the scan beep should be played --&gt;
&lt;string-array name="scan_tone_array"&gt;
  &lt;item&gt;NONE (Silent Mode)&lt;/item&gt;
  &lt;item&gt;Adara.ogg&lt;/item&gt;
  &lt;item&gt;Antimony.ogg&lt;/item&gt;
  &lt;item&gt;Xenon.ogg&lt;/item&gt;
  &lt;item&gt;Vega.ogg&lt;/item&gt;
  &lt;item&gt;decode-short.wav&lt;/item&gt;
  &lt;item&gt;decode.wav&lt;/item&gt;
&lt;/string-array&gt;
</code></pre>

<p>So the complete <code>arrays.xml</code> code looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/arrays_code.jpg" alt="img"></p></li>

<li><p>Next, We need to add listeners for <code>Scanner Devices</code> and <code>Scan Tone</code> spinners. The listener for scanner devices spinner will disable the scanner if there is any using <code>deInitScanner</code> method and create new scanner instance of scanner device selected from this spinner with the help of index stored in <code>scannerIndex</code> using <code>initializeScanner</code> method. It will then call <code>setProfile</code> method which will set whatever the parameters are enabled in the User interface for various features.</p>

<blockquote>
  <p>Note: We need to re-initialize the scanner and set the properties as we change the device type.</p>
</blockquote>

<p>The listener for scan tone will simply call <code>setProfile</code> method, which will set the parameters selected by user on the User Interface.</p>

<blockquote>
  <p>Note: For scan tone spinner listener, we don't need to re-initialize scanner as we are not changing scanner device.</p>
</blockquote>

<pre class="prettyprint"><code>
// Listener for Scanner Device Spinner
private void addSpinnerScannerDevicesListener() {

 deviceSelectionSpinner
            .setOnItemSelectedListener(new OnItemSelectedListener() {

<pre><code>    @Override
    public void onItemSelected(AdapterView&amp;lt;?&amp;gt; parent,
                    View arg1, int position, long arg3) {

        scannerIndex = position;
        try {
            deInitScanner();
            initializeScanner();
            setProfile();
        } catch (ScannerException e) {
                    e.printStackTrace();
        }
    }

    @Override
    public void onNothingSelected(AdapterView&amp;lt;?&amp;gt; arg0) {
        // TODO Auto-generated method stub
    }
});
</code></pre>

}

// Listener for Scan Tone Spinner
private void addSpinnerScanToneListener() {

<pre><code>scanToneSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView&amp;lt;?&amp;gt; parent, View arg1,
            int position, long arg3) {

        // Ignore Scan Tone spinner firing of for the first time, which
        // is not required
        if (isScanToneFirstTime)
            setProfile();
        else
            isScanToneFirstTime = true;
    }

    @Override
    public void onNothingSelected(AdapterView&amp;lt;?&amp;gt; arg0) {
        // TODO Auto-generated method stub
    }
});
</code></pre>

}
</code></pre>

<blockquote>
  <p>Note: The purpose of <code>isScanToneFirstTime</code> boolean is to simply avoid calling <code>setProfile</code> again in the scan tone spinner initially, as it has already been set in the device spinner.  </p>
</blockquote>

<p>This is how it looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/device_and_tone_listeners.jpg" alt="img"></p>

<p><img src="../../images/AdvancedScanningTutorialImages/device_and_tone_listeners_1.jpg" alt="img"></p></li>

<li><p>We will now add the <code>setOnTouchListener</code> for Scan button. The purpose behind this is to scan barcodes by calling <code>read</code> method when user presses the Scan button and stop scanning by canceling any pending asynchronous read calls using <code>cancelRead</code> method when user releases the Scan button. The <code>read</code> method will not turn ON the scanner. It will, however, put the scanner in a state in which the scanner can be turned ON either by pressing a hardware trigger or can be turned ON automatically. This is determined by the <code>Scanner.TriggerType</code>. In order to scan barcodes using button through our application, we need to set the trigger type to <code>TriggerType.SOFT_ONCE</code> where the scan beam will come up automatically without having to press the hard scan trigger on the device after issuing the read call.</p>

<pre class="prettyprint"><code>
// Listener for scan button that uses soft scan to scan barcodes through app
private void addScanButtonListener() {
    Button scanButton = (Button) findViewById(R.id.btn_scan);
    // On Touch listener for scan button that scans barcodes when pressed
    // and stops
    // scanning when the button is released
    scanButton.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // Scan Button Press Event
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                try {
                    // Enable Soft scan
                    scanner.triggerType = TriggerType.SOFT_ONCE;
                    // cancel any pending reads before reading barcodes
                    if (scanner.isReadPending())
                        scanner.cancelRead();
                    // Puts the device in a state where it can scan barcodes
                    scanner.read();
                } catch (ScannerException e) {
                    e.printStackTrace();
                }
                // Scan Button Release Event
            } else if (event.getAction() == MotionEvent.ACTION_UP) {
                try {
                    // cancel any pending reads before reading barcodes
                    if (scanner.isReadPending())
                        scanner.cancelRead();
                } catch (ScannerException e) {
                    e.printStackTrace();
                }
            }
            return false;
        }
    });
}
</code></pre>

<p><img src="../../images/AdvancedScanningTutorialImages/scan_touch_listener.jpg" alt="img"> </p></li>

<li><p>It will still show few errors as we have not specified the required methods yet. So first we will add <code>deInitScanner()</code> method that cancels any pending read operations, removes all status and data listeners, disables the existing scanner instance and sets the scanner instance to <code>NULL</code>.</p>

<pre class="prettyprint"><code>
// Disable the scanner instance
private void deInitScanner() {

<pre><code>if (scanner != null) {
    try {
        scanner.cancelRead();

        scanner.removeDataListener(this);
        scanner.removeStatusListener(this);
        scanner.disable();

    } catch (ScannerException e) {
        // TODO Auto-generated catch block
        statusTextView.setText("Status: " + e.getMessage());
    }
    scanner = null;
}
</code></pre>

}
</code></pre>

<p>This is how <code>deInitScanner</code> method looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/de_init_method.jpg" alt="img"></p></li>

<li><p>Next, we will write a method <code>initializeScanner</code> to initialize and enable the scanner and its listeners such as status, data etc. by using <a href="/emdk-for-android/6-7/api/barcode/BarcodeManager">Barcode Manager</a> object. The <code>enable</code> method enables the scanner hardware. This method does not make the scanner to scan or turn on the laser. Basically it will make the scanner device available for your application. If the same of scanner is enabled by other applications, this will throws ScannerExceptions. You must call <code>disable()</code> when you are done the scanning, otherwise it will remain locked and be unavailable to other applications.</p>

<p>In case of any errors, the <code>statusTextView</code> will display a failure message to notify user.</p>

<pre class="prettyprint"><code>
// Method to initialize and enable Scanner and its listeners
private void initializeScanner() throws ScannerException {

<pre><code>if (deviceList.size() != 0) {
    scanner = barcodeManager.getDevice(deviceList.get(scannerIndex));
} else {
    statusTextView
            .setText("Status: "
                    + "Failed to get the specified scanner device! Please close and restart the application.");
}

if (scanner != null) {

    // Add data and status listeners
    scanner.addDataListener(this);
    scanner.addStatusListener(this);

    try {
        // Enable the scanner
        scanner.enable();

    } catch (ScannerException e) {
        // TODO Auto-generated catch block
        statusTextView.setText("Status: " + e.getMessage());
    }
}
</code></pre>

}
</code></pre>

<p>This is how <code>initializeScanner</code> method looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/initialize_scanner_method.jpg" alt="img"></p></li>

<li><p>Now, we will add <code>setProfile</code> method. This method will create an instance of <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig">ScannerConfig</a>, which will allow us to modify scanner properties (Ex. <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-DecoderParams">Decoder Params</a>, <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ReaderParams">Reader Params</a>, <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ScanParams">Scan Params</a> etc.) and set the changes back to the scanner instance. Here, we will read the checkboxes and spinner values and set them accordingly to the scanner instance through <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig">ScannerConfig</a>. <code>config</code> is name of <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig">ScannerConfig</a> instance.</p>

<p>Initially we will cancel any pending asynchronous read calls before applying profile and reading barcodes using <code>cancelRead</code> method on the <code>scanner</code> instance.  </p>

<p><code>config.decoderParams</code> allows us to set all the decoder params such as <code>code11</code>,<code>code39</code> etc. <code>readerParams.readerSpecific.cameraSpecific.illuminationMode</code> enables user to set <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig/#scannerconfigilluminationmode">Illumination Mode</a>, which is available only for CameraSpecific devices. <code>config.scanParams.decodehapticfeedback</code> lets you set <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ScanParams#decodehapticfeedback">Vibration Mode</a> of the scanning device. <code>config.scanParams.decodeAudioFeedbackUri</code> will accept a URI for the <a href="/emdk-for-android/6-7/api/barcode/ScannerConfig-ScanParams/#decodeaudiofeedbackuri">Audio Tone</a> that user needs to set while scanning a barcode.</p>

<blockquote>
  <p>Note: An empty URI (Ex. <code>config.scanParams.decodeAudioFeedbackUri = "";</code>) indicates that there will not be any scan tone while scanning a barcode. In other words, it would be your silent mode.</p>
</blockquote>

<pre class="prettyprint"><code>
// Sets the user selected Barcode scanning Profile
public void setProfile() {
    try {

<pre><code>    // cancel any pending asynchronous read calls before applying profile
    // and start reading barcodes
    if (scanner.isReadPending())
        scanner.cancelRead();

    ScannerConfig config = scanner.getConfig();

    // Set code11
    if (checkBoxCode11.isChecked()) {
        config.decoderParams.code11.enabled = true;
    } else {
        config.decoderParams.code11.enabled = false;
    }

    // Set code39
    if (checkBoxCode39.isChecked()) {
        config.decoderParams.code39.enabled = true;
    } else {
        config.decoderParams.code39.enabled = false;
    }

    // Set code128
    if (checkBoxCode128.isChecked()) {
        config.decoderParams.code128.enabled = true;
    } else {
        config.decoderParams.code128.enabled = false;
    }

    // set codeUPCA
    if (checkBoxCodeUPCA.isChecked()) {
        config.decoderParams.upca.enabled = true;
    } else {
        config.decoderParams.upca.enabled = false;
    }

    // set EAN8
    if (checkBoxEAN8.isChecked()) {
        config.decoderParams.ean8.enabled = true;
    } else {
        config.decoderParams.ean8.enabled = false;
    }

    // set EAN13
    if (checkBoxEAN13.isChecked()) {
        config.decoderParams.ean13.enabled = true;
    } else {
        config.decoderParams.ean13.enabled = false;
    }

    // set Illumination Mode, which is available only for
    // INTERNAL_CAMERA1 device type
    if (checkBoxIlluminationMode.isChecked()
            &amp;amp;&amp;amp; deviceSelectionSpinner.getSelectedItem().toString()
                    .contains("Camera")) {
        config.readerParams.readerSpecific.cameraSpecific.illuminationMode = IlluminationMode.ON;
    } else {
        config.readerParams.readerSpecific.cameraSpecific.illuminationMode = IlluminationMode.OFF;
    }

    // set Vibration Mode (decodeHapticFeedback)
    if (checkBoxVibrationMode.isChecked()) {
        config.scanParams.decodeHapticFeedback = true;
    } else {
        config.scanParams.decodeHapticFeedback = false;
    }

    // Set the Scan Tone selected from the Scan Tone Spinner
    config.scanParams.audioStreamType = AudioStreamType.RINGER;
    String scanTone = scanToneSpinner.getSelectedItem().toString();
    if (scanTone.contains("NONE"))
        // Silent Mode (No scan tone will be played)
        config.scanParams.decodeAudioFeedbackUri = "";
    else
        // Other selected scan tones from the drop-down
        config.scanParams.decodeAudioFeedbackUri = "system/media/audio/notifications/"
                + scanTone;

    scanner.setConfig(config);

    // Starts an asynchronous Scan. The method will not turn
    // ON the
    // scanner. It will, however, put the scanner in a state
    // in which
    // the scanner can be turned ON either by pressing a
    // hardware
    // trigger or can be turned ON automatically.
    scanner.read();

    Toast.makeText(MainActivity.this,
            "Changes Appplied. Press Scan Button to start scanning...",
            Toast.LENGTH_SHORT).show();

} catch (ScannerException e) {
    statusTextView.setText(e.toString());
}
</code></pre>

}  
</code></pre>

<p>The <code>setProfile</code> method looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/set_profile_method.jpg" alt="img">  </p></li>

<li><p>Whenever the user checks or unchecks any checkbox, we update the settings to the scanner instance at runtime by calling <code>setProfile()</code> method through <code>onCheckedChanged</code> method of the <code>OnCheckedChangeListener</code> that we implemented earlier. So add the method call in <code>onCheckedChanged()</code> method.</p>

<pre class="prettyprint"><code>
setProfile();
</code></pre>

<p>This looks like:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_checked_change_method.jpg" alt="img"></p></li>

<li><p>Now we need to use the <code>onOpened</code> method to get a reference to the <a href="/emdk-for-android/6-7/api/core/EMDKManager">EMDKManager</a>. The <a href="/emdk-for-android/6-7/api/core/EMDKManager-EMDKListener">EMDKListener</a> interface will trigger this event when the EMDK is ready to be used. The <a href="/emdk-for-android/6-7/api/core/EMDKManager-EMDKListener">EMDKListener</a> interface must be implemented in order to get a reference to the EMDKManager APIs. This event will pass the EMDKManager instance and we assign it to the global variable <code>emdkManager</code> that we created in the earlier steps. We have used that instance to get an instance of <a href="/emdk-for-android/6-7/api/barcode/BarcodeManager">Barcode Manager</a> to enable scanning.</p>

<p>Once that is done, we need to get all the scanner devices that a Symbol Android device supports with the default one selected first using <code>enumerateScannerDevices()</code> that we will declare in the next step. We are not calling <code>initializeScanner()</code> and <code>setProfile</code> methods here as we have already called them in the device selection spinner listener.</p>

<blockquote>
  <p>Note: 
  Rename the argument of <code>onOpened</code> method from <code>arg0</code> to <code>emdkManager</code> </p>
</blockquote>

<pre class="prettyprint"><code>
this.emdkManager = emdkManager;

// Get the Barcode Manager object
barcodeManager = (BarcodeManager) this.emdkManager
        .getInstance(FEATURE_TYPE.BARCODE);

// Get the supported scanner devices
enumerateScannerDevices();  
</code></pre>

<p>Your complete <code>onOpened</code> method should now look like this:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_opened_method.jpg" alt="img"></p></li>

<li><p>To get rid of error, we will create <code>enumerateScannerDevices</code> that will get all the scanner devices that a Symbol Android device supports with the default one selected first. It uses <code>getSupportedDevicesInfo</code> method on <code>barcodeManager</code> instance that returns a list of supported scanner devices for that particular Symbol device. We will then iterate through this list, get the friendly names of each scanner device and add them to our list with those names to show user in Device Spinner.</p>

<pre class="prettyprint"><code>
// Go through and get the available scanner devices
private void enumerateScannerDevices() {

<pre><code>if (barcodeManager != null) {

    List&amp;lt;String&amp;gt; friendlyNameList = new ArrayList&amp;lt;String&amp;gt;();
    int spinnerIndex = 0;
    // Set the default selection in the spinner
    int defaultIndex = 0;

    deviceList = barcodeManager.getSupportedDevicesInfo();

    if (deviceList.size() != 0) {

        Iterator&amp;lt;ScannerInfo&amp;gt; it = deviceList.iterator();
        while (it.hasNext()) {
            ScannerInfo scnInfo = it.next();
            friendlyNameList.add(scnInfo.getFriendlyName());
            if (scnInfo.isDefaultScanner()) {
                defaultIndex = spinnerIndex;
            }
            ++spinnerIndex;
        }
    } else {
        statusTextView
                .setText("Status: "
                        + "Failed to get the list of supported scanner devices! Please close and restart the application.");
    }

    spinnerDataAdapter = new ArrayAdapter&amp;lt;String&amp;gt;(MainActivity.this,
            android.R.layout.simple_spinner_item, friendlyNameList);
    spinnerDataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    deviceSelectionSpinner.setAdapter(spinnerDataAdapter);
    deviceSelectionSpinner.setSelection(defaultIndex);

}
</code></pre>

}
</code></pre>

<p>Your complete <code>enumerateScannerDevices</code> method should now look like this:</p>

<p><img src="../../images/AdvancedScanningTutorialImages/enumerate_scanner_method.jpg" alt="img"></p></li>

<li><p>As mentioned earlier that whenever a barcode is scanned, its data will be received in a callback <code>onData</code> method upon data availability. So we need to get that data, process it in the format we want and populate in the <a href="http://developer.android.com/reference/android/widget/EditText.html">EditText</a> of UI.</p>

<p>The received data should be processed on a background thread not to block the UI thread. Hence we will use Android's own <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a> to process the scanned data on background thread. So we create AsyncTask <code>AsyncDataUpdate</code> that takes <a href="/emdk-for-android/6-7/api/barcode/ScanDataCollection">ScanDataCollection</a>, which has the scanned data. It then processes this object in <code>doInBackground</code> method to filter the barcode data and label type in strings, which is then passed to the UI thread in <code>onPostExecute</code> method of AsyncTask to Populate.</p>

<pre class="prettyprint"><code>
// Update the scan data on UI
int dataLength = 0;

// AsyncTask that configures the scanned data on background
// thread and updated the result on UI thread with scanned data and type of
// label
private class AsyncDataUpdate extends
    AsyncTask&lt;ScanDataCollection, Void, String&gt; {

  @Override
  protected String doInBackground(ScanDataCollection... params) {
    ScanDataCollection scanDataCollection = params[0];

<pre><code>// Status string that contains both barcode data and type of barcode
// that is being scanned
String statusStr = "";

// The ScanDataCollection object gives scanning result and the
// collection of ScanData. So check the data and its status
if (scanDataCollection != null
        &amp;amp;&amp;amp; scanDataCollection.getResult() == ScannerResults.SUCCESS) {

    ArrayList&amp;lt;ScanData&amp;gt; scanData = scanDataCollection.getScanData();

    // Iterate through scanned data and prepare the statusStr
    for (ScanData data : scanData) {
        // Get the scanned data
        String barcodeDate = data.getData();
        // Get the type of label being scanned
        LabelType labelType = data.getLabelType();
        // Concatenate barcode data and label type
        statusStr = barcodeDate + " " + labelType;
    }
}

// Return result to populate on UI thread
return statusStr;
</code></pre>

  }

  @Override
  protected void onPostExecute(String result) {
    // Update the dataView EditText on UI thread with barcode data and
    // its label type
    if (dataLength++ &gt; 50) {
        // Clear the cache after 50 scans
        dataView.getText().clear();
        dataLength = 0;
    }
    dataView.append(result + "\n");
  }

  @Override
  protected void onPreExecute() {
  }

  @Override
  protected void onProgressUpdate(Void... values) {
  }
}
</code></pre>

<p>We call this AsyncTask in overridden <code>onData</code> method, by creating an instance of <code>AsyncDataUpdate</code> and passing the <code>scanDataCollection</code> for further processing.</p>

<pre class="prettyprint"><code>
// Use the scanned data, process it on background thread using AsyncTask
// and update the UI thread with the scanned results
new AsyncDataUpdate().execute(scanDataCollection);
</code></pre>

<p>So the <code>onData</code> method and <code>AsyncDataUpdate</code> looks like:
<img src="../../images/AdvancedScanningTutorialImages/async_data_update.jpg" alt="img"></p></li>

<li><p>Whether we scan the barcode by pressing the hard scan key or keep it idle, it returns the status of the scanner at specific point of time in the overridden <code>onStatus</code> method of implemented <code>StatusListener</code> interface. Since we are also displaying the status along with barcode data, we will make use of this method and populate the status.</p>

<p>Just like scanned data, we are also processing the scanner status on a background thread. Hence we will create another <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a> named <code>AsyncStatusUpdate</code> that takes <a href="/emdk-for-android/6-7/api/barcode/StatusData">StatusData</a> and processes it in <code>doInBackground</code> method to retrieve state in string format which is populated in status Text View on UI thread in <code>onPostExecute</code> method of the AsyncTask.              </p>

<pre class="prettyprint"><code>
// AsyncTask that configures the current state of scanner on background
// thread and updates the result on UI thread
private class AsyncStatusUpdate extends AsyncTask&lt;StatusData, Void, String&gt; {

  @Override
  protected String doInBackground(StatusData... params) {
    // Get the current state of scanner in background
    StatusData statusData = params[0];
    String statusStr = "";
    ScannerStates state = statusData.getState();
    // Different states of Scanner
    switch (state) {
    // Scanner is IDLE
    case IDLE:
        statusStr = "The scanner enabled and its idle";
        isScanning = false;
        break;
    // Scanner is SCANNING
    case SCANNING:
        statusStr = "Scanning..";
        isScanning = true;
        break;
    // Scanner is waiting for trigger press
    case WAITING:
        statusStr = "Waiting for trigger press..";
        break;
    // Scanner is not enabled
    case DISABLED:
        statusStr = "Scanner is not enabled";
        break;
    default:
        break;
    }
    // Return result to populate on UI thread
    return statusStr;
  }

  @Override
  protected void onPostExecute(String result) {
    // Update the status text view on UI thread with current scanner
    // state
    statusTextView.setText(result);
  }

  @Override
  protected void onPreExecute() {
  }

  @Override
  protected void onProgressUpdate(Void... values) {
  }
}
</code></pre>

<p>We call this AsyncTask in overridden <code>onStatus</code> method, by creating an instance of <code>AsyncStatusUpdate</code> and passing the <code>StatusData</code> for further processing.</p>

<pre class="prettyprint"><code>
// process the scan status event on the background thread using
// AsyncTask and update the UI thread with current scanner state
new AsyncStatusUpdate().execute(statusData);
</code></pre>

<p>So the <code>onStatus</code> method and <code>AsyncStatusUpdate</code> looks like:
<img src="../../images/AdvancedScanningTutorialImages/async_status_update.jpg" alt="img"></p></li>

<li><p>Now let's override the <code>onDestroy</code> method so we can release the EMDKManager and BarcodeManager resources:  </p>

<pre class="prettyprint"><code>
@Override
protected void onDestroy() {
    super.onDestroy();

<pre><code>if (barcodeManager != null)
    barcodeManager = null;

if (emdkManager != null) {

    // Clean up the objects created by EMDK manager
    emdkManager.release();
    emdkManager = null;
}
</code></pre>

} 
</code></pre>

<p>Your <code>onDestroy</code> method should now look like this:  </p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_destroy_method.jpg" alt="img"></p></li>

<li><p>When we are done with scanning, we must release the scanner hardware resources for other applications to use. So override <code>onStop</code> method and disable the scanner by calling <code>deInitScanner</code> method to release it.</p>

<pre class="prettyprint"><code>
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    deInitScanner();
}
</code></pre>

<p>Your <code>onStop</code> method should now look like this:  </p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_stop_method.jpg" alt="img"> </p></li>

<li><p>Finally, Clean up the objects created by EMDK manager in <code>onClosed</code> method, if EMDK closed abruptly.</p>

<pre class="prettyprint"><code>
// The EMDK closed abruptly. // Clean up the objects created by EMDK
// manager
if (this.emdkManager != null) {

<pre><code>this.emdkManager.release();
this.emdkManager = null;
</code></pre>

}
</code></pre>

<p>Your <code>onClosed</code> method should now look like this:  </p>

<p><img src="../../images/AdvancedScanningTutorialImages/on_closed_method.jpg" alt="img"></p></li>
</ol>

<p>That's it!!! We are done with all the coding part that will let us perform some advanced barcode scanning operations on our Symbol Android device using <a href="/emdk-for-android/6-7/api">Barcode/Scanning APIs</a> introduced in EMDK V 3.0. Now let us run the application.</p>

<h2 id="runningtheapplication" class="anchor"><a class="heading-anchor" href="#runningtheapplication"><span></span></a>Running the Application</h2>

<ol>
<li><p>Connect the device (having latest EMDK runtime) to USB port. </p>

<blockquote>
  <p>Note: <br>
  Make sure the device is in USB debug.</p>
</blockquote></li>

<li><p>Run the application.</p>

<p><img src="../../images/AdvancedScanningTutorialImages/home_screen.png" alt="img"></p>

<p>You can see a <a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">Toast</a>, which indicates that the Scanner has been enabled and you can start scanning by pressing hard scan button of the device.</p></li>

<li><p>Now if you press and hold the Scan button on the UI, the status listener in the code starts working and current status of Scanner is displayed in Status <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a>, which is <code>Scanning</code>. The "Scanner Device Type" Spinner shows Serial SSI Scanner as it is the default scanner for Symbol TC55 device. All the decoders are checked, which means current configuration scan supports all of these decoder types. But Scan Tone is <code>NONE</code>, which means there won't be any tone/sound while scanning a barcode.   </p>

<p><img src="../../images/AdvancedScanningTutorialImages/status_scanning.png" alt="img"></p>

<p>The scanner status is always updated on the status text view below the Edit Text at the bottom.</p></li>

<li><p>Lets us change some configurations starting with the device type. We will change it to Camera Scanner.</p>

<p><img src="../../images/AdvancedScanningTutorialImages/device_list.png" alt="img"></p>

<p><img src="../../images/AdvancedScanningTutorialImages/camera_scanner.png" alt="img"></p></li>
</ol>

<p>It will display a success toast when the changes are applied each time you change any scanner configuration just for your knowledge.</p>

<ol>
<li><p>Next check the Vibration checkbox and select some scan tone from the Select Scan Tone spinner.</p>

<p><img src="../../images/AdvancedScanningTutorialImages/tone_list.png" alt="img"></p>

<p><img src="../../images/AdvancedScanningTutorialImages/tone_selected.png" alt="img"></p></li>

<li><p>Now once again scan a barcode and this time it will open your device's camera to scan the barcode.</p>

<p><img src="../../images/AdvancedScanningTutorialImages/camera_opened.png" alt="img"></p>

<p><img src="../../images/AdvancedScanningTutorialImages/final_scan.png" alt="img">  </p>

<p>This is how <a href="/emdk-for-android/6-7/api">Barcode/Scanning APIs</a> introduced in EMDK V 3.0 can be used to perform some of the Advanced Scanning operations using soft scan key through application on your Symbol devices without using Profile Wizard. </p></li>
</ol>

<h2 id="importantprogrammingtips" class="anchor"><a class="heading-anchor" href="#importantprogrammingtips"><span></span></a>Important Programming Tips</h2>

<ol>
<li><p>It is required to do the following changes in the application's <code>AndroidManifest.xml</code>:  </p>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Include the permission for EMDK:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt;
</code></pre>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Use the EMDK library:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre></li>

<li><p>Installing the EMDK for Android application without deploying the EMDK runtime on the Symbol device will fail because of missing shared library on the device.</p></li>

<li><p>Use the DataWedge v1.7.12 or higher version to test the ProfileManager.processProfile() for DataWedge profiles.</p></li>
</ol><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        © 2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>