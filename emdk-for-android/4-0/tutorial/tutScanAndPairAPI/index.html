
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Pairing Remote Device by Scanning its Bluetooth Name or Address using ScanAndPair APIs">
    <title>Pairing Remote Device by Scanning its Bluetooth Name or Address using ScanAndPair APIs - Zebra Technologies Online Documentation</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <span class="navbar-text"><a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:42px;float: inherit;
    padding-right: 3px;"></a> <strong>Online Documentation</strong>
                    <p>
                                        EMDK For Android
                                        4.0
                    </p>
    </span>
                   
                </div>
                
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="/emdk-for-android/4-0/guide/about">
                                    Home
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/guide/gettingstarted">
                                    Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/4-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 ">
                    <!-- <nav id="automenu"   >
                    
                    </nav> -->
                    <nav id="toc" data-spy="affix" data-toggle="toc">
                        <ul class="nav">
                            <li><strong>Pairing Remote Device by Scanning its Bluetooth Name or Address using ScanAndPair APIs</strong></li>
                        </ul>
                    </nav>
                    <!-- <div class="row">
                        <nav class="col-xs-3 bs-docs-sidebar">
                            <ul id="sidebar" class="nav nav-stacked fixed">
                                <li>
                                    <a href="/emdk-for-android/4-0/guide/about">Home</a>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/guide/gettingstarted">Getting Started</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="/emdk-for-android/download">Download</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/setup">EMDK For Android Setup</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/setupDevice">Configuring A Device</a></li>
                                        <li><a href="/emdk-for-android/4-0/tutorial/tutdatacaptureprofile">Build Hello EMDK</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/profile-manager">Using Profile Manager</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/tutorial/">Tutorials</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="">Profile Manager</a></li>
                                        <li><a href="">Platform Intents</a></li>
                                        <li><a href="">Scanning APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/tutorial/tutScanAndPairAPI">ScanAndPair Remote Device</a></li>
                                        <li><a href="/emdk-for-android/4-0/tutorial/tutSimulScanAPI">Document Capture</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/samples">Samples</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="/emdk-for-android/4-0/guide/emdksamples_androidstudio">Importing Samples(Android Studio)</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/emdksamples_eclipse">Importing Samples(Eclipse/ADT)</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/barcode">Barcode Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/data-capture">DataCapture Profile Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/app-manager">AppManager Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/clock">Clock Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/gprs">GPRS Manager Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/power">PowerManager Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/wifi">Wi-Fi Manager Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/bluetooth">Wireless Manager Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/scanandpair">Scan and Pair Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/simulscan">SimulScan Sample</a></li>
                                        <li><a href="/emdk-for-android/4-0/samples/personal-shopper">PersonalShopper Sample</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/guide/programming-guides">Guides</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="/emdk-for-android/4-0/guide/simulscan_guide">SimulScan API</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/name_value_pair">Name-Value Pair</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/personalshopper">PersonalShopper API</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/securenfc">Secure NFC API</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/scanner">Barcode Scanner States</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/payment-api">Payment API</a></li>
                                        <li><a href="/emdk-for-android/4-0/guide/pd40-firmware-update">PD40 Firmware Update</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/guide/profile-manager-guides">Profile Manager</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="/emdk-for-android/4-0/guide/profile-manager/">Using Profile Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx">Profile Features</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/overview">MX Overview</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/choosing-a-version">Choosing a Version</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/compatibility">Feature Compatibility</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/version-on-device">Getting Device MX Version</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/accessmgr">Access Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/analytics/">Analytics Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/appmgr">App Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/audiomgr/">Audio Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/batterymgr/">Battery Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/browsermgr">Browser Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/cameramgr">Camera Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/cellularmgr/">Cellular Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/certmgr">Cert Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/clock/">Clock</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/componentmgr/">Component Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/data-capture">Data Capture</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/devadmin">DevAdmin</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/dhcp">DHCP Options Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/displaymgr/">Display Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/encryptmgr">Encrypt Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/gprsmgr/">GPRS Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/keymappingmgr">KeyMap Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/persistance">Persistance Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/powermgr/">Power Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/powerkeymgr">PowerKey Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/settingsmgr">Settings Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/sdcardmgr">SD Card Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/touchmgr/">Touch Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/threatmgr">Threat Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/usbmgr">USB Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/uimgr">UI Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/wifi/">WiFi Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/wirelessmgr/">Wireless Manager</a></li>
                                        <li><a href="/emdk-for-android/4-0/mx/xml">XML Manager</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/api">APIs</a>
                                    <ul class="nav nav-stacked">
                                        <li><a href="/emdk-for-android/4-0/api/core">Core and ProfileManager APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/barcode">Barcode APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/simulscan">SimulScan APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/personalshopper">Personal Shopper APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/securenfc">Secure NFC APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/payment">Payment APIs</a></li>
                                        <li><a href="/emdk-for-android/4-0/api/serialcomm">Serial Comm APIs</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="/emdk-for-android/4-0/search"></a>
                                </li>
                            </ul>
                        </nav>
                    </div> -->
                    
                    <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        // $(window).load(function() {
                        //     var pathname = window.location.pathname.slice(0, -1);
                        //     // console.log(pathname);
                        //     var menuitem = $('.sidebar-container').find('a[href^="' + pathname + '"]').first()[0];
                        //     var menulevel = $(menuitem).parents('ul').length;
                        //     // console.log(menuitem);
                        //     // console.log(menulevel);
                        //     var parentLI = $(menuitem).parent().parent().parent();
                        //     var itemarrow = parentLI.find('.arrow').first()[0];
                    
                        //     //now check for higher level
                        //     if(menulevel==3){
                    
                        //         var parentFirstLevel = $(parentLI).parent().parent().first()[0];
                        //         var parentarrow = $(parentFirstLevel).find('.arrow').first()[0];
                        //         parentarrow.click();
                        //     }
                    
                        //     if(menulevel>1){
                        //         itemarrow.click();
                    
                        //     }
                        //     $(menuitem).addClass('sidebar-selected');
                        //     $(menuitem).parent().append('<ul style="display:block" id="indoc"></ul>')
                        //     $('h2').each(function(index, value){
                        //           if($(this).attr('id')){
                        //             var anchor = "#" + $(this).attr('id');
                        //             var text = $(this).text();
                        //             var li = "<li><a href='" + anchor + "'>" + text + "</a>" ;
                        //             $('#indoc').append(li);               
                        //           }
                    
                                  
                        //     });
                        // });
                      var $myNav = $('#toc');
                      $('body').scrollspy({
                        target: $myNav
                      });
                        function affix() {
                            
                            // Fit affix width to its parent's width
                            var $affixElement = $('div[data-spy="affix"]');
                            $affixElement.width($affixElement.parent().width());
                     
                            // Position of vertical scrollbar 
                            var position = $(window).scrollTop();
                            if (position >= offset) {
                                $('.wrapper .section').each(function(i) {
                                    // Current content block's position less body padding
                                    var current = $(this).offset().top - offset - 1;
                                    
                                    // Add active class to corresponding affix menu while removing the same from siblings as per position) of current block
                                    if (current <= position) {
                                        $('a', $affixElement).eq(i).addClass('active').siblings().removeClass('active');
                                    }
                                });
                            } else {
                                $('a', $affixElement).find('.active').removeClass('active').end().find(":first").addClass('active');
                            }
                        };
                    
                        // $(window).on('scroll resize', function() {
                        //     affix();
                     
                        // });
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="pairing-remote-device-by-scanning-its-bluetooth-name-or-address-using-scanandpair-apis" class="anchor"><a class="heading-anchor" href="#pairing-remote-device-by-scanning-its-bluetooth-name-or-address-using-scanandpair-apis"><span></span></a>Pairing Remote Device by Scanning its Bluetooth Name or Address using ScanAndPair APIs</h1>
                                    <p>
                                        EMDK For Android
                                        4.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This guide will walk you through creating an EMDK For Android application that will use <a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair APIs</a> introduced in EMDK V 3.1, to perform pairing of any remote Scanning device by Scanning its Bluetooth Name or Bluetooth Address. The API uses <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairManager">Scan and Pair Manager</a>, which is the primary object that allows pairing with remote scanning devices.</p>

<p>In this tutorial, we will explore the <a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair APIs</a> by using it for developing a basic application that will scan Bluetooth Name/Address of a Remote Scanning device (Ex. <a href="https://www.zebra.com/content/dam/msi-new/assets/web/Business/Products/Mobile%20Computers/Handheld%20Computers/MC40/_Documents/Static_Files/MC40_Specifications.pdf">MC40</a>) and pair itself with this device through bluetooth name or address scanned by discovering it.</p>

<blockquote>
  <p>Note: The <a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair API</a> does not use Profile Wizard to scan and pair remote device and everything needs to be configured programmatically through code.   </p>
</blockquote>

<h2 id="creatingtheproject" class="anchor"><a class="heading-anchor" href="#creatingtheproject"><span></span></a>Creating The Project</h2>

<blockquote>
  <p>Note: Provide "ScanAndPairTutorial" as the project name for this tutorial.</p>
</blockquote>

<p>If you are using Android Studio, click <a href="/emdk-for-android/4-0/tutorial/tutCreateProjectAndroidStudio">here</a>.</p>

<p>If you are using Eclipse with ADT, click <a href="/emdk-for-android/4-0/tutorial/tutCreateProjectEclipseADT">here</a>.  </p>

<h2 id="enablingandroidpermissions" class="anchor"><a class="heading-anchor" href="#enablingandroidpermissions"><span></span></a>Enabling Android Permissions</h2>

<ol>
<li><p>Modify the Application's Manifest.xml to use the EMDK library and to set permission for the EMDK to scan the barcodes.</p>

<p><img src="/img/ScanAndPairTutorialImages/manifest_file.jpg" alt="img"></p>

<p>You must first enable permissions for 'com.symbol.emdk.permission.EMDK':  </p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK" /&gt; 
</code></pre>

<p>Then you must enable the library for EMDK:  </p>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk" /&gt;
</code></pre>

<p>When done, your manifest.xml should look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/manifest_permissions_added.jpg" alt="img"> </p></li>
</ol>

<h2 id="addingsomecode" class="anchor"><a class="heading-anchor" href="#addingsomecode"><span></span></a>Adding Some Code</h2>

<ol>
<li><p>Now we will start to add some code. </p>

<p>First you must add references to the libraries:  </p>

<pre class="prettyprint"><code>
import com.symbol.emdk.EMDKManager;
import com.symbol.emdk.scanandpair.ScanAndPairManager;
import com.symbol.emdk.scanandpair.StatusData;  
</code></pre>

<p>Then you must make the activity to implement <a href="/emdk-for-android/4-0/api/core/EMDKManager-EMDKListener">EMDKListener</a>. Use Eclipse's Content Assist to implement the unimplemented functions of <code>onOpened</code> and <code>onClosed</code>.</p>

<p>After that you also need to implement <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairManager-StatusListener">ScanAndPairManager.StatusListener</a>, which is an interface for informing client applications to notify Scan and Pair or Scan and Unpair events. Override its <code>onStatus</code> function. The <code>onStatus</code> is a callback method that would be called when a scan and pair or unpair status event occurs. </p>

<blockquote>
  <p>Note: If you are using Android Studio, press CTRL+ALT+O or CMD+ALT+O to organize imports.</p>
  
  <p>OR</p>
  
  <p>If you are using Eclipse with ADT, press CTRL+SHFT+O or CMD+SHFT+O to organize imports.</p>
</blockquote>

<pre class="prettyprint"><code>
public class MainActivity extends Activity implements EMDKManager.EMDKListener,
ScanAndPairManager.StatusListener {  

<pre><code>.. .. .. .. .. .. ...  

@Override
public void onOpened(EMDKManager emdkManager) {

}

@Override
public void onClosed() {

}

@Override
public void onStatus(StatusData statusData) {

}  
</code></pre>

}      
</code></pre>

<p>We will now create some global variables to hold the instance objects of EMDKManager and ScanAndPairManager. These variables would be used throughout the code.</p>

<p>We will then add some UI elements starting with a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> to display the status of Scan and Pair operation and then <a href="http://developer.android.com/reference/android/widget/EditText.html">EditText</a> that will display the scanned Bluetooth Name/Address of Remote Scanning device or allow user to enter Bluetooth Name/Address of Remote Scanning device with which your Symbol device needs to be paired using <a href="/emdk-for-android/4-0/api/scanandpair">Scan and Pair APIs</a>. The UI would have a <a href="http://developer.android.com/guide/topics/ui/controls/spinner.html">Spinner</a> that would specify what type of data (Bluetooth Name or Bluetooth Address) of Remote Scanning device, the client application needs to scan prior to pairing with that Remote device. The User Interface would also have two <a href="http://developer.android.com/reference/android/widget/CheckBox.html">Check Boxes</a> that would be explained later while adding UI code. Of course, the UI will have <a href="http://developer.android.com/guide/topics/ui/controls/button.html">Buttons</a> to apply settings and start operation of Scan and Pair or Unpair.       </p>

<pre class="prettyprint"><code>
// Text View to hold Bluetooth Name of Remote Scanning device to pair with.
private EditText btName = null;

// Text View to hold Bluetooth Address of Remote Scanning Device to pair with.
private EditText btAddress = null;

// Select whether to use Hard Scan or Soft Scan option to Scan
// Bluetooth Name/Address of Remote Scanning device to pair with.
private CheckBox checkboxHardTrigger = null;

// CheckBox to indicate whether to perform a scan to get Bluetooth Name/Address of
// Remote Scanning device or allow user to enter Bluetooth Name/Address of Remote
// Scanning device to pair with.
private CheckBox checkBoxAlwaysScan = null;

// Button to Pair the client application device with Remote Scanning device.
private Button scanAndPairButton = null;

// Button to Unpair the client application device with Remote Scanning device.
private Button scanAndUnpairButton = null;

// Spinner to display type of data (Bluetooth Name/Address) of Remote Scanning
// device will be used to pair.
private Spinner scandataType = null;

// Text view to display status of Scan and Pair or Unpair Operations
private TextView statusView = null;

// Declare a variable to store EMDKManager object
private EMDKManager emdkManager = null;

// Declare a variable to store ScanAndPair object
ScanAndPairManager scanAndPairMgr = null;

// An interface for notifying client applications to notify scan and pair or unpair events.
com.symbol.emdk.scanandpair.ScanAndPairManager.StatusListener statusCallbackObj = this;
</code></pre>

<p>The code till here looks like:</p>

<p><img src="/img/ScanAndPairTutorialImages/variables_added_1.jpg" alt="img">
<img src="/img/ScanAndPairTutorialImages/variables_added_2.jpg" alt="img"> </p></li>

<li><p>Now, let us design a simple UI that has components explained above.</p>

<p>So, remove all the code, inside "res/layout/activity_main.xml" and add following XML layout code for UI.</p>

<pre class="prettyprint"><code>
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="16dp"
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context="com.symbol.scanandpairsample1.MainActivity" &gt;

<pre><code>&amp;lt;LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" &amp;gt;

    &amp;lt;TextView
        android:id="@+id/nameTitle"
        android:layout_width="119dp"
        android:layout_height="match_parent"
        android:text="Bluetooth Name:" /&amp;gt;

    &amp;lt;EditText
        android:id="@+id/name"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:singleLine="true"
        android:hint="MPOS-64001019"
        android:text="" /&amp;gt;

&amp;lt;/LinearLayout&amp;gt;

&amp;lt;LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" &amp;gt;

    &amp;lt;TextView
        android:id="@+id/addressTitle"
        android:layout_width="119dp"
        android:layout_height="match_parent"
        android:text="Bluetooth Address:" /&amp;gt;

    &amp;lt;EditText
        android:id="@+id/address"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:singleLine="true"
        android:hint="8C:DE:52:12:A2:56"
        android:text="" /&amp;gt;

&amp;lt;/LinearLayout&amp;gt;

&amp;lt;LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" &amp;gt;

    &amp;lt;CheckBox
        android:id="@+id/alwaysscan"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="Always Scan" /&amp;gt;

    &amp;lt;CheckBox
        android:id="@+id/triggerType"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="Hard Trigger" /&amp;gt;

&amp;lt;/LinearLayout&amp;gt;

&amp;lt;LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" &amp;gt;

    &amp;lt;TextView
        android:id="@+id/scanDataTitle"
        android:layout_width="119dp"
        android:gravity="center_vertical"
        android:layout_height="match_parent"
        android:text="ScanData Type:" /&amp;gt;

    &amp;lt;Spinner
        android:id="@+id/scanDataType"
        android:layout_width="match_parent"
        android:layout_height="36dp" /&amp;gt;

&amp;lt;/LinearLayout&amp;gt;

&amp;lt;LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp"
    android:orientation="horizontal" &amp;gt;

    &amp;lt;Button
        android:id="@+id/scanandpair"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:focusable="true"
        android:text="Pair" &amp;gt;
        &amp;lt;requestFocus /&amp;gt;
    &amp;lt;/Button&amp;gt;

    &amp;lt;Button
        android:id="@+id/scanandunpair"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Unpair" /&amp;gt;

&amp;lt;/LinearLayout&amp;gt;

&amp;lt;ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="20dp" &amp;gt;

    &amp;lt;TextView
        android:id="@+id/logs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Status:" /&amp;gt;
&amp;lt;/ScrollView&amp;gt;
</code></pre>

&lt;/LinearLayout&gt;
</code></pre>

<blockquote>
  <p>Note: If you are using Android Studio, press CTRL+ALT+I or CMD+ALT+I to auto indent lines.</p>
  
  <p>OR</p>
  
  <p>If you are using Eclipse with ADT, press CTRL+SHFT+F or CMD+SHFT+F to auto indent lines     </p>
</blockquote></li>

<li><p>In the <code>onCreate</code> method, we take reference of UI elements that are declared in "res/layout/activity_main.xml" in order to use them in our <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a>. We then call getEMDKManager so that the EMDK can be initialized and checked to see if it is ready. We will then set the <a href="http://developer.android.com/reference/android/widget/ArrayAdapter.html">ArrayAdapter</a> that has a list of <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairConfig?ScanAndPairConfig.ScanDataType">Scan data types</a> of the Remote Scanner device to the Spinner.</p>

<p>Finally, we would add methods calls to handle buttons and check boxes events.  </p>

<pre class="prettyprint"><code>
// References for UI elements
btName = (EditText) findViewById(R.id.name);
btAddress = (EditText) findViewById(R.id.address);
checkBoxAlwaysScan = (CheckBox) findViewById(R.id.alwaysscan);
checkboxHardTrigger = (CheckBox) findViewById(R.id.triggerType);
scanAndPairButton = (Button) findViewById(R.id.scanandpair);
scanAndUnpairButton = (Button) findViewById(R.id.scanandunpair);
statusView = (TextView) findViewById(R.id.logs);
scandataType = (Spinner)findViewById(R.id.scanDataType);
statusView.setText("\n");

// Initially disable both Bluetooth Name and Address Checkboxes
btName.setEnabled(false);
btAddress.setEnabled(false);

// The EMDKManager object creation and object will be returned in the callback.
EMDKResults results = EMDKManager.getEMDKManager(getApplicationContext(), this);

// Check the return status of getEMDKManager ()
if (results.statusCode == EMDKResults.STATUS_CODE.SUCCESS) {
    statusView.setText("Please wait, initialization in progress...");
} else {
    statusView.setText("Initialization failed!");
}

// Add supported scan types to an ArrayList
ArrayList&lt;ScanAndPairConfig.ScanDataType&gt; scanDataTypes = new ArrayList&lt;ScanAndPairConfig.ScanDataType&gt;();
scanDataTypes.add(ScanAndPairConfig.ScanDataType.MAC_ADDRESS);
scanDataTypes.add(ScanAndPairConfig.ScanDataType.DEVICE_NAME);
scanDataTypes.add(ScanAndPairConfig.ScanDataType.UNSPECIFIED);

// Set the scan types list to an Array Adapter and set that Adapter to the Spinner
ArrayAdapter&lt;ScanAndPairConfig.ScanDataType&gt; arrayAdapter =
        new ArrayAdapter&lt;ScanAndPairConfig.ScanDataType&gt;(getApplicationContext(),
                R.layout.simple_spinner_item, scanDataTypes);
scandataType.setAdapter(arrayAdapter);

// Method call to register onClick listeners of both Pair and Unpair buttons
registerForButtonEvents ();

// Method call to register onChecked listener of both checkboxes.
addCheckBoxListener();
</code></pre>

<p>So the complete <code>onCreate</code> method looks like:</p>

<p><img src="/img/ScanAndPairTutorialImages/on_create_added_1.jpg" alt="img">
<img src="/img/ScanAndPairTutorialImages/on_create_added_2.jpg" alt="img"></p></li>

<li><p>Get the <a href="/emdk-for-android/4-0/api/core/EMDKManager">EMDK Manager</a> in the <code>onOpened</code> method and update the <code>StatusView</code> TextView with a message by adding following code in <code>onOpened</code> method.</p>

<pre class="prettyprint"><code>
// Get EMDK Manager
this.emdkManager = emdkManager;
// Update StatusView TextView with a message on UI thread
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        statusView.setText("Application Initialized.");
    }
});
</code></pre>

<p>The <code>onOpened</code> method should look like: </p>

<p><img src="/img/ScanAndPairTutorialImages/on_opened_method.jpg" alt="img"></p></li>

<li><p>You will see few errors as we have not created the layout for ArrayAdapter and also not created onClick and onChecked listener methods. Let us resolve the errors by first creating the layout for Array Adapter.</p>

<p>So go to res -&gt; layout and add a new file <code>simple_spinner_item.xml</code> file. Add following code to this file.</p>

<pre class="prettyprint"><code>
&lt;TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:textSize="20sp"
 android:textColor="@android:color/black"
 android:gravity="center"
 android:text="Option"
/&gt;
</code></pre>

<p>This should look like:  </p>

<p><img src="/img/ScanAndPairTutorialImages/adapter_layout_added.jpg" alt="img"></p></li>

<li><p>Lets add the <code>addCheckBoxListener</code> method that would handle check box event for "Always Scan" checkbox. If this check box is checked, we will disable the Bluetooth Name and Address EditTexts so that these two parameters can be provided by scanning Remote Scanning device and not by the user. If "Always Scan" check box is unchecked, we will enable the Bluetooth Name and Address EditTexts because user will have to enter these details of Remote Scanning device prior to pairing. This checkbox is related to <code>scanAndPairMgr.config.alwaysScan</code> field of <code>ScanAndPair</code> API that would be explained later.</p>

<pre class="prettyprint"><code>
// Listener for Always Scan checkbox
private void addCheckBoxListener() {

<pre><code>checkBoxAlwaysScan.setOnCheckedChangeListener
        (new CompoundButton.OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            btName.setEnabled(false);
            btAddress.setEnabled(false);
        }
        else {
            btName.setEnabled(true);
            btAddress.setEnabled(true);
        }
    }
});
</code></pre>

}
</code></pre>

<p>This method should look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/always_scan_check_box_listener.jpg" alt="img"></p></li>

<li><p>You can still see one error. So lets add <code>registerForButtonEvents</code> method to get rid of this error. <code>registerForButtonEvents</code> method contains onClick listener method calls of both "Pair" and "Unpair" buttons.</p>

<pre class="prettyprint"><code>
// Method that calls onClick listener methods for Pair and Unpair buttons.
private void registerForButtonEvents() {
    addScanAndPairButtonEvents();
    addScanAndUnpairButtonEvents();
}
</code></pre>

<p>The method looks like:</p>

<p><img src="/img/ScanAndPairTutorialImages/method_calls_for_both_buttons.jpg" alt="img"></p></li>

<li><p>This is the most important part of this tutorial as these two methods would allow you to pair and unpair this client application with Remote Scanning device (Ex. MC40). Lets add these two methods starting with <code>addScanAndPairButtonEvents</code>.</p>

<p>First get the <code>scanAndPairButton</code> reference, set the onClickListener and override <code>onClick</code> method.</p>

<p><img src="/img/ScanAndPairTutorialImages/on_click_listener_scan_pair.jpg" alt="img"></p>

<p>In case of Scan and Pair, we would get an instance of <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairManager">ScanAndPairManager</a> first. On this instance, set the status listener to get the status of Scan and Pair operations.</p>

<pre class="prettyprint"><code>
if(scanAndPairMgr == null) {
        scanAndPairMgr = (ScanAndPairManager) emdkManager.getInstance(FEATURE_TYPE.SCANANDPAIR);

<pre><code>    if(scanAndPairMgr != null) {
                scanAndPairMgr.addStatusListener(statusCallbackObj);
    }
</code></pre>

}
</code></pre>

<p>We would then set the <code>scanAndPairMgr.config.alwaysScan</code> parameter. The <code>ScanAndPairManager.config.alwaysScan</code> field determines if a scan will be performed to get the Bluetooth Name/Address of the Remote device or the user itself has to enter Bluetooth Name/Address to pair with the Remote device.</p>

<ul>
<li>If ScanAndPairManager.config.alwaysScan is set to true, a scan is always performed when these methods are called. By default it is set to true. So scanning a Bluetooth barcode is required by default.</li>

<li>If ScanAndPairManager.config.alwaysScan is set to false, then scanning is skipped and the ScanAndPairMgr.config.bluetoothInfo.deviceName or scanAndPairMgr.config.bluetoothInfo.macAddress field provided by the user are directly taken for pairing.</li></ul>

<p><code>checkBoxAlwaysScan</code> checkbox determines the status of <code>scanAndPairMgr.config.alwaysScan</code>. Set the <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairConfig?ScanAndPairConfig.NotificationType">Notification Type</a> to indicate the progress of <code>ScanAndPair</code> or <code>ScanAndUnpair</code> operations.</p>

<pre class="prettyprint"><code>
scanAndPairMgr.config.alwaysScan = checkBoxAlwaysScan.isChecked();
scanAndPairMgr.config.notificationType = NotificationType.BEEPER;

if(!checkBoxAlwaysScan.isChecked()) {
     scanAndPairMgr.config.bluetoothInfo.macAddress = btAddress.getText().toString().trim();
     scanAndPairMgr.config.bluetoothInfo.deviceName = btName.getText().toString().trim();
}
</code></pre>

<p>Notification Type has a specific beep sequence that lets you know the type of operation with the help of following table:</p>

<p><img src="/img/ScanAndPairTutorialImages/notification_table.jpg" alt="img">    </p>

<p>If <code>checkBoxAlwaysScan</code> checkbox is checked, we would perform a scan to get the Bluetooth Name/Address of the Remote device for pairing. So set the timeout that specifies the duration within which a Bluetooth Barcode should be scanned (Ex. 5 seconds). Later if the <code>checkboxHardTrigger</code> is checked, we would set <code>TriggerType.HARD</code> as trigger type, else set trigger type as <code>TriggerType.SOFT</code>.</p>

<pre class="prettyprint"><code>
scanAndPairMgr.config.scanInfo.scanTimeout = 5000;

  if(checkboxHardTrigger.isChecked()) {
     scanAndPairMgr.config.scanInfo.triggerType = TriggerType.HARD;
  } else {
    scanAndPairMgr.config.scanInfo.triggerType = TriggerType.SOFT;
  }
</code></pre>

<p>Set type of data the application is going to scan (Ex. Bluetooth Name or Bluetooth Address).</p>

<pre class="prettyprint"><code>
scanAndPairMgr.config.scanInfo.scanDataType = (ScanDataType)scandataType.getSelectedItem();
</code></pre>

<p>Call <code>scanAndPair</code> method and get the result in <code>ScanAndPairResults</code>. This is an asynchronous method. The status of the scanAndPair() method will be returned if the callback is registered. If the always scan is enabled in the configuration, this method scans a barcode to get the Bluetooth address or name of a remote device, and pairs with that remote device. If a Bluetooth address is scanned, the remote device is paired without performing a discovery. If a Bluetooth name is scanned, then a discovery is done to find the address of the device and then the pairing is done. The provided authentication PIN is used for pairing. The maximum allowed length for the authentication PIN is 15 characters.</p>

<pre class="prettyprint"><code>
ScanAndPairResults resultCode = scanAndPairMgr.scanAndPair("0000");
</code></pre>

<blockquote>
  <p>Note: We have provided "0000", which is a default value.</p>
</blockquote>

<p>Finally, we would update the Status of operations in <code>statusView</code> using <a href="/emdk-for-android/4-0/api/scanandpair/ScanAndPairManager?ScanAndPairResults">ScanAndPairResults</a>.</p>

<pre class="prettyprint"><code>
if(!resultCode.equals(ScanAndPairResults.SUCCESS))
    statusView.append(resultCode.toString()+ "\n\n");
} else {
    statusView.append("ScanAndPairmanager initialization failed!");
}
</code></pre>

<p>So thats how we perform ScanAndPair operation of this client application with Remote Scanner device. Following is the entire source code for his method that you can directly copy:</p>

<pre class="prettyprint"><code>
// Method to perform ScanAndPair Operation
private void addScanAndPairButtonEvents() {
  scanAndPairButton = (Button) findViewById(R.id.scanandpair);
  scanAndPairButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

<pre><code>    try {
        statusView.setText("ScanAndPair started..."+ "\n");

        if(scanAndPairMgr == null) {
            // Get reference to ScanAndPair Manager
            scanAndPairMgr = (ScanAndPairManager) emdkManager.getInstance
                    (EMDKManager.FEATURE_TYPE.SCANANDPAIR);

            if(scanAndPairMgr != null) {
                // Add Status Listener on ScanAndPair Manager
                scanAndPairMgr.addStatusListener(statusCallbackObj);
            }
        }

        if(scanAndPairMgr != null) {
            scanAndPairMgr.config.alwaysScan = checkBoxAlwaysScan.isChecked();
            // Set Notification to Beeper
            scanAndPairMgr.config.notificationType =
                    ScanAndPairConfig.NotificationType.BEEPER;
            // If always scan checkbox is unchecked, get details from EditText
            if(!checkBoxAlwaysScan.isChecked()) {
                scanAndPairMgr.config.bluetoothInfo.macAddress =
                        btAddress.getText().toString().trim();
                scanAndPairMgr.config.bluetoothInfo.deviceName =
                        btName.getText().toString().trim();
            }
            else {
                // Else scan these details (Bluetooth Name/Address)
                scanAndPairMgr.config.scanInfo.scanTimeout = 5000;
                //Set Trigger Type for Scanning
                if(checkboxHardTrigger.isChecked()) {
                    scanAndPairMgr.config.scanInfo.triggerType =
                            ScanAndPairConfig.TriggerType.HARD;
                } else {
                    scanAndPairMgr.config.scanInfo.triggerType =
                            ScanAndPairConfig.TriggerType.SOFT;
                }
                // Set Scan data type the user has selected from spinner
                scanAndPairMgr.config.scanInfo.scanDataType =
                        (ScanAndPairConfig.ScanDataType)scandataType.getSelectedItem();
            }
            // Perform ScanAndPair operation
            ScanAndPairResults resultCode = scanAndPairMgr.scanAndPair("0000");
            // Update the status on StatusView.
            if(!resultCode.equals(ScanAndPairResults.SUCCESS))
                statusView.append(resultCode.toString()+ "\n\n");

        } else {
            statusView.append("ScanAndPairmanager initialization failed!");
        }
    } catch (Exception e) {
        statusView.setText("ScanAndUnpair Error:"+ e.getMessage() + "\n");
    }
}
</code></pre>

  });
}
</code></pre>

<p>The complete <code>addScanAndPairButtonEvents</code> method should now look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/complete_scan_and_pair_button_event_method_1.jpg" alt="img">
<img src="/img/ScanAndPairTutorialImages/complete_scan_and_pair_button_event_method_2.jpg" alt="img"></p></li>

<li><p>Lets write the <code>addScanAndUnpairButtonEvents</code> method to unpair the client application from your device with the Remote Scanning device (Ex. MC40). This Scan and Unpair method would perform similar steps that were performed in Scan and Pair method explained in previous step except one thing. It would call <code>scanAndUnpair</code> method to unpair device with Remote Scanning device as:</p>

<pre class="prettyprint"><code>
ScanAndPairResults resultCode = scanAndPairMgr.scanAndUnpair();
</code></pre>

<p><code>scanAndUnpair</code> is an asynchronous method and its status will be returned if the callback is registered. If the always scan is enabled in the configuration, this method scans a barcode to get the Bluetooth address or name of a remote device, and unpairs with that remote device. If a Bluetooth address was scanned for pairing during scanAndPair() calls, then the same address can be scanned for unpairing during the ScanAndUnPair() call.</p>

<p>This operation would be performed when the user presses <code>Unpair</code> button. Hence we would get the reference of <code>scanAndUnpairButton</code> in this method.</p>

<p>So the complete source code of this method for unpairing client application with Remote Scanning device would be:</p>

<pre class="prettyprint"><code>
// Method to perform ScanAndUnpair Operation
private void addScanAndUnpairButtonEvents() {
  scanAndUnpairButton = (Button) findViewById(R.id.scanandunpair);
  scanAndUnpairButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

<pre><code>    try {
        statusView.setText("ScanAndUnpair started..."+ "\n");
        if(scanAndPairMgr == null) {
            // Get reference to ScanAndPair Manager
            scanAndPairMgr = (ScanAndPairManager)
                    emdkManager.getInstance(EMDKManager.FEATURE_TYPE.SCANANDPAIR);

            if(scanAndPairMgr != null) {
                // Add Status Listener on ScanAndPair Manager
                scanAndPairMgr.addStatusListener(statusCallbackObj);
            }
        }

        if(scanAndPairMgr != null) {
            scanAndPairMgr.config.alwaysScan = checkBoxAlwaysScan.isChecked();
            // Set Notification to Beeper
            scanAndPairMgr.config.notificationType = ScanAndPairConfig.NotificationType.BEEPER;
            // If always scan checkbox is unchecked, get details from EditText
            if(!checkBoxAlwaysScan.isChecked()) {
                scanAndPairMgr.config.bluetoothInfo.macAddress =
                        btAddress.getText().toString().trim();
                scanAndPairMgr.config.bluetoothInfo.deviceName =
                        btName.getText().toString().trim();
            }
            else {
                // Else scan these details (Bluetooth Name/Address)
                scanAndPairMgr.config.scanInfo.scanTimeout = 5000;
                //Set Trigger Type for Scanning
                if(checkboxHardTrigger.isChecked()) {
                    scanAndPairMgr.config.scanInfo.triggerType = ScanAndPairConfig.TriggerType.HARD;
                } else {
                    scanAndPairMgr.config.scanInfo.triggerType = ScanAndPairConfig.TriggerType.SOFT;
                }
                // Set Scan data type the user has selected from spinner
                scanAndPairMgr.config.scanInfo.scanDataType =
                        (ScanAndPairConfig.ScanDataType)scandataType.getSelectedItem();
            }
            // Perform ScanAndUnpair operation
            ScanAndPairResults resultCode = scanAndPairMgr.scanAndUnpair();
            // Update the status on StatusView.
            if(!resultCode.equals(ScanAndPairResults.SUCCESS))
                statusView.append(resultCode.toString()+ "\n\n");


        } else {
            statusView.append("ScanAndPairmanager initialization failed!");
        }
    } catch (Exception e) {
        statusView.setText("ScanAndUnpair Error:"+ e.getMessage() + "\n");
    }

}
</code></pre>

  });
}
</code></pre>

<p>The complete <code>addScanAndUnpairButtonEvents</code> method should now look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/complete_scan_and_unpair_button_event_method_1.jpg" alt="img">
<img src="/img/ScanAndPairTutorialImages/complete_scan_and_unpair_button_event_method_2.jpg" alt="img"></p></li>

<li><p>In this step, we would write all the possible status that could be received during ScanAndPair and ScanAndUnpair operations in the <code>onStatus</code> method. We have added status listeners in both ScanAndPair and ScanAndUnpair methods so that we can track different status when these operations are performed and display them on <code>statusView</code> to notify user. The <code>statusData.getState()</code> method provides all the states we can get during pairing and unpairing operations.</p>

<p>Following is the code of <code>onStatus</code> that mentions all the states and display them in the <code>statusView</code> TextView on the UI thread.  </p>

<pre class="prettyprint"><code>
// Method to display status during ScanAndPair and ScanAndUnpair operations.
@Override
public void onStatus(StatusData statusData) {

<pre><code>final StringBuilder text= new StringBuilder();

boolean isUpdateAddress = false;
// Get the status and check with the supported status to display message.
switch (statusData.getState()) {
    // Status Waiting
    case WAITING:
        text.append("Waiting for trigger press to scan the barcode");
        break;
    // Status Scanning
    case SCANNING:
        text.append("Scanner Beam is on, aim at the barcode.");
        break;
    // Status Discovering
    case DISCOVERING:
        text.append("Discovering for the Bluetooth device");
        isUpdateAddress = true;
        break;
    // Status Paired
    case PAIRED:
        text.append("Bluetooth device is paired successfully");
        break;
    // Status Unpaired
    case UNPAIRED:
        text.append("Bluetooth device is un-paired successfully");
        break;
    // Status Error
    default:
    case ERROR:
        text.append("\n"+ statusData.getState().toString()+": " + statusData.getResult());
        break;
}

// Update Status View with the status on main thread
final boolean isUpdateUI = isUpdateAddress;
runOnUiThread(new Runnable() {
    public void run() {
        statusView.setText(text + "\n");
        // Update Bluetooth Name and Address EditTexts
        if(isUpdateUI) {
            btName.setText(scanAndPairMgr.config.bluetoothInfo.deviceName);
            btAddress.setText(scanAndPairMgr.config.bluetoothInfo.macAddress);
        }
    }
});
</code></pre>

}  
</code></pre>

<p>The <code>onStatus</code> method should look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/on_status_method_1.jpg" alt="img">
<img src="/img/ScanAndPairTutorialImages/on_status_method_2.jpg" alt="img">      </p></li>

<li><p>Display an error message on <code>statusView</code> TextView in the <code>onClosed</code> method using following code:</p>

<pre class="prettyprint"><code>
runOnUiThread(new Runnable() {
    @Override
    public void run() {             
        statusView.setText("Error!! Restart the application!!");
    }
});
</code></pre>

<p>The <code>onClosed</code> method should now look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/on_closed_method.jpg" alt="img"></p></li>

<li><p>Finally, we would clean up the objects created by <a href="/emdk-for-android/4-0/api/core/EMDKManager">EMDK Manager</a> in <code>onDestroy</code> method using following code:</p>

<pre class="prettyprint"><code>
if (emdkManager != null) {
    // Clean up the objects created by EMDK manager
    emdkManager.release();
    emdkManager=null;
}
</code></pre>

<p>So the <code>onDestroy</code> method should now look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/on_destroy_method.jpg" alt="img"></p></li>
</ol>

<p>That's it!!! We are done with all the coding part that will let us scan the Bluetooth Name/Address of Remote Scanning device and pair our client application with that Remote device using  <a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair APIs</a> introduced in EMDK V 3.1. Now let us run the application.</p>

<h2 id="runningtheapplication" class="anchor"><a class="heading-anchor" href="#runningtheapplication"><span></span></a>Running the Application</h2>

<ol>
<li><p>Connect the device (having latest EMDK runtime) to USB port. </p>

<blockquote>
  <p>Note: <br>
  Make sure the device is in USB debug.</p>
</blockquote></li>

<li><p>Run the application.</p>

<p><img src="/img/ScanAndPairTutorialImages/home_screen.png" alt="img"></p>

<p>You can see a message on the "StatusView" that indicates EMDK Manager has been successfully initialized.</p></li>

<li><p>We want to scan and not type, the Bluetooth Address of Remote Scanning device (Ex. MC40) with which we would pair our device having this client application. So keep the "Always Scan" checkbox checked.</p></li>

<li><p>We would scan the Bluetooth Address of Remote Scanning device. So select <code>MAC ADDRESS</code> option from "ScanData Type" spinner.     </p>

<p><img src="/img/ScanAndPairTutorialImages/mac_address_scan_data_type.png" alt="img"></p></li>

<li><p>We would scan the Bluetooth Address of Remote Scanning device using Hard Scanner. So keep the "Hard Trigger" checkbox option as checked. So eventually our configuration should look like:</p>

<p><img src="/img/ScanAndPairTutorialImages/config_before_scan.png" alt="img"></p></li>

<li><p>Now press "Pair" button and it would start the pairing process by notifying the intermediate status in the "statusView" TextView.</p>

<p><img src="/img/ScanAndPairTutorialImages/scan_and_pair_started.png" alt="img"></p>

<p><img src="/img/ScanAndPairTutorialImages/waiting_for_trigger_press.png" alt="img"></p></li>

<li><p>Now press the Hard Scan key to scan Bluetooth Address of the Remote Scanning device.</p>

<p><img src="/img/ScanAndPairTutorialImages/beam_on_aim_barcode.png" alt="img"></p></li>

<li><p>The following is the Barcode that has the MAC Address of Remote Scanning Device (Ex. MC40).</p>

<p><img src="/img/ScanAndPairTutorialImages/barcode_with_mac_address.jpg" alt="img"></p></li>

<li><p>Scan this Barcode and your device (Ex. TC55) would be successfully paired with the Remote Scanning Device (Ex. MC40).</p>

<p><img src="/img/ScanAndPairTutorialImages/discovering_device.png" alt="img"></p>

<p><img src="/img/ScanAndPairTutorialImages/pairing_dialog.png" alt="img"></p>

<p>Click "Pair" button on both devices (Mobile and Remote Scanning Device).</p>

<p><img src="/img/ScanAndPairTutorialImages/device_paired.png" alt="img"></p></li>

<li><p>You can see the "statusView" with a success message. Now let's confirm this by going to device's Settings -&gt; Bluetooth.</p>

<p><img src="/img/ScanAndPairTutorialImages/confirm_pairing.png" alt="img"></p></li>

<li><p>You can see that MC40 has been successfully paired under "PAIRED DEVICES" section of your device.</p></li>
</ol>

<h2 id="importantprogrammingtips" class="anchor"><a class="heading-anchor" href="#importantprogrammingtips"><span></span></a>Important Programming Tips</h2>

<ol>
<li><p>It is required to do the following changes in the application's AndroidManifest.xml:  </p>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Include the permission for EMDK:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt;
</code></pre>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Use the EMDK library:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre></li>

<li><p>Installing the EMDK for Android application without deploying the EMDK runtime on the Symbol device will fail because of missing shared library on the device.</p></li>
</ol>

<h2 id="whatsnext" class="anchor"><a class="heading-anchor" href="#whatsnext"><span></span></a>What's Next</h2>

<p>Now that you have learned how to scan the Bluetooth Name/Address of Remote Scanning device and pair our client application with that Remote device using  <a href="/emdk-for-android/4-0/api/scanandpair">ScanAndPair APIs</a>, in the next tutorial we would concentrate on <a href="/emdk-for-android/4-0/api/simulscan">SimulScan APIs</a> and develop an application to demonstrate its use. </p>

<h2 id="downloadthesource" class="anchor"><a class="heading-anchor" href="#downloadthesource"><span></span></a>Download the Source</h2>

<p>The project source to this tutorial can be <a href="https://s3.amazonaws.com/emdk/Tutorials/ScanAndPairTutorial.zip">downloaded (Internet Connection Required)</a>.</p><p></p>
                                        <div>    <footer id="footer" class="navbar-fixed-bottom">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-10">
                     2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                </div>
                <div class="col-sm-2">
                    <ul class="social-icons">
                        <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                        <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                        <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer><!--/#footer-->
</div>


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    


 </div>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script>          


</body></html>