
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Set Default Launcher Application Using App Manager">
    <title>Set Default Launcher Application Using App Manager - Zebra Technologies Techdocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:42px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 6.3
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/6-3/guide/about">
                                    Home
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/guide/gettingstarted">
                                    Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/api">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/6-3/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Set Default Launcher Application Using App Manager</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="set-default-launcher-application-using-app-manager" class="anchor"><a class="heading-anchor" href="#set-default-launcher-application-using-app-manager"><span></span></a>Set Default Launcher Application Using App Manager</h1>
                                    <p>
                                            EMDK For Android
                                            6.3
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This guide will walk you through creating an EMDK For Android application that will use Mx features introduced in EMDK for Android API to perform device configurations. Mx represents a suite of Enterprise Features on top of standard, commercially available Android Open Source Project. So this tutorial will focus on one of the functions of App Manager API, which allows user to set any launcher application as a default launcher application using App Manager API.</p>

<p>The tutorial would enable user to set an application as default launcher using:</p>

<p><strong>1.  EMDK Profile Manager wizard:</strong> </p>

<p>Initially, we will configure EHS (Enterprise Home Screen) launcher application as the default launcher application using Profile Manager wizard. <a href="https://developer.motorolasolutions.com/docs/DOC-1875">Enterprise Home Screen (EHS)</a> is a replacement application launcher, for Symbol Android devices, designed to allow only specified applications to be launched. So this launcher will replace the existing launcher application in the device.</p>

<p><strong>2. App Manager API:</strong></p>

<p>Once the EHS has been set as the default launcher application, we will modify this setting by setting another application as default launcher through the code using App Manager API for default launcher. You can use any applicable launcher application. We will use <a href="http://www.appsapk.com/galaxy-launcher/">Galaxy Launcher</a> application to set  as default launcher application through code in this tutorial.</p>

<p>This allows you to understand how to configure parameters using Profile Manager and modify it using App Manager API.   </p>

<h2 id="downloadingrequiredlauncherapplications" class="anchor"><a class="heading-anchor" href="#downloadingrequiredlauncherapplications"><span></span></a>Downloading required Launcher Applications:</h2>

<p>As discussed above, we will now download and install the two launcher applications (<a href="https://developer.motorolasolutions.com/docs/DOC-1875">EHS</a> and <a href="http://www.appsapk.com/galaxy-launcher/">Galaxy Launcher</a>).</p>

<ul>
<li>You can download Enterprise Home Screen application <a href="https://portal.motorolasolutions.com/Support/US-EN/Resolution?solutionId=92627&amp;redirectForm=search&amp;searchQuery=%3FsearchType%3Dsimple%26searchTerm%3DDownload%20EHS">here</a>. Unzip the file to get the APK to install.</li>

<li>You can download Galaxy Launcher application <a href="http://www.appsapk.com/galaxy-launcher/">here</a>.</li>
</ul>

<p>Once downloaded, you can put them in SD card of the the device and install both of these launcher applications.</p>

<p>The App Manager API requires the Android <em>package name</em> of the application that you want to set as default launcher. If we know the package name then we can specify it in the field, but in this case we don't know as we have downloaded theses APK files from different sources.</p>

<blockquote>
  <p>Note:
  Android device does not provide package names of the installed applications.</p>
</blockquote>

<p>So we have <a href="https://github.com/Zebra/examples-emdk/archive/AllInstalledApps.zip">created an application</a> that finds all the installed applications programmatically and displays their package names along with the application name in a list.</p>

<p>You can <a href="https://github.com/Zebra/examples-emdk/archive/AllInstalledApps.zip">download</a> the application and install it - or modify the <a href="https://github.com/Zebra/examples-emdk/archive/AllInstalledApps.zip">source</a> to your liking. Once installed, open the app and you can find the package names of both the applications.</p>

<p>So, the Package name for EHS Launcher App is <strong>com.motorolasolutions.enterprisehomescreen</strong></p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/ehs_app.jpg" alt="img"> </p>

<p>Package name for Galaxy Launcher App is <strong>com.epic.launcher.tw</strong></p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/galaxy_launcher_app.jpg" alt="img"> </p>

<h2 id="creatingtheproject" class="anchor"><a class="heading-anchor" href="#creatingtheproject"><span></span></a>Creating The Project</h2>

<blockquote>
  <p>Note: Provide "MxDefaultLauncherTutorial" as the project name for this tutorial.</p>
</blockquote>

<p>Start by creating a new Android Studio <a href="/emdk-for-android/6-3/tutorial/tutCreateProjectAndroidStudio">project</a>. </p>

<h2 id="addingtheappmanagerprofile" class="anchor"><a class="heading-anchor" href="#addingtheappmanagerprofile"><span></span></a>Adding The AppManager Profile</h2>

<ol>
<li><p>Click <a href="/emdk-for-android/6-3/tutorial/tutAddProfileManagerFeature">here</a> to see how to add a specific feature to the Profile Manager.</p></li>

<li><p>Provide "DefaultLauncherProfile" as the Profile Name for this tutorial.</p>

<blockquote>
  <p>Note: You can provide any Profile Name but make sure to access it with the similar name in the Android code.  </p>
</blockquote></li>

<li><p>Now, you can see all these MX features on the left hand side of the Profile Editor window. Select the "App Manager" feature from the list and click "Right Arrow". Using this feature you can perform various operations in your apps on the Symbol Android device. These operations could be installing apps, uninstalling apps, upgrading apps and setting specific app as default launcher. We will be concentrating on Default Launcher feature in this tutorial.       </p></li>

<li><p>Click on the App Manager feature. The parameter list will be populated.  </p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/select_app_manager_feature.jpg" alt="img"></p></li>

<li><p>Now Click on the drop-down of the action field to see the supported features by App Manager. Select "Set as Default Launcher" feature.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/app_manager_features.jpg" alt="img"></p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/feature_default_launcher.jpg" alt="img"></p></li>

<li><p>Keep the 'Name' field empty. Now let us set earlier installed EHS launcher application as default launcher application. So provide the previously found package name of EHS application  (com.motorolasolutions.enterprisehomescreen) in the field "Package Name". Keep the last to "Action" fields as it is.</p>

<blockquote>
  <p>Note: If you have a different launcher application then provide the package name accordingly.</p>
</blockquote>

<p><img src="../../images/MxDefaultLauncherTutorialImages/app_manager_install_value.jpg" alt="img"></p></li>

<li><p>Click Apply and Finish. </p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/app_manager_profile_created.jpg" alt="img"></p></li>

<li><p>Click "Close".   </p>

<blockquote>
  <p>Note: <br>
  Now the "EMDKConfig.xml" is created under "\assets" folder. This file will contain a definition of all of your profiles that you create. </p>
</blockquote></li>

<li><p>You can inspect the "EMDKConfig.xml" to see it is reflecting the changes made to the parameters via EMDK Profile Manager GUI earlier.  However, it is advised that this file not be manually updated and only be controlled via the Profile Manager. So you can see the entry of the 'Set Default Launcher' feature of App Manager and the package name of the launcher application that we entered earlier in the profile creation.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/emdk_config_file_entries.jpg" alt="img">    </p></li>
</ol>

<h2 id="enablingandroidpermissions" class="anchor"><a class="heading-anchor" href="#enablingandroidpermissions"><span></span></a>Enabling Android Permissions</h2>

<ol>
<li><p>Modify the Application's Manifest.xml to use the EMDK library and to set permission for the EMDK.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/manifest_file.jpg" alt="img"></p>

<p>You must first enable permissions for 'com.symbol.emdk.permission.EMDK':  </p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt; 
</code></pre>

<p>Then you must enable the library:  </p>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre>

<p>When done, your manifest.xml should look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/manifest_permissions_added.jpg" alt="img"> </p></li>
</ol>

<h2 id="addingsomecode" class="anchor"><a class="heading-anchor" href="#addingsomecode"><span></span></a>Adding Some Code</h2>

<ol>
<li><p>Now we will start to add some code. </p>

<p>First you must add references to the libraries:  </p>

<pre class="prettyprint"><code>
import com.symbol.emdk.*;  
import com.symbol.emdk.EMDKManager.EMDKListener;  
import android.widget.Toast;    
</code></pre>

<p>Then you must extend the activity to implement EMDKListener.</p>

<pre class="prettyprint"><code>
public class MainActivity extends Activity implements EMDKListener {  

<pre><code>.. .. .. .. .. .. ...  

@Override  
public void onClosed() {  
       // TODO Auto-generated method stub  
}  

@Override  
public void onOpened(EMDKManager emdkManager) {  
       // TODO Auto-generated method stub  
}  
</code></pre>

}      
</code></pre>

<p>We will now create some global variables to hold the profile name as well as instance objects of EMDKManager and ProfileManager with a status variable while applying the profile. Some of the variables are used to hold the name, type and description in case of any errors. These variables would be used throughout the code.</p>

<blockquote>
  <p>Note:
  Verify the Profile name in the code with the one created in the Profile Manager. They both should be identical.    </p>
</blockquote>

<pre class="prettyprint"><code>
//Assign the profile name used in EMDKConfig.xml  
private String profileName = "DefaultLauncherProfile";  

//Declare a variable to store ProfileManager object  
private ProfileManager profileManager = null;  

//Declare a variable to store EMDKManager object  
private EMDKManager emdkManager = null;

// Contains the parm-error name (sub-feature that has error)
private String errorName = "";

// Contains the characteristic-error type (Root feature that has error)
private String errorType = "";

// contains the error description for parm or characteristic error.
private String errorDescription = "";

// contains status of the profile operation
private String status = "";     
</code></pre>

<p>In the onCreate method, we call getEMDKManager so that the EMDK can be initialized and checked to see if it is ready. </p>

<pre class="prettyprint"><code>
//The EMDKManager object will be created and returned in the callback.  
EMDKResults results = EMDKManager.getEMDKManager(getApplicationContext(), this);  

//Check the return status of getEMDKManager  
if (results.statusCode == EMDKResults.STATUS_CODE.SUCCESS) {

<pre><code>// EMDKManager object creation success
</code></pre>

} else {

<pre><code>// EMDKManager object creation failed
</code></pre>

}
</code></pre>

<p>So far your code should look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/on_create_added.jpg" alt="img"> </p></li>

<li><p>Now we need to use the <code>onOpened</code> method to get a reference to the EMDKManager. The EMDKListener interface will trigger this event when the EMDK is ready to be used. This must be implemented in order to get a reference to the EMDKManager APIs. This event will pass the EMDKManager instance and we assign it to the global variable <code>emdkManager</code> that we created in the previous steps. We then use that instance object to get an instance of ProfileManager and assign it to the global variable <code>profileManager</code>. This is how we will interface with the APIs in the rest of the code:</p>

<blockquote>
  <p>Note:
  Set the name of the method argument to <code>emdkManager</code>  </p>
</blockquote>

<pre class="prettyprint"><code>
this.emdkManager = emdkManager;

// Get the ProfileManager object to process the profiles
profileManager = (ProfileManager) emdkManager
        .getInstance(EMDKManager.FEATURE_TYPE.PROFILE);         
</code></pre>

<p>Now that we have a reference to ProfleManager, we use it to install and activate the profile we built earlier using the <code>processProfile</code> method. We could have also performed this action at a different time, say when someone pressed a button, but we chose to do it as soon as the EMDK was ready:  </p>

<pre class="prettyprint"><code>
if (profileManager != null) {
    String[] modifyData = new String[1];

<pre><code>// Call processPrfoile with profile name and SET flag to create the
// profile. The modifyData can be null.
EMDKResults results = profileManager.processProfile(profileName,
        ProfileManager.PROFILE_FLAG.SET, modifyData);

if (results.statusCode == EMDKResults.STATUS_CODE.CHECK_XML) {

} else {
    // Show dialog of Failure
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Failure");
    builder.setMessage("Failed to set Default Launcher...")
            .setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {
                        public void onClick                         (DialogInterface dialog,
                                int id) {

                        }
                    });
    AlertDialog alert = builder.create();
    alert.show();
}
</code></pre>

}
</code></pre>

<p>This <code>processProfile</code> method returns the result of applying a particular profile that we set using EMDK Profile Wizard in <a href="/emdk-for-android/6-3/api/core/EMDKResults">EMDKResults</a> reference. If the profile is successfully processed, it retuns the status as <code>CHECK_XML</code> and then we go on and parse the response to get further details whether the profile was applied successfully or not. Otherwise we display a Failure message in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a>.</p>

<blockquote>
  <p>Note: 1. There is a difference between processing a profile successfully and applying a profile successfully.</p>
  
  <p>Note: 2. If the status is other than <code>CHECK_XML</code>, we are simply displaying a failure message. You can actually go ahead and check different types of status and display the appropriate message accordingly, which is not in the scope of this sample tutorial.</p>
</blockquote>

<p>In case of <code>CHECK_XML</code> status, We retrieve  XML response string from the result using <code>getStatusString</code> method. So we will call a method <code>handleEMDKResult</code> to handle this <a href="/emdk-for-android/6-3/api/core/EMDKResults">EMDKResults</a>, which we will create in the next step.</p>

<pre class="prettyprint"><code>
// Method call to handle EMDKResult
handleEMDKResult(results);  
</code></pre>

<p>Your onOpened method should now look like this:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/on_opened_method.jpg" alt="img"></p></li>

<li><p>It shows error as we have not yet declared <code>handleEMDKResult</code> method. So let us create this method, which would get the XML String response from <a href="/emdk-for-android/6-3/api/core/EMDKResults">EMDKResults</a>, call the <code>parseXML</code> method to parse it and eventually call <code>displayResults</code> method to display output in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a>, which we would be declaring in coming steps. </p>

<pre class="prettyprint"><code>
// Method to handle EMDKResult by extracting response and parsing it
public void handleEMDKResult(EMDKResults results) {
    // Get XML response as a String
    String statusXMLResponse = results.getStatusString();

<pre><code>try {
    // Create instance of XML Pull Parser to parse the response
    XmlPullParser parser = Xml.newPullParser();
    // Provide the string response to the String Reader that reads
    // for the parser
    parser.setInput(new StringReader(statusXMLResponse));
    // Call method to parse the response
    parseXML(parser);
} catch (XmlPullParserException e) {
    e.printStackTrace();
}

// Method call to display results in a dialog
displayResults();
</code></pre>

}
</code></pre>

<p>Your <code>handleEMDKResult</code> method should now look like this:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/handle_emdk_result.jpg" alt="img"></p></li>

<li><p>You will see few errors as we have not declared the respective methods to parse the response and display result. Lets do it one by one. In this step, we will create a method <code>parseXML</code> that uses <a href="http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html">XML Pull Parser</a> to parse the XML string response and set the status and error parameters if any.</p>

<p>In the reponse, we are supposed to capture <code>name</code> and <code>desc</code> for <code>parm-error</code> tag, <code>type</code> and <code>desc</code> for <code>characteristic-error</code> tag in case of any errors.</p>

<pre class="prettyprint"><code>
// Method to parse the XML response using XML Pull Parser
public void parseXML(XmlPullParser myParser) {
int event;
try {
    event = myParser.getEventType();
    while (event != XmlPullParser.END_DOCUMENT) {
        String name = myParser.getName();
        switch (event) {
        case XmlPullParser.START_TAG:
            // Get Status, error name and description in case of
            // parm-error
            if (name.equals("parm-error")) {
                status = "Failure";
                errorName = myParser.getAttributeValue(null, "name");
                errorDescription = myParser.getAttributeValue(null,
                        "desc");

<pre><code>            // Get Status, error type and description in case of
            // parm-error
        } else if (name.equals("characteristic-error")) {
            status = "Failure";
            errorType = myParser.getAttributeValue(null, "type");
            errorDescription = myParser.getAttributeValue(null,
                    "desc");
        }
        break;
    case XmlPullParser.END_TAG:

        break;
    }
    event = myParser.next();

  }
} catch (Exception e) {
e.printStackTrace();
}
</code></pre>

}
</code></pre>

<p>Your complete <code>parseXML</code> method should now look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/parse_xml.jpg" alt="img"> </p></li>

<li><p>You will still see one error as we need to declare <code>displayResults</code> method to display the result of profile operation in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a>. Before displaying the results, we should form the content of the result to be shown first, specifically in case of errors. This could be done by creating <code>buildFailureMessage</code> method.</p>

<p>In this method, the error message in case of error is formed using following way: </p>

<ul>
<li>Name and description of error if the response contains <code>parm-error</code>.</li>

<li>Type and description of error if the response contains <code>characteristic-error</code>.</li>

<li>Name, type and description of error if the response contains both <code>parm-error</code> and <code>characteristic-error</code>.</li></ul>

<p>The <code>buildFailureMessage</code> method would have following code to match the above mentioned criteria.  </p>

<pre class="prettyprint"><code>
// Method to build failure message that contains name, type and
// description of respective error (parm, characteristic or both)
public String buildFailureMessage() {
  String failureMessage = "";
  if (!TextUtils.isEmpty(errorName) &amp;&amp; !TextUtils.isEmpty(errorType))
     failureMessage = errorName + " :" + "\n" + errorType + " :" + "\n"
            + errorDescription;
  else if (!TextUtils.isEmpty(errorName))
     failureMessage = errorName + " :" + "\n" + errorDescription;
  else
     failureMessage = errorType + " :" + "\n" + errorDescription;
  return failureMessage;

}
</code></pre>

<p><code>buildFailureMessage</code> method should look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/build_failure_message.jpg" alt="img"></p></li>

<li><p>In this step, we will add <code>displayResults</code> method to display the result of profile operation. If the Profile is successfully applied, we will display a <a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">Toast</a> with a success message and in case of any errors, we will display a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a> with the corresponding error details.</p>

<pre class="prettyprint"><code>
// Method to display results (Status, Error Name, Error Type, Error
// Description) in a
// dialog
public void displayResults() {
  if (TextUtils.isEmpty(errorDescription)) {

<pre><code> Toast.makeText(MainActivity.this,
        "Default Launcher changed successfully...",
        Toast.LENGTH_SHORT).show();
</code></pre>

  } else {
     // Alert Dialog to display the error details while Profile creation
     // operation of MX features
     AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            MainActivity.this);
     // set title
     alertDialogBuilder.setTitle(status);
     // call buildFailureMessage() method to set failure message in
     // dialog
     alertDialogBuilder.setMessage(buildFailureMessage());
     alertDialogBuilder.setCancelable(false).setPositiveButton("OK",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                }
            });
     // create alert dialog
     AlertDialog alertDialog = alertDialogBuilder.create();

<pre><code> // show it
 alertDialog.show();
</code></pre>

  }
}
</code></pre>

<p>The method <code>displayResults</code> should look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/display_results.jpg" alt="img"></p>

<p>You can see that all the errors are gone.  </p></li>

<li><p>Now let's override the "onDestroy" method so we can release the EMDKManager resources:  </p>

<pre class="prettyprint"><code>
@Override  
protected void onDestroy() {  
    // TODO Auto-generated method stub  
    super.onDestroy();  
    //Clean up the objects created by EMDK manager  
    emdkManager.release();  
} 
</code></pre>

<p>Your onDestroy method should now look like this:  </p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/on_destroy_method.jpg" alt="img"> </p>

<p>Settings at this point would allow you to apply EHS (Enterprise Home Screen) as the default launcher of your Mototrola Android device when we run the application.</p>

<p>But we also want to set the another launcher application (Galaxy Launcher) as the default launcher programmatically. So we will add the required code to implement it.</p></li>

<li><p>Remove the default "TextView", inside "res/layout/activity_main.xml".</p></li>

<li><p>Add the following code that has an Edittext to enter the package name of the launcher application and a button to implement operation.</p>

<pre class="prettyprint"><code>
&lt;TextView
android:id="@+id/label"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerInParent="true"
android:text="Enter Package Name:"
android:textSize="18sp"
android:textStyle="bold" /&gt;

&lt;EditText
android:id="@+id/package_name"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_below="@+id/label" android:hint="Package Name"
android:layout_margin="20dip" /&gt;

&lt;Button
android:id="@+id/btn_set_default_launcher"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/package_name"
android:layout_centerHorizontal="true"
android:layout_margin="5dip"
android:text="Set Default Launcher" /&gt;
</code></pre>

<p>The layout file 'activity_main.xml' inside "res/layout/" should now look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/activity_main.jpg" alt="img"></p></li>

<li><p>Now, In the Main activity make an entry of these UI elements using following code:</p>

<pre class="prettyprint"><code>
// Edit Text ro enter the package name of the launcher application
private EditText packageNameEditText;

// Button to set the application as default launcher
private Button setDefaultLauncherButton;
</code></pre>

<p>So far the code looks like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/ui_element_reference.jpg" alt="img"> </p></li>

<li><p>Get the reference of these UI elements in <code>onCreate</code> method.</p>

<pre class="prettyprint"><code>
packageNameEditText = (EditText) findViewById(R.id.package_name);        
setDefaultLauncherButton = (Button) findViewById(R.id.btn_set_default_launcher);
</code></pre>

<p>The <code>onCreate</code> method now looks like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/reference_on_create.jpg" alt="img"></p></li>

<li><p>In this step, we will write a function that takes package name of the launcher application as input parameter and programmatically sets that application as the default launcher application.</p>

<p>This method prepares the xml input for the <code>processProfile</code> method by accepting the package name of the launcher application provided by the user. It then calls the <code>handleEMDKResult</code> method that we have already created to handle the <a href="/emdk-for-android/6-3/api/core/EMDKResults">EMDKResults</a> and display the output.</p>

<p>The <code>processProfile</code> method then sets the changes to <code>Profile Manager</code> and returns the result to the <code>EMDKResults</code> as follows:</p>

<pre class="prettyprint"><code>
// Method that takes package name of the launcher application and
// programmatically sets that application as the default launcher.
public void setLauncherApplication(String packageName) {

<pre><code>// Prepare XML to modify the existing profile
String[] modifyData = new String[1];

modifyData[0] = "&amp;lt;?xml version=\"1.0\" encoding=\"utf-8\"?&amp;gt;"
        + "&amp;lt;characteristic type=\"Profile\"&amp;gt;"
        + "&amp;lt;parm name=\"ProfileName\" value=\"DefaultLauncherProfile\"/&amp;gt;"
        + "&amp;lt;characteristic type=\"AppMgr\"&amp;gt;"
        + "&amp;lt;parm name=\"Action\" value=\"SetDefaultLauncher\"/&amp;gt;"
        + "&amp;lt;parm name=\"Package\" value=\"" + packageName + "\"/&amp;gt;"
        + "&amp;lt;/characteristic&amp;gt;" + "&amp;lt;/characteristic&amp;gt;";

// Call process profile to modify the profile of specified profile
// name
EMDKResults results = profileManager.processProfile(profileName,
        ProfileManager.PROFILE_FLAG.SET, modifyData);

if (results.statusCode == EMDKResults.STATUS_CODE.CHECK_XML) {
// Method call to handle EMDKResult
handleEMDKResult(results);
} else {
// Show dialog of Failure
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Failure");
builder.setMessage("Failed to set Default Launcher...")
        .setPositiveButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int id) {

                    }
                });
AlertDialog alert = builder.create();
alert.show();
</code></pre>

  }
}
</code></pre>

<p>The method <code>setLauncherApplication</code> method should look like: </p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/set_launcher_app_method.jpg" alt="img"> </p></li>

<li><p>Let us call this method by implementing on click listener of the <code>setDefaultLauncherButton</code> button. This listener will get the package name entered by user from the Edit Text and call the <code>setLauncherApplication</code> method for a valid package name as follows:</p>

<pre class="prettyprint"><code>
// On Click Listener for the button
setDefaultLauncherButton.setOnClickListener(new OnClickListener() {

<pre><code>@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    // Get the package name entered by user from the Edit Text
    String packageName = packageNameEditText.getText().toString();

    if (TextUtils.isEmpty(packageName))
        // Invalid Package Name
        Toast.makeText(MainActivity.this,
                "Please enter a valid package name...",
                Toast.LENGTH_SHORT).show();
    else
        // Call the method to set launcher application as default
        // launcher
        setLauncherApplication(packageName);

}
</code></pre>

}); 
</code></pre>

<p>Finally the <code>onCreate</code> method should look like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/final_on_create_method.jpg" alt="img"></p></li>
</ol>

<p>That's it!!! We are done with all the coding and configuration part. Now let us run the application.</p>

<h2 id="runningtheapplication" class="anchor"><a class="heading-anchor" href="#runningtheapplication"><span></span></a>Running the Application</h2>

<ol>
<li><p>Connect the device (having the latest EMDK runtime) to USB port. </p>

<blockquote>
  <p>Note: <br>
  Make sure the device is in USB debug.</p>
</blockquote>

<p>The device currently has its own default launcher. Before Running the application, make sure that the two launcher applications (EHS and Galaxy Launcher) are already installed in the device.</p>

<p>The default launcher of TC 55 device looks like:</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/default_launcher.png" alt="img"></p></li>

<li><p>Run the application. The app sets the EHS (Enterprise Home Screen) application as the default launcher application as we had provided its package name while profile creation.</p>

<p>The app automatically closes by displaying a success message as the launcher is changed. </p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/ehs_launcher.png" alt="img"></p></li>

<li><p>Now we will set Galaxy Launcher as the default launcher application. In order to do that, press and hold the menu key.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/device_home_key.png" alt="img"></p>

<p>Select the "MxDefaultLauncherTutorial" app and the app will open.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/mx_default_launcher_app.png" alt="img"></p></li>

<li><p>Enter the package name of Galaxy Launcher application that we had obtained previously <strong>(com.epic.launcher.tw)</strong>.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/enter_package_name.png" alt="img"></p></li>

<li><p>Click <code>Set Default Launcher</code> button. The app will now set Galaxy Launcher as the default launcher application. The app will close automatically displaying a success message.</p>

<p><img src="../../images/MxDefaultLauncherTutorialImages/galaxy_launcher.png" alt="img"></p>

<blockquote>
  <p>Note:
  In case of failure, the app will display a failure message in an <a href="http://developer.android.com/reference/android/app/AlertDialog.html">Alert Dialog</a> and no change will take place.  </p>
</blockquote></li>
</ol>

<h2 id="importantprogrammingtips" class="anchor"><a class="heading-anchor" href="#importantprogrammingtips"><span></span></a>Important Programming Tips</h2>

<ol>
<li><p>It is required to do the following changes in the application's AndroidManifest.xml:  </p>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Include the permission for EMDK:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt;
</code></pre>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Use the EMDK library:  </li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre></li>

<li><p>Installing the EMDK for Android application without deploying the EMDK runtime on the Symbol device will fail because of missing shared library on the device. </p></li>

<li><p>Use the DataWedge v1.7.12 or higher version to test the ProfileManager.processProfile() for DataWedge profiles.</p></li>
</ol>

<h2 id="whatsnext" class="anchor"><a class="heading-anchor" href="#whatsnext"><span></span></a>What's Next</h2>

<p>Now that you have learned how to configure applications in the device using Mx App Manager feature, let us try some configuring some of the other Mx feature through profile creation. So in the next tutorial, we will concentrate on the "Power Manager" feature and try to explore this feature by creating a tutorial.</p><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        © 2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>