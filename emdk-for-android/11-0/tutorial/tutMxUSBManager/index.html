
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Manage USB Configurations">
    <title>Manage USB Configurations - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <!-- 6/13/24- a "crown" icon randomly appeared in the MX matrix today. Rob said it looked like sumo. 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script> -->
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 11.0
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/11-0/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/gettingstarted">
                                    Set Up
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/faq">
                                    FAQs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/apimenu">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/forum/search?keys=&amp;field_zebra_curated_tags_tid%5B%5D=184">
                                    <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Manage USB Configurations</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="manage-usb-configurations" class="anchor"><a class="heading-anchor" href="#manage-usb-configurations"><span></span></a>Manage USB Configurations</h1>
                                    <p>
                                            EMDK For Android
                                            11.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This guide will walk you through creating an EMDK For Android application that will use some new MX features introduced in EMDK for Android API to perform device configurations. MX represents a suite of Enterprise Features on top of standard, commercially available Android Open Source Project. So this tutorial will focus on managing USB configurations on your Zebra Android device using <a href="../../mx/usbmgr">USB Manager</a> feature of Mx.</p>

<p>So now we will create a tutorial and configure (Enable/Disable) the <a href="http://developer.android.com/tools/help/adb.html">ADB</a> mode of the Zebra Android device using MX <a href="../../mx/usbmgr">USB Manager</a> feature. ADB mode allows you to communicate with an emulator instance or connected Android-powered device in order to run your Android applications on them.   </p>

<h2 id="creatingtheproject" class="anchor"><a class="heading-anchor" href="#creatingtheproject"><span></span></a>Creating The Project</h2>

<blockquote>
  <p>Note: Provide "MxUSBManagerTutorial" as the project name for this tutorial.</p>
</blockquote>

<p>Start by creating a new Android Studio <a href="/emdk-for-android/11-0/tutorial/tutCreateProjectAndroidStudio">project</a>.  </p>

<h2 id="addingtheusbmanagerprofilefeature" class="anchor"><a class="heading-anchor" href="#addingtheusbmanagerprofilefeature"><span></span></a>Adding The USB Manager Profile Feature</h2>

<ol>
<li><p>Click <a href="/emdk-for-android/11-0/tutorial/tutAddProfileManagerFeature">here</a> to see how to add a specific feature to the Profile Manager.</p></li>

<li><p>Provide "USBManagerProfile" as the Profile Name for this tutorial.</p>

<blockquote>
  <p>Note: You can provide any Profile Name but make sure to access it with the similar name in the Android code.  </p>
</blockquote></li>

<li><p>Now, you can see all these MX features on the left hand side of the Profile Editor window. Select the "USB Manager" feature from the list and click "Right Arrow".</p>

<p><img src="../../images/MxUSBManagerTutorialImages/usb_feature.jpg" alt="img"></p>

<p>Provide some name in the "Name" field (Ex. MyUSBManager). The "Name" field is used to identify each feature, which is required when editing features programmatically. You can also keep the "Name" field empty.</p>

<p>You can see number of options for configuring different USB settings. Some of them are dependent on each other. We can configure every option in the profile editor window for USB Manager. As mentioned above we will configure the ADB mode (USB Debugging Mode) in this tutorial. Since we want to run our application on Zebra device, the ADB mode (USB Debugging Mode) is ON. So let us configure "USB ADB Usage" option. If you disable this option, you will not be able to run any Android application on the device as there will not be any communication between your machine and device. If you enable this option, the USB degugger will be turned ON and you can run your application on device again. So as of now we will keep "USB ADB Usage" option to "Do not change", which will keep the existing settings (In our case it is already ON). We will configure it programmatically by providing options (Enable/Disable) to the user on User Interface in coming steps.   </p>

<blockquote>
  <p>Note: If this option is disabled through Profile Wizard, you cannot enable this option manually by going into settings unless performed Factory Reset on it. So configure this feature programmatically to enable and disable ADB USB Usage in your application.      </p>
</blockquote>

<p><img src="../../images/MxUSBManagerTutorialImages/usb_manager_details.jpg" alt="img"></p>

<p><img src="../../images/MxUSBManagerTutorialImages/usb_manager_details_selected.jpg" alt="img">    </p></li>

<li><p>Click Apply to apply the settings we provided    </p>

<p><img src="../../images/MxUSBManagerTutorialImages/usb_profile_created.jpg" alt="img"></p></li>

<li><p>Click Finish and your USB Manager profile for configuring USB options is created.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/usb_manager_profile_created.jpg" alt="img"> </p></li>

<li><p>Click "Close".</p>

<blockquote>
  <p>Note: <br>
  Now the "EMDKConfig.xml" is created under "\assets" folder. This file will contain a definition of all of your profiles that you create. </p>
</blockquote></li>

<li><p>You can inspect the "EMDKConfig.xml" created under "\assets" folder to see it is reflecting the changes made to the parameters via EMDK Profile Manager GUI earlier.  However, it is advised that this file not be manually updated and only be controlled via the Profile Manager.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/emdk_config_file_entries.jpg" alt="img">    </p></li>
</ol>

<h2 id="enablingandroidpermissions" class="anchor"><a class="heading-anchor" href="#enablingandroidpermissions"><span></span></a>Enabling Android Permissions</h2>

<ol>
<li><p>Modify the Application's Manifest.xml to use the EMDK library and to set permission for the EMDK.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/manifest_file.jpg" alt="img"></p>

<p>You must first enable permissions for 'com.symbol.emdk.permission.EMDK':  </p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt; 
</code></pre>

<p>Then you must enable the library:   </p>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre>

<p>When done, your manifest.xml should look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/manifest_permissions_added.jpg" alt="img"> </p></li>
</ol>

<h2 id="addingsomecode" class="anchor"><a class="heading-anchor" href="#addingsomecode"><span></span></a>Adding Some Code</h2>

<ol>
<li><p>Now we will start to add some code. </p>

<p>First you must add references to the libraries:  </p>

<pre class="prettyprint"><code>
import com.symbol.emdk.*;  
import com.symbol.emdk.EMDKManager.EMDKListener;  
import android.widget.Toast;    
</code></pre>

<p>Then you must extend the activity to implement EMDKListener. </p>

<pre class="prettyprint"><code>
public class MainActivity extends Activity implements EMDKListener {  

<pre><code>.. .. .. .. .. .. ...  

@Override  
public void onClosed() {  
       // TODO Auto-generated method stub  
}  

@Override  
public void onOpened(EMDKManager emdkManager) {  
       // TODO Auto-generated method stub  
}  
</code></pre>

}      
</code></pre>

<p>We will now create some global variables to hold the profile name as well as instance objects of EMDKManager and ProfileManager ProfileManager with a status variable while applying the profile. It contains <a href="http://developer.android.com/reference/android/widget/RadioGroup.html">RadioGroup</a> to hold <a href="http://developer.android.com/guide/topics/ui/controls/radiobutton.html">Radio Buttons</a>, which allow user to select option to Enable or Disable ADB USB Usage. It also has a variable that contains user selected <a href="http://developer.android.com/guide/topics/ui/controls/radiobutton.html">Radio Button</a> value for further processing. Some of the variables are used to hold the name, type and description in case of any errors. These variables would be used throughout the code. </p>

<blockquote>
  <p>Note:
  Verify the Profile name in the code with the one created in the Profile Manager. They both should be identical.    </p>
</blockquote>

<pre class="prettyprint"><code>
// Assign the profile name used in EMDKConfig.xml
private String profileName = "USBManagerProfile";

// Declare a variable to store ProfileManager object
private ProfileManager profileManager = null;

// Declare a variable to store EMDKManager object
private EMDKManager emdkManager = null;

// Contains the parm-error name (sub-feature that has error)
private String errorName = "";

// Contains the characteristic-error type (Root feature that has error)
private String errorType = "";

// contains the error description for parm or characteristic error.
private String errorDescription = "";

// contains status of the profile operation
private String status = "";
</code></pre>

<p>Declaration of global variables look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/global_variables.jpg" alt="img"></p></li>

<li><p>Let us add the required User Interface for this tutorial that will have two <a href="http://developer.android.com/guide/topics/ui/controls/radiobutton.html">Radio Buttons</a> to Enable and Disable ADB USB Usage. The User Interface will also have a <a href="http://developer.android.com/reference/android/widget/Button.html">Button</a> to apply changes selected by the user. </p></li>
</ol>

<p>So go inside "res/layout/activity_main.xml" of the project and remove all the code. Add following code for the desired User Interface.</p>

<pre class="prettyprint"><code>
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="${relativePackage}.${activityClass}" &gt;

    &lt;TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/radioGroupADB"
        android:layout_margin="15dip"
        android:layout_marginBottom="20dp"
        android:text="Select your USB ADB Usage Option:"
        android:textSize="16sp"
        android:textStyle="bold" /&gt;

    &lt;RadioGroup
        android:id="@+id/radioGroupADB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" &gt;

        &lt;RadioButton
            android:id="@+id/radioEnableADB"
            android:layout_width="279dp"
            android:layout_height="wrap_content"
            android:text="Enable USB ADB Usage" /&gt;

        &lt;RadioButton
            android:id="@+id/radioDisableADB"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Disable USB ADB Usage" /&gt;
    &lt;/RadioGroup&gt;

    &lt;Button
        android:id="@+id/buttonSet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroupADB"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dip"
        android:text="Set" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>The layout file 'activity_main.xml' should now look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/activity_main_1.jpg" alt="img"></p>

<p>here is the remaining part:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/activity_main_2.jpg" alt="img">   </p>

<ol>
<li><p>Now come back to "MainActivity.java". In  <code>onCreate</code> method, we will get the references for UI element that we created in previous step followed by the listener for "Set" button. We will then call <code>getEMDKManager</code> so that the EMDK can be initialized and checked to see if it is ready. </p>

<pre class="prettyprint"><code>
// Add reference to UI elements
adbRadioGroup = (RadioGroup) findViewById(R.id.radioGroupADB);

// Call the listener for Set Button to update user selected settings
addSetButtonListener();

// The EMDKManager object will be created and returned in the callback.
EMDKResults results = EMDKManager.getEMDKManager(
        getApplicationContext(), this);

// Check the return status of getEMDKManager
if (results.statusCode == EMDKResults.STATUS_CODE.SUCCESS) {

<pre><code>// EMDKManager object creation success
</code></pre>

} else {

<pre><code>// EMDKManager object creation failed
</code></pre>

}
</code></pre>

<p>The <code>onCreate</code> method should look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/on_create_added.jpg" alt="img"></p></li>

<li><p>Now we need to use the <code>onOpened</code> method to get a reference to the EMDKManager. The EMDKListener interface will trigger this event when the EMDK is ready to be used. The EMDKListener interface must be implemented in order to get a reference to the EMDKManager APIs. This event will pass the EMDKManager instance and we assign it to the global variable <code>emdkManager</code> that we created in the previous steps. We then use that instance object to get an instance of ProfileManager and assign it to the global variable <code>profileManager</code>. This is how we will interface with the APIs in the rest of the code:</p>

<blockquote>
  <p>Note: 
  Rename the argument of <code>onOpened</code> method from <code>arg0</code> to <code>emdkManager</code>  </p>
</blockquote>

<pre class="prettyprint"><code>
// This callback will be issued when the EMDK is ready to use.
this.emdkManager = emdkManager;

// Get the ProfileManager object to process the profiles
profileManager = (ProfileManager) emdkManager
        .getInstance(EMDKManager.FEATURE_TYPE.PROFILE);
</code></pre>

<p>Your complete <code>onOpened</code> method should now look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/on_opened_method.jpg" alt="img"> </p></li>

<li><p>It displays an error as we have not added the listener method for "Set" button. So let us add <code>addSetButtonListener</code> by using following code:</p>

<pre class="prettyprint"><code>
// Set Button On Click Listener
    private void addSetButtonListener() {
        Button setButton = (Button) findViewById(R.id.buttonSet);
        setButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {

<pre><code>            int radioid = adbRadioGroup.getCheckedRadioButtonId();

            if (radioid == R.id.radioEnableADB)
                value = 1; // 1 - Enable USB ADB Usage

            if (radioid == R.id.radioDisableADB)
                value = 2; // 2 - Disable USB ADB Usage

            updateUSBSettings();
        }
    });
}
</code></pre>

</code></pre>

<p>The code sets variable <code>value</code> based on the <a href="http://developer.android.com/guide/topics/ui/controls/radiobutton.html">Radio Button</a> option selected by the user. This variable will be used to update the profile settings.</p>

<p><code>value</code> = 1 -&gt; Enable USB ADB Usage</p>

<p><code>value</code> = 2 -&gt; Disable USB ADB Usage</p>

<p>The <code>addSetButtonListener</code> method should look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/add_set_button_listener.jpg" alt="img"></p></li>

<li><p>Let us declare the <code>updateUSBSettings</code> method that will enable or disable ADB USB based on <code>value</code> attribute that gets updated depending on user selected option from Radio Button. This method prepares the xml input for the <code>processProfile</code> method based on <code>value</code> attribute.</p>

<p>This <code>processProfile</code> method returns the result of applying a particular profile that we set using EMDK Profile Wizard in <a href="/emdk-for-android/11-0/api">EMDKResults</a> reference. If the profile is successfully processed, it returns the status as <code>CHECK_XML</code> and then we go on and parse the response to get further details whether the profile was applied successfully or not. Otherwise we display a Failure message in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a>.</p>

<blockquote>
  <p>Note: 1. There is a difference between processing a profile successfully and applying a profile successfully.</p>
  
  <p>Note: 2. If the status is other than <code>CHECK_XML</code>, we are simply displaying a failure message. You can actually go ahead and check different types of status and display the appropriate message accordingly, which is not in the scope of this sample tutorial.</p>
</blockquote>

<p>In case of <code>CHECK_XML</code> status, We retrieve  XML response string from the result using <code>getStatusString</code> method. So the method <code>updateUSBSettings</code> has following code.</p>

<pre class="prettyprint"><code>
// Updates ADB USB settings by setting the profile based on user selected
// option on UI
public void updateUSBSettings() {
    // Reset values
    errorName = "";
    errorType = "";
    errorDescription = "";
    status = "";

<pre><code>try {

// Prepare XML to update the existing profile based on user selected
// settings
String[] modifyData = new String[1];
modifyData[0] = "&amp;lt;?xml version=\"1.0\" encoding=\"utf-8\"?&amp;gt;"
                + "&amp;lt;characteristic type=\"Profile\"&amp;gt;"
                + "&amp;lt;parm name=\"ProfileName\" value=\"USBManagerProfile\"/&amp;gt;"
                + "&amp;lt;characteristic type=\"UsbMgr\"&amp;gt;"
                + "&amp;lt;parm name=\"UsbADBUsage\" value=\"" + value + "\"/&amp;gt;"
                + "&amp;lt;/characteristic&amp;gt;" + "&amp;lt;/characteristic&amp;gt;";

// Call processPrfoile with profile name and SET flag to create
// the
// profile. The modifyData can be null.
EMDKResults results = profileManager.processProfile(profileName,
                ProfileManager.PROFILE_FLAG.SET, modifyData);

if (results.statusCode == EMDKResults.STATUS_CODE.CHECK_XML) {

// Get XML response as a String
String statusXMLResponse = results.getStatusString();

try {
  // Create instance of XML Pull Parser to parse the
  // response
  XmlPullParser parser = Xml.newPullParser();
  // Provide the string response to the String Reader that
  // reads
  // for the parser
  parser.setInput(new StringReader(statusXMLResponse));
  // Call method to parse the response
  parseXML(parser);
  } catch (XmlPullParserException e) {
    e.printStackTrace();
  }

  if (TextUtils.isEmpty(errorDescription)) {
    // Method call to display success results in a dialog
    displayResults("Success", "Profile Successfully Applied...");
  } else {
    // Method call to display failure results in a dialog
                displayResults(status, buildFailureMessage());
  }

  } else {
    // Method call to display failure results in a dialog
    displayResults("Failure", "Failed to apply profile...");
  }
} catch (Exception ex) {
        ex.printStackTrace();
}
</code></pre>

}
</code></pre>

<p>The <code>updateUSBSettings</code> method should look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/update_usb_settings_1.jpg" alt="img"></p>

<p>and the remaining part of this method looks like:   </p>

<p><img src="../../images/MxUSBManagerTutorialImages/update_usb_settings_2.jpg" alt="img"></p></li>

<li><p>It displays few errors as we have not declared them. So let us declare them one by one. Once the response is received in string, we will call <code>parseXML</code> method to parse it and eventually call <code>displayResults</code> method to display output in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a>. The <code>parseXML</code> method uses <a href="http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html">XML Pull Parser</a> to parse the XML string response and set the status and error parameters if any.</p>

<p>In the reponse, we are supposed to capture <code>name</code> and <code>desc</code> for <code>parm-error</code> tag, <code>type</code> and <code>desc</code> for <code>characteristic-error</code> tag in case of any errors. </p>

<pre class="prettyprint"><code>
// Method to parse the XML response using XML Pull Parser
public void parseXML(XmlPullParser myParser) {
    int event;
    try {
        event = myParser.getEventType();
        while (event != XmlPullParser.END_DOCUMENT) {
            String name = myParser.getName();
            switch (event) {
            case XmlPullParser.START_TAG:
                // Get Status, error name and description in case of
                // parm-error
                if (name.equals("parm-error")) {
                    status = "Failure";
                    errorName = myParser.getAttributeValue(null, "name");
                    errorDescription = myParser.getAttributeValue(null,
                            "desc");

<pre><code>                // Get Status, error type and description in case of
                // parm-error
            } else if (name.equals("characteristic-error")) {
                status = "Failure";
                errorType = myParser.getAttributeValue(null, "type");
                errorDescription = myParser.getAttributeValue(null,
                        "desc");
            }
            break;
        case XmlPullParser.END_TAG:

            break;
        }
        event = myParser.next();

    }
} catch (Exception e) {
    e.printStackTrace();
}
</code></pre>

}
</code></pre>

<p>Your complete <code>parseXML</code> method should now look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/parse_xml.jpg" alt="img"></p></li>

<li><p>Once the response is parsed, we prepare status and error detail messages to handle errors using <code>buildFailureMessage</code> method. , in order to display to the user. </p>

<p>In this method, the error message in case of error is formed using following way: </p>

<ul>
<li>Name and description of error if the response contains <code>parm-error</code>.</li>

<li>Type and description of error if the response contains <code>characteristic-error</code>.</li>

<li>Name, type and description of error if the response contains both <code>parm-error</code> and <code>characteristic-error</code>.</li></ul>

<p>The <code>buildFailureMessage</code> method would have following code to match the above mentioned criteria.  </p>

<pre class="prettyprint"><code>
// Method to build failure message that contains name, type and
// description of respective error (parm, characteristic or both)
public String buildFailureMessage() {
  String failureMessage = "";
  if (!TextUtils.isEmpty(errorName) &amp;&amp; !TextUtils.isEmpty(errorType))
     failureMessage = errorName + " :" + "\n" + errorType + " :" + "\n"
            + errorDescription;
  else if (!TextUtils.isEmpty(errorName))
     failureMessage = errorName + " :" + "\n" + errorDescription;
  else
     failureMessage = errorType + " :" + "\n" + errorDescription;
  return failureMessage;

}
</code></pre>

<p><code>buildFailureMessage</code> method should look like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/build_failure_message.jpg" alt="img"></p></li>

<li><p>You will still see few errors as we have not yet declared <code>displayResults</code> method. So we now declare this generic method that takes two string arguments viz. <code>title</code> and <code>description</code> and displays them in a <a href="http://developer.android.com/reference/android/app/AlertDialog.html">dialog</a> so that the user understands the status of its ADB USB operation. The field <code>title</code> represents the status of Profile Manager operation, which could be Success or Failure. The field <code>description</code> describes the respective status.</p>

<pre class="prettyprint"><code>
// Method to display results (Status, Error Name, Error Type, Error
// Description if any) in a
// dialog
public void displayResults(String title, String description) {
    // Alert Dialog to display the status of the Profile creation
    // operation of MX features
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            MainActivity.this);

<pre><code>alertDialogBuilder.setTitle(title);
alertDialogBuilder.setMessage(description);
alertDialogBuilder.setCancelable(false).setPositiveButton("OK",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // Cancels the dialog
            }
        });
// create alert dialog
AlertDialog alertDialog = alertDialogBuilder.create();
// show it
alertDialog.show();
</code></pre>

}
</code></pre>

<p>The method <code>displayResults</code> method looks like:</p>

<p><img src="../../images/MxUSBManagerTutorialImages/display_results.jpg" alt="img">  </p>

<p>You can see that all the errors are gone.  </p></li>

<li><p>Now let's override the "onDestroy" method so we can release the EMDKManager resources:  </p>

<pre class="prettyprint"><code>
@Override  
protected void onDestroy() {  
    // TODO Auto-generated method stub  
    super.onDestroy();  
    //Clean up the objects created by EMDK manager  
    emdkManager.release();  
} 
</code></pre>

<p>Your onDestroy method should now look like this:  </p>

<p><img src="../../images/MxUSBManagerTutorialImages/on_destroy_method.jpg" alt="img"> </p></li>
</ol>

<p>That's it!!! We are done with all the coding and configuration part that will let us configure (Enable/Disable) the USB ADB Usage on Zebra Android device. Now let us run the application.</p>

<h2 id="runningtheapplication" class="anchor"><a class="heading-anchor" href="#runningtheapplication"><span></span></a>Running the Application</h2>

<ol>
<li><p>Connect the device to a USB port (device must have USB debugging enabled). </p>

<blockquote>
  <p>Note: <br>
  Make sure the device is in USB debug.</p>
</blockquote>

<p>Before running the application, we will make sure that USB ADB mode is ON so that we can run this tutorial. So go to Settings -&gt; Developer Options. Make sure that "USB debugging" (ADB Mode) option is ON.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/adb_mode_on.png" alt="img"></p></li>

<li><p>Run the application.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/home_screen.png" alt="img"></p></li>

<li><p>Now select your USB ADB option (We will select "Disable") and press "Set" button. </p>

<p>You can see an <a href="http://developer.android.com/reference/android/app/AlertDialog.html">Alert Dialog</a> with a success message, which indicates that the app has successfully disabled USB ADB Mode.</p>

<p><img src="../../images/MxUSBManagerTutorialImages/success.png" alt="img"></p>

<blockquote>
  <p>Note: In case of any errors, you will see a Failure status with respective error message in that dialog.</p>
</blockquote></li>

<li><p>In other words, the USB debugging option on your Zebra device is turned OFF and you will not be able to run any Android application on this Zebra device. </p>

<p><img src="../../images/MxUSBManagerTutorialImages/adb_mode_off.png" alt="img"></p>

<p>You can select the enable option and press "Set" button to turn USB ADB Usage ON.</p>

<p>This is how USB Manager is used to configure USB ADB Mode on your Zebra Android device using Profile Wizard. </p></li>
</ol>

<h2 id="importantprogrammingtips" class="anchor"><a class="heading-anchor" href="#importantprogrammingtips"><span></span></a>Important Programming Tips</h2>

<ol>
<li><p>Perform the following changes in the application's <code>AndroidManifest.xml</code> file:  </p>

<pre class="prettyprint"><code>//Include the permission for EMDK:  

&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt;

//Use the EMDK library:  
:::xml
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre></li>

<li><p>Use DataWedge v1.7.12 or higher version to test the <code>ProfileManager.processProfile()</code> method for DataWedge profiles.</p></li>
</ol>

<h2 id="whatsnext" class="anchor"><a class="heading-anchor" href="#whatsnext"><span></span></a>What's Next</h2>

<p>Now that you have learned how to Manage USB configurations using USB Manager on your Zebra devices through applications, let us try to understand and implement some of the other new MX features introduced in V 3.0. So in the next tutorial, we will concentrate on the "XML Manager" MX feature and try to explore this feature by creating a tutorial.</p><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. Â©2025 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>