
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Data Capture Intents Tutorial">
    <title>Data Capture Intents Tutorial - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <!-- 6/13/24- a "crown" icon randomly appeared in the MX matrix today. Rob said it looked like sumo. 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script> -->
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 11.0
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/11-0/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/gettingstarted">
                                    Set Up
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/faq">
                                    FAQs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/apimenu">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/forum/search?keys=&amp;field_zebra_curated_tags_tid%5B%5D=184">
                                    <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/11-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Data Capture Intents Tutorial</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="data-capture-intents-tutorial" class="anchor"><a class="heading-anchor" href="#data-capture-intents-tutorial"><span></span></a>Data Capture Intents Tutorial</h1>
                                    <p>
                                            EMDK For Android
                                            11.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><div class="alert alert-danger alert-dismissible fade in" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button> <h4 id="regarding-emdk-barcode-scanning-apis" class="anchor"><a class="heading-anchor" href="#regarding-emdk-barcode-scanning-apis"><span></span></a>Regarding EMDK Barcode Scanning APIs</h4> <p><u>Zebra strongly recommends the use of DataWedge for all applications that require barcode scanning</u>. <b>While Zebra will continue to support EMDK Barcode APIs</b>, the efficiency and feature richness of intent-based interfaces make it a simpler alternative to app development using EMDK Barcode APIs.</p> <p> <b>DataWedge facts</b>:
    </p><ul>
        <li><b>DataWedge APIs have the same capabilities currently available in EMDK Barcode APIs.</b></li>
        <li><b>DataWedge intent-based APIs are easier and faster to implement than EMDK Barcode APIs.</b></li>
        <li><b>New features are added to DataWedge before being considered for EMDK Barcode APIs.</b></li>
    </ul>
    <br>
    <a href="/datawedge" class="btn btn-danger">Learn About DataWedge</a>  <p></p> </div>

<p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>DataWedge on Android has the ability to output captured data via Intents. This article describes how to use the DataWedge Intent output plug-in and the Data Capture API to receive captured data in your native Android application.</p>

<p>Knowledge of Android programming and familiarity with the Android intent mechanism are assumed. Also assumed is some familiarity with DataWedge and that you have read the DataWedge section in the Integrator Guide for your device.</p>

<blockquote>
  <p><strong>Note</strong>: As of EMDK 6.8, DataWedge can no longer be configured for data capture through Profile Manager. Zebra recommends using the <a href="/datawedge/latest/guide/api">DataWedge APIs</a> instead. </p>
</blockquote>

<h2 id="applicationlayout" class="anchor"><a class="heading-anchor" href="#applicationlayout"><span></span></a>Application Layout</h2>

<p>For this tutorial we created an Android application with a blank activity, to which we added the following layout.</p>

<pre class="prettyprint"><code>
&lt;?xml version="1.0" encoding="utf-8"?&gt;  
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent"  
    android:orientation="vertical" &gt;  
    &lt;LinearLayout  
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"  
        android:orientation="horizontal" &gt;  
        &lt;ImageView  
            android:id="@+id/logo"  
            style="@style/logo"  
            android:contentDescription="@string/title" /&gt;  
        &lt;LinearLayout  
            android:layout_width="fill_parent"  
            android:layout_height="wrap_content"  
            android:orientation="vertical" &gt;  
            &lt;TextView style="@style/title" /&gt;  
            &lt;TextView style="@style/copyright" /&gt;  
        &lt;/LinearLayout&gt;  
    &lt;/LinearLayout&gt;  
    &lt;View style="@style/hr" /&gt;  
    &lt;TextView style="@style/intro" /&gt;  
    &lt;EditText  
        android:id="@+id/editbox"  
        style="@style/editbox"  
        android:inputType="textMultiLine"  
        /&gt;  
&lt;/LinearLayout&gt; 
</code></pre>

<p>The things to note in the above layout are the ImageView and the EditText widgets.  The ImageView widget will effectively act as a button which can be used to toggle the scanner instead of pressing the trigger button on the device. The EditText widget will be used to display the data that we receive in the intent.</p>

<h2 id="intentstrings" class="anchor"><a class="heading-anchor" href="#intentstrings"><span></span></a>Intent Strings</h2>

<p>The intent we will receive from DataWedge will contain a bundle of data which we will be retrieving using the Intent.getStringtExtra() and Intent.getSerializableExtra() methods.  </p>

<h3 id="dataitems" class="anchor"><a class="heading-anchor" href="#dataitems"><span></span></a>Data Items</h3>

<p>The following is a list of the data item names that the bundle could contain.</p>

<ul>
<li>String SOURCE_TAG = "com.motorolasolutions.emdk.datawedge.source";</li>

<li>String contains the source of the data i.e. scanner or MSR</li>

<li>String DATA_STRING_TAG = "com.motorolasolutions.emdk.datawedge.data_string";


<ul>
<li>String contains the output data as a String. In the case of concatenated bar codes, the decode data is concatenated and sent out as a single string. In the case of MSR output, the data from the MSR tracks is concatenated and sent out as a single string.</li></ul>
</li>

<li>String LABEL_TYPE_TAG = "com.motorolasolutions.emdk.datawedge.label_type";</li>

<li>String contains the label type of the bar code.</li>

<li>String DECODE_DATA_TAG = "com.motorolasolutions.emdk.datawedge.decode_data";


<ul>
<li>Decode data returned as a list of byte arrays. In most cases there will be one byte array per decode. For bar-code symbologies that support concatenation (i.e. Codabar, Code128, MicroPDF, etc.), the decoded data is stored in multiple byte arrays (one byte array per bar code). Clients can get data in each byte array by passing an index.</li></ul>
</li>
</ul>

<h3 id="msrintentnames" class="anchor"><a class="heading-anchor" href="#msrintentnames"><span></span></a>MSR Intent Names</h3>

<p>Let's list the MSR intent names (in case we want to use these in the future).
The MSR related data added to the intent's bundle can be retrieved using the Intent.getStringtExtra() and Intent.getSerializableExtra() calls, using the following String tags:</p>

<ul>
<li>String MSR_DATA_TAG = "com.motorolasolutions.emdk.datawedge.msr_data";


<ul>
<li>The data from the MSR tracks is concatenated and sent out as a byte array.</li></ul>
</li>

<li>String MSR_TRACK1_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1";


<ul>
<li>MSR track 1 data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK2_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2";


<ul>
<li>MSR track 2 data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK3_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3";


<ul>
<li>MSR track 3 data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK1_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_status";


<ul>
<li>MSR track 1 decode status as an Integer where 0 indicates a successful decode.</li></ul>
</li>

<li>String MSR_TRACK2_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_status";


<ul>
<li>MSR track 2 decode status as an Integer where 0 indicates a successful decode.</li></ul>
</li>

<li>String MSR_TRACK3_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_status";


<ul>
<li>MSR track 3 decode status as an Integer where 0 indicates a successful decode.</li></ul>
</li>

<li>String MSR_TRACK1_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_encrypted";


<ul>
<li>MSR track 1 encrypted data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK2_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_encrypted";


<ul>
<li>MSR track 2 encrypted data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK3_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_encrypted";


<ul>
<li>MSR track 3 encrypted data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK1_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_hashed";


<ul>
<li>MSR track 1 hashed data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK2_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_hashed";


<ul>
<li>MSR track 2 hashed data is returned as a byte array.</li></ul>
</li>

<li>String MSR_TRACK3_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_hashed";


<ul>
<li>MSR track 3 hashed data is returned as a byte array.</li></ul>
</li>
</ul>

<h3 id="softscantriggerintentnames" class="anchor"><a class="heading-anchor" href="#softscantriggerintentnames"><span></span></a>Soft Scan Trigger Intent Names</h3>

<p>Here are the API intent names for the soft scan trigger:</p>

<ul>
<li>String ACTION_SOFTSCANTRIGGER = "com.motorolasolutions.emdk.datawedge.api.ACTION_SOFTSCANTRIGGER";


<ul>
<li>This is the intent action for the soft scan trigger.</li></ul>
</li>

<li>String EXTRA_PARAM = "com.motorolasolutions.emdk.datawedge.api.EXTRA_PARAMETER";


<ul>
<li>Parameter passed in the intent to specify the action the soft scan trigger should perform.  The following actions are recognized:</li></ul>
</li>

<li>String DWAPI_START_SCANNING = "START_SCANNING";


<ul>
<li>Start scanning.</li></ul>
</li>

<li>String DWAPI_STOP_SCANNING = "STOP_SCANNING";


<ul>
<li>Stop scanning.</li></ul>
</li>

<li>String DWAPI_TOGGLE_SCANNING = "TOGGLE_SCANNING";


<ul>
<li>Toggle scanning.</li></ul>
</li>
</ul>

<blockquote>
  <p>In the code that follows we will just be using the SOURCE_TAG, DATA_STRING_TAG and LABEL_TYPE_TAG intent data to display the intent data in the EditText widget.</p>
</blockquote>

<h2 id="handlingintents" class="anchor"><a class="heading-anchor" href="#handlingintents"><span></span></a>Handling Intents</h2>

<p>Incoming intents can be handled by overriding the onNewIntent method.</p>

<pre class="prettyprint"><code>
@Override  
public void onNewIntent(Intent i) {  
    handleDecodeData(i);  
}  
</code></pre>

<p>Our <em>handleDecodeData()</em> method will responsible for getting the data from the intent, formatting it and adding it to the end of the edit box; something like this:</p>

<pre class="prettyprint"><code>
private void handleDecodeData(Intent i) {  
    // check the intent action is for us  
    if ( i.getAction().contentEquals(com.motorolasolutions.emdk.sample.dwdemosample.RECVR) ) {       
        // define a string that will hold our output  


        String out = "";  
        // get the source of the data  
        String source = i.getStringExtra(SOURCE_TAG);  
        // save it to use later  
        if (source == null) source = "scanner";  
        // get the data from the intent  
        String data = i.getStringExtra(DATA_STRING_TAG);  
        // let's define a variable for the data length  
        Integer data_len = 0;  
        // and set it to the length of the data  
        if (data != null) data_len = data.length();  
        // check if the data has come from the barcode scanner  
        if (source.equalsIgnoreCase("scanner")) {  
            // check if there is anything in the data  
            if (data != null &amp;&amp; data.length() &gt; 0) {  
              // we have some data, so let's get it's symbology  
                String sLabelType = i.getStringExtra(LABEL_TYPE_TAG);  
                // check if the string is empty  
                if (sLabelType != null &amp;&amp; sLabelType.length() &gt; 0) {  
                    // format of the label type string is LABEL-TYPE-SYMBOLOGY  
                    // so let's skip the LABEL-TYPE- portion to get just the symbology  
                    sLabelType = sLabelType.substring(11);  
                }  
                else {  
                  // the string was empty so let's set it to "Unknown"  
                    sLabelType = "Unknown";  
                }  
              // let's construct the beginning of our output string  
                out = "Source: Scanner, " + "Symbology: " + sLabelType + ", Length: " + data_len.toString() + ", Data: ...\r\n";  
            }  
        }  
        // check if the data has come from the MSR  
        if (source.equalsIgnoreCase("msr")) {  
            // construct the beginning of our output string  
          out = "Source: MSR, Length: " + data_len.toString() + ", Data: ...\r\n";  
        }  


        // let's get our edit box view  
        EditText et = (EditText)findViewById(R.id.editbox);  
        // and get it's text into an editable string  
        Editable txt = et.getText();  
        // now because we want format our output  
      // we need to put the edit box text into a spannable string builder  
        SpannableStringBuilder stringbuilder = new SpannableStringBuilder(txt);  
        // add the output string we constructed earlier  
        stringbuilder.append(out);  
        // now let's highlight our output string in bold type  
      stringbuilder.setSpan(new StyleSpan(Typeface.BOLD), txt.length(), stringbuilder.length(), SpannableString.SPAN_EXCLUSIVE_EXCLUSIVE);  


      // then add the barcode or msr data, plus a new line, and add it to the string builder  
      stringbuilder.append(data + "\r\n");  
      // now let's update the text in the edit box  
      et.setText(stringbuilder);  
        // we want the text cursor to be at the end of the edit box  
        // so let's get the edit box text again  
        txt = et.getText();  
        // and set the cursor position at the end of the text  
        et.setSelection(txt.length());  
        // and we are done!  
  }  
} 
</code></pre>

<h2 id="togglingthescantrigger" class="anchor"><a class="heading-anchor" href="#togglingthescantrigger"><span></span></a>Toggling The Scan Trigger</h2>

<p>Our activity layout has an ImageView which we will use as a button to toggle the scan trigger.  This is done by using the Data Capture API.  The following code toggles the scan trigger each time the image is tapped.</p>

<pre class="prettyprint"><code>
ImageView img = (ImageView) findViewById(R.id.dwdemo_logo);  
img.setOnClickListener(new OnClickListener() {  
    @Override  
    public void onClick(View v) {  
        Intent i = new Intent();  
        i.setAction(ACTION_SOFTSCANTRIGGER);  
        i.putExtra(EXTRA_PARAM, DWAPI_TOGGLE_SCANNING);  
        DWDemoActivity.this.sendBroadcast(i);  
        Toast.makeText(v.getContext(), "Soft scan trigger toggled.", Toast.LENGTH_SHORT).show();  
    }  
}); 
</code></pre>

<h2 id="puttingitalltogether" class="anchor"><a class="heading-anchor" href="#puttingitalltogether"><span></span></a>Putting It All Together</h2>

<p>Let's put all that code together so that we can see what our final activity class should look like.</p>

<pre class="prettyprint"><code>
package com.motorolasolutions.emdk.sample.dwdemosample;  
import android.os.Bundle;  
import android.app.Activity;  
import android.content.Intent;  
import android.graphics.Typeface;  
import android.view.View;  
import android.view.View.OnClickListener;  
import android.widget.EditText;  
import android.widget.ImageView;  
import android.widget.Toast;  
import android.text.Editable;  
import android.text.SpannableString;  
import android.text.SpannableStringBuilder;  
import android.text.style.StyleSpan;  
public class MainActivity extends Activity {  
    // Tag used for logging errors  
    private static final String TAG = MainActivity.class.getSimpleName();  
    // Let's define some intent strings  
    // This intent string contains the source of the data as a string  
    private static final String SOURCE_TAG = "com.motorolasolutions.emdk.datawedge.source";  
    // This intent string contains the barcode symbology as a string  
    private static final String LABEL_TYPE_TAG = "com.motorolasolutions.emdk.datawedge.label_type";  
    // This intent string contains the barcode data as a byte array list  
    private static final String DECODE_DATA_TAG = "com.motorolasolutions.emdk.datawedge.decode_data";  
    // This intent string contains the captured data as a string  
    // (in the case of MSR this data string contains a concatenation of the track data)  
    private static final String DATA_STRING_TAG = "com.motorolasolutions.emdk.datawedge.data_string";  
    // Let's define the MSR intent strings (in case we want to use these in the future)  
    private static final String MSR_DATA_TAG = "com.motorolasolutions.emdk.datawedge.msr_data";  
    private static final String MSR_TRACK1_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1";  
    private static final String MSR_TRACK2_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2";  
    private static final String MSR_TRACK3_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3";  
    private static final String MSR_TRACK1_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_status";  
    private static final String MSR_TRACK2_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_status";  
    private static final String MSR_TRACK3_STATUS_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_status";  
    private static final String MSR_TRACK1_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_encrypted";  
    private static final String MSR_TRACK2_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_encrypted";  
    private static final String MSR_TRACK3_ENCRYPTED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_encrypted";  
    private static final String MSR_TRACK1_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track1_hashed";  
    private static final String MSR_TRACK2_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track2_hashed";  
    private static final String MSR_TRACK3_HASHED_TAG = "com.motorolasolutions.emdk.datawedge.msr_track3_hashed";  
    // Let's define the API intent strings for the soft scan trigger    private static final String ACTION_SOFTSCANTRIGGER = "com.motorolasolutions.emdk.datawedge.api.ACTION_SOFTSCANTRIGGER";  
    private static final String EXTRA_PARAM = "com.motorolasolutions.emdk.datawedge.api.EXTRA_PARAMETER";  
    private static final String DWAPI_START_SCANNING = "START_SCANNING";  
    private static final String DWAPI_STOP_SCANNING = "STOP_SCANNING";  
    private static final String DWAPI_TOGGLE_SCANNING = "TOGGLE_SCANNING";  
    private static String ourIntentAction = "com.motorolasolutions.emdk.sample.dwdemosample.RECVR";  


    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);  
        // Let's set the cursor at the end of any text in the editable text field        EditText et = (EditText)findViewById(R.id.editbox);  
        Editable txt = et.getText();  
        et.setSelection(txt.length());  


        // Since we will be using the image as a soft scan trigger toggle button        // let's handle the image on onClick event  
        ImageView img = (ImageView) findViewById(R.id.logo);  
        img.setOnClickListener(new OnClickListener() {  
            @Override  
            public void onClick(View v) {  
                // the image has been tapped so shoot off the intent to DataWedge                // to toggle the soft scan trigger  
                // Create a new intent  
                Intent i = new Intent();  
                // set the intent action using soft scan trigger action string declared earlier  
                i.setAction(ACTION_SOFTSCANTRIGGER);  
                // add a string parameter to tell DW that we want to toggle the soft scan trigger  
                i.putExtra(EXTRA_PARAM, DWAPI_TOGGLE_SCANNING);  
                // now broadcast the intent  
                MainActivity.this.sendBroadcast(i);  
                // provide some feedback to the user that we did something                Toast.makeText(v.getContext(), "Soft scan trigger toggled.", Toast.LENGTH_SHORT).show();  
            }  
        });  


        // in case we have been launched by the DataWedge intent plug-in  
        // using the StartActivity method let's handle the intent  
        Intent i = getIntent();  
        handleDecodeData(i);  
    }  


    // We need to handle any incoming intents, so let override the onNewIntent method  
    @Override  
    public void onNewIntent(Intent i) {  
        handleDecodeData(i);  
    }  


    // This method is responsible for getting the data from the intent  
    // formatting it and adding it to the end of the edit box  
    private void handleDecodeData(Intent i) {  
        // check the intent action is for us  
        if ( i.getAction().contentEquals(ourIntentAction) ) {  
            // define a string that will hold our output  
            String out = "";  
            // get the source of the data  
            String source = i.getStringExtra(SOURCE_TAG);  
            // save it to use later  
            if (source == null) source = "scanner";  
            // get the data from the intent  
            String data = i.getStringExtra(DATA_STRING_TAG);  
            // let's define a variable for the data length  


            Integer data_len = 0;  
            // and set it to the length of the data  
            if (data != null) data_len = data.length();  
            // check if the data has come from the barcode scanner  
            if (source.equalsIgnoreCase("scanner")) {  
                // check if there is anything in the data  
                if (data != null &amp;&amp; data.length() &gt; 0) {  
                    // we have some data, so let's get it's symbology  
                    String sLabelType = i.getStringExtra(LABEL_TYPE_TAG);  
                    // check if the string is empty  
                    if (sLabelType != null &amp;&amp; sLabelType.length() &gt; 0) {                        // format of the label type string is LABEL-TYPE-SYMBOLOGY  
                        // so let's skip the LABEL-TYPE- portion to get just the symbology  
                        sLabelType = sLabelType.substring(11);  
                    }  
                    else {  
                        // the string was empty so let's set it to "Unknown"  
                        sLabelType = "Unknown";  
                    }  


                    // let's construct the beginning of our output string  
                    out = "Source: Scanner, " + "Symbology: " + sLabelType + ", Length: " + data_len.toString() + ", Data: ...\r\n";  
                }  
            }  
            // check if the data has come from the MSR  
            if (source.equalsIgnoreCase("msr")) {  
                // construct the beginning of our output string  
                out = "Source: MSR, Length: " + data_len.toString() + ", Data: ...\r\n";  
            }  


            // let's get our edit box view  
            EditText et = (EditText)findViewById(R.id.editbox);  
            // and get it's text into an editable string  
            Editable txt = et.getText();  
            // now because we want format our output  


            // we need to put the edit box text into a spannable string builder  
            SpannableStringBuilder stringbuilder = new SpannableStringBuilder(txt);  
            // add the output string we constructed earlier  
            stringbuilder.append(out);  
            // now let's highlight our output string in bold type  
            stringbuilder.setSpan(new StyleSpan(Typeface.BOLD), txt.length(), stringbuilder.length(), SpannableString.SPAN_EXCLUSIVE_EXCLUSIVE);  
            // then add the barcode or msr data, plus a new line, and add it to the string builder  
            stringbuilder.append(data + "\r\n");  
            // now let's update the text in the edit box  
            et.setText(stringbuilder);  
            // we want the text cursor to be at the end of the edit box  
            // so let's get the edit box text again  
            txt = et.getText();  
            // and set the cursor position at the end of the text  
            et.setSelection(txt.length());  
            // and we are done!  
        }  
    }  
}  
</code></pre>

<h2 id="definingintentfilters" class="anchor"><a class="heading-anchor" href="#definingintentfilters"><span></span></a>Defining Intent Filters</h2>

<p>Having dealt with the coding of our activity, we now need to inform the system which implicit intents our application can handle.  For that we need to define an intent-filter as follows.</p>

<pre class="prettyprint"><code>
&lt;intent-filter&gt;  
    &lt;action android:name="com.motorolasolutions.emdk.sample.dwdemosample.RECVR"/&gt;  
    &lt;category android:name="android.intent.category.DEFAULT"/&gt;  
&lt;/intent-filter&gt;  
</code></pre>

<p>We will be using the com.motorolasolutions.emdk.sample.dwdemosample.RECVR action and the android.intent.category.DEFAULT category we have just defined above later on when we come to configure our DataWedge profile.</p>

<p>In this article DataWedge is configured to use the startActivity() method to send the intent. The startActivity() method causes a new activity to be launched. However since we do not want another instance of our activity launched each time we receive an intent, we need to specify the launch mode of our activity as single task.
android:launchMode="singleTask"</p>

<p>After adding the above, our AndroidManifest.xml should look something like this</p>

<pre class="prettyprint"><code>
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"  
    package="com.motorolasolutions.emdk.sample.dwdemosample"  
    android:versionCode="1"  
    android:versionName="1.0.0" &gt;  
    &lt;uses-sdk  
        android:minSdkVersion="10"  
        android:targetSdkVersion="10" /&gt;  
    &lt;application  
        android:icon="@drawable/ic_launcher"  
        android:label="@string/app_name"  
        android:theme="@style/AppTheme" &gt;  
        &lt;activity  
            android:name=".MainActivity"  
            android:label="@string/app_name"  
            android:launchMode="singleTask" &gt;  
            &lt;intent-filter&gt;  
                &lt;action android:name="android.intent.action.MAIN" /&gt;  
                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;  
            &lt;/intent-filter&gt;  
            &lt;intent-filter&gt;  
                &lt;action android:name="com.motorolasolutions.emdk.sample.dwdemosample.RECVR"/&gt;  
                &lt;category android:name="android.intent.category.DEFAULT"/&gt;  
            &lt;/intent-filter&gt;  
            &lt;/activity&gt;  
    &lt;/application&gt;  
&lt;/manifest&gt;  
</code></pre>

<h2 id="configuringdatawedge" class="anchor"><a class="heading-anchor" href="#configuringdatawedge"><span></span></a>Configuring DataWedge</h2>

<p>Now we need to configure DataWedge to send the desired intent to our application.</p>

<p>The following steps will help you get started</p>

<ul>
<li>Launch DataWedge</li>

<li>Create a new profile and give it a name such as "dwdemosample"</li>

<li>Edit the profile</li>

<li>Go into Associated apps, tap the menu button, and add a new app/activity</li>

<li>For the application select com.motorolasolutions.emdk.sample.dwdemosample</li>

<li>For the activity select com.motorolasolutions.emdk.sample.dwdemosample.MainActivty</li>

<li>Go back and disable the keystroke output plug-in</li>

<li>Enable the intent output plug-in</li>

<li>For the intent action enter com.motorolasolutions.emdk.sample.dwdemosample.RECVR</li>

<li>For the intent category enter android.intent.category.DEFAULT</li>
</ul>

<h2 id="summary" class="anchor"><a class="heading-anchor" href="#summary"><span></span></a>Summary</h2>

<p>That's it.  You should now be able to scan a bar-code and see it appear in the sample application.
In this article, we covered:</p>

<ul>
<li>DataWedge intent strings</li>

<li>Handling intents from Data Capture</li>

<li>Receiving barcode/MSR data</li>

<li>Sending intents to Data Capture</li>

<li>Toggling of the soft scan trigger</li>

<li>Defining intent filters</li>

<li>Configuring DataWedge to send intents to our application</li>
</ul>

<!-- 4/24/18- dead link removed. No corresponding folder or sample found. -EC
## Sample Code
Download the source for this project in the [associated sample](/emdk-for-android/11-0/guide/sample/sampledatacaptureintent).

 --><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2024 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>