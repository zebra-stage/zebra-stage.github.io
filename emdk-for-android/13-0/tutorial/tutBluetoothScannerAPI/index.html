
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Using Bluetooth Scanner API">
    <title>Using Bluetooth Scanner API - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <!-- 6/13/24- a "crown" icon randomly appeared in the MX matrix today. Rob said it looked like sumo. 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script> -->
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <li class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> EMDK For Android 13.0
                          <span class="caret"></span></button>
                          <ul class="dropdown-menu">
                                <li><a onclick="changeVersion('5-0','4-2','/emdk-for-android/4-2/guide/about')">EMDK For Android 4.2</a></li>
                                <li><a onclick="changeVersion('5-0','4-0','/emdk-for-android/4-0/guide/about')">EMDK For Android 4.0</a></li>
                          </ul>
                        </li>                    
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/emdk-for-android/13-0/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/guide/gettingstarted">
                                    Set Up
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/tutorial/">
                                    Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/samples">
                                    Samples
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/guide/programming-guides">
                                    Guides
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/guide/profile-manager-guides">
                                    Profile Manager
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/faq">
                                    FAQs
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/apimenu">
                                    APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/forum/search?keys=&amp;field_zebra_curated_tags_tid%5B%5D=184">
                                    <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/emdk-for-android/13-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>Using Bluetooth Scanner API</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="using-bluetooth-scanner-api" class="anchor"><a class="heading-anchor" href="#using-bluetooth-scanner-api"><span></span></a>Using Bluetooth Scanner API</h1>
                                    <p>
                                            EMDK For Android
                                            13.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This guide will walk you through creating an EMDK For Android application that will use <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a> introduced in EMDK V 3.1, to perform pairing with Bluetooth Scanning device using Bluetooth Pairing Utility of Bluetooth Scanner API.</p>

<blockquote>
  <p>Note: The Bluetooth Scanner API is a part of <a href="/emdk-for-android/13-0/api">Barcode API</a>.</p>
</blockquote>

<p>Initially, the Bluetooth Scanner is not connected to the device. So the Bluetooth Pairing Utility would turn ON the Bluetooth of the device where the app is running (Ex. TC55) if not already turned ON. Once that is done, the utility will ask you to scan a Barcode in the app using Bluetooth Scanner (Ex. RS507). After scanning the Barcode, the utility will start pairing process and pair the Bluetooth Scanning device (Ex. RS507) with your device where the app is running (Ex. TC55).</p>

<p>In this tutorial, we will explore the <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a> by using it for developing a basic application that will pair the device with Bluetooth Scanner by allowing Bluetooth Scanner to scan the Barcode in the app through Bluetooth Pairing Utility.</p>

<blockquote>
  <p>Note: The <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a> does not use Profile Wizard to pair with Bluetooth Scanner and everything needs to be configured programmatically through code.</p>
</blockquote>

<h2 id="creatingtheproject" class="anchor"><a class="heading-anchor" href="#creatingtheproject"><span></span></a>Creating The Project</h2>

<blockquote>
  <p>Note: Provide "BluetoothScannerTutorial" as the project name for this tutorial.</p>
</blockquote>

<p>Start by creating a new Android Studio <a href="/emdk-for-android/13-0/tutorial/tutCreateProjectAndroidStudio">project</a>.</p>

<h2 id="enablingandroidpermissions" class="anchor"><a class="heading-anchor" href="#enablingandroidpermissions"><span></span></a>Enabling Android Permissions</h2>

<ol>
<li><p>Modify the Application's Manifest.xml to use the EMDK library and to set permission for the EMDK to scan the barcodes.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/manifest_file.jpg" alt="img"></p>

<p>You must first enable permissions for 'com.symbol.emdk.permission.EMDK':</p>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK" /&gt;
</code></pre>

<p>Then you must enable the library for EMDK:</p>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk" /&gt;
</code></pre>

<p>When done, your manifest.xml should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/manifest_permissions_added.jpg" alt="img"></p></li>
</ol>

<h2 id="addingsomecode" class="anchor"><a class="heading-anchor" href="#addingsomecode"><span></span></a>Adding Some Code</h2>

<ol>
<li><p>Now we will start to add some code.</p>

<p>First you must add references to the libraries:</p>

<pre class="prettyprint"><code>
import com.symbol.emdk.EMDKManager;
import com.symbol.emdk.barcode.BarcodeManager;
</code></pre>

<p>Then you must make the activity to implement <a href="/emdk-for-android/13-0/api">EMDKListener</a>.</p>

<p>After that you also need to implement <a href="/emdk-for-android/13-0/api">BarcodeManager.​ScannerConnectionListener</a>, which is an interface to notify the client when the scanner device (Ex. RS507) has been connected or disconnected to the mobile device (Ex. TC55). Override its <code>onConnectionChange</code> method, which would be called when the scanner gets connected or disconnected to the mobile device.</p>

<pre class="prettyprint"><code>
public class MainActivity extends Activity EMDKManager.EMDKListener, BarcodeManager.ScannerConnectionListener {

<pre><code>.. .. .. .. .. .. ...

@Override
public void onOpened(EMDKManager emdkManager) {

}

@Override
public void onClosed() {

}

@Override
public void onConnectionChange(ConnectionStatus connectionStatus) {

}
</code></pre>

}
</code></pre>

<p>We will now create some global variables to hold the instance objects of EMDKManager and BarcodeManager. These variables would be used throughout the code.</p>

<p>We will then add some UI elements, which is just a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> for notifying intermediate status operations performed during pairing.</p>

<pre class="prettyprint"><code>
// Text View to display status during pairing operation
private TextView statusView = null;

// Declare a variable to store EMDKManager object
private EMDKManager emdkManager = null;

// Declare a variable to store Barcode Manager object
private BarcodeManager barcodeManager = null;

// Declare a variable to hold scanner device to scan
private Scanner scanner = null;
</code></pre>

<p>The code till here looks like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/variables_added.jpg" alt="img"></p></li>

<li><p>Now, let us design a simple UI that has simply has a <a href="http://developer.android.com/reference/android/widget/TextView.html">TextView</a> to indicate status during pairing operation.</p>

<p>So, remove all the code, inside "res/layout/activity_main.xml" and add following XML layout code for UI.</p>

<pre class="prettyprint"><code>
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="16dip"
tools:context=".MainActivity" &gt;

  &lt;TextView
   android:id="@+id/textViewStatus"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_centerInParent="true"
   android:text="" /&gt;

  &lt;TextView
   android:id="@+id/textViewStatusTitle"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_above="@+id/textViewStatus"
   android:layout_centerHorizontal="true"
   android:layout_marginBottom="15dp"
   android:text="Status:" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>The layout should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/layout_added.jpg" alt="img"></p></li>

<li><p>In the <code>onCreate</code> method, we take reference of UI elements that are declared in "res/layout/activity_main.xml" in order to use them in our <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a>. We then call getEMDKManager so that the EMDK can be initialized and checked to see if it is ready.</p>

<pre class="prettyprint"><code>
// Reference to UI elements
statusView = (TextView) findViewById(R.id.textViewStatus);

// The EMDKManager object will be created and returned in the callback.
EMDKResults results = EMDKManager.getEMDKManager(
        getApplicationContext(), this);

// Check the return status of getEMDKManager and update the status Text
// View accordingly
if (results.statusCode != EMDKResults.STATUS_CODE.SUCCESS) {
    statusView.setText("Status: "
            + "EMDKManager object request failed!");
}
</code></pre>

<p>So the complete <code>onCreate</code> method looks like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/on_create_added.jpg" alt="img"></p></li>

<li><p>Get the <a href="/emdk-for-android/13-0/api">EMDK Manager</a> in the <code>onOpened</code> method, update the <code>StatusView</code> TextView with a message and add the <a href="/emdk-for-android/13-0/api">ScannerConnectionListener</a> to get the Connected/Disconnected events between Bluetooth Scanner and Mobile by adding following code in <code>onOpened</code> method.</p>

<pre class="prettyprint"><code>
// Update status view with EMDK Open Success message
statusView.setText("Status: " + "EMDK open success!");

this.emdkManager = emdkManager;
// Get the Barcode Manager Instance
barcodeManager = (BarcodeManager) emdkManager
        .getInstance(EMDKManager.FEATURE_TYPE.BARCODE);
// Add the Scanner Connection Listener to receive Connected/Disconnected events
if (barcodeManager != null) {
    barcodeManager.addConnectionListener(this);
}

// Initialize Scanner
initScanner();
</code></pre>

<p>The <code>onOpened</code> method should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/on_opened_method.jpg" alt="img"></p></li>

<li><p>You will see error as we have not added <code>initScanner</code> method for initializing Bluetooth Scanner of our mobile device (Ex TC55). <code>initScanner</code> method gets the number of supported devices in a list.</p>

<pre class="prettyprint"><code>
List&lt;ScannerInfo&gt; deviceList = barcodeManager
            .getSupportedDevicesInfo();
</code></pre>

<p>It then iterates through this list of devices and checks one with "Bluetooth Scanner" by refering friendly name. If the list has Bluetooth Scanner device, it initializes Scanner object with Bluetooth Scanner.</p>

<pre class="prettyprint"><code>
for (ScannerInfo scannerInfo : deviceList){
        if(scannerInfo.getFriendlyName().equalsIgnoreCase("Bluetooth Scanner"))
            scanner = barcodeManager.getDevice(scannerInfo);
}
</code></pre>

<p>If the Scanner Object is still null after iteration, your device doesn't support Bluetooth Scanner. Finally, we enable the Bluetooth Scanner.</p>

<pre class="prettyprint"><code>
scanner.enable();
</code></pre>

<p>So the complete source code for <code>initScanner</code> method would look like:</p>

<pre class="prettyprint"><code>
// Initialize Bluetooth Scanner
private void initScanner() {

<pre><code>if (scanner == null) {
    // Get a list of supported scanner devices
    List&amp;lt;ScannerInfo&amp;gt; deviceList = barcodeManager
            .getSupportedDevicesInfo();

    // Iterate through Scanner devices and check if it supports Bluetooth Scanner
    for (ScannerInfo scannerInfo : deviceList){
        if(scannerInfo.getFriendlyName().equalsIgnoreCase("Bluetooth Scanner"))
            scanner = barcodeManager.getDevice(scannerInfo);
    }
    // If null, then your device does not support Bluetooth Scanner
    if(scanner == null) {
        statusView.setText("Bluetooth Scanner not supported!!!");
        return;
    }else{
        // Supports Bluetooth Scanner
        try {
            // Enable the Scanner
            scanner.enable();
        } catch (ScannerException e) {
            statusView.setText("Status: " + e.getMessage());
        }
    }
}
</code></pre>

}
</code></pre>

<p>This should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/init_scanner.jpg" alt="img"></p></li>

<li><p>Now, we will add a method to de-initialize the Scanner named <code>deInitScanner</code>. This method will perform following operations in the same sequence.</p>

<ul>
<li>Cancel any pending read operations.</li>

<li>Disable the Scanner.</li>

<li>Release the Scanner resource.</li>

<li>Eventually set the Scanner object to <code>null</code>.</li></ul>

<p>The source code for <code>deInitScanner</code> method should look like:</p>

<pre class="prettyprint"><code>
// DeInitialize Scanner
private void deInitScanner() {
    if (scanner != null) {
        try {
            // Cancel pending reads
            scanner.cancelRead();
            // Disable Scanner
            scanner.disable();
            // Release Scanner
            scanner.release();

<pre><code>    } catch (ScannerException e) {
        statusView.setText("Status: " + e.getMessage());
    }

    scanner = null;
}
</code></pre>

}
</code></pre>

<p>The method should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/de_init_scanner.jpg" alt="img"></p></li>

<li><p>Let's add an <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a> for asynchronously updating the StatusView. This would be useful in the <code>onConnectionChange</code> callback method that updates the status to Connected/Disconnected depending upon the result. So <code>AsyncStatusUpdate</code> is an <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a> that would simply update the Status View with following code.</p>

<pre class="prettyprint"><code>
// AsyncTask for Updating Status in statusView during pairing operation
private class AsyncStatusUpdate extends AsyncTask&lt;String, Void, String&gt; {

<pre><code>@Override
protected String doInBackground(String... params) {
    return params[0];
}

@Override
protected void onPostExecute(String result) {
    // Update Status View
    statusView.setText("Status: " + result);
}
</code></pre>

}
</code></pre>

<p>The <code>AsyncStatusUpdate</code> should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/async_status_update.jpg" alt="img"></p></li>

<li><p>We would now add the code to update <code>statusView</code> in <code>onConnectionChange</code> callback method. This method would be invoked when the scanner device has been connected or disconnected to the mobile device.</p>

<p>So we will first get the connection state and friendly name of the Scanner device received through <code>onConnectionChange</code> callback method.</p>

<pre class="prettyprint"><code>
// Returns the Connection State for Bluetooth Scanner through callback
String statusBT = connectionStatus.getConnectionState().toString();
// Returns the Friendly Name of the Scanner through callback
String scannerNameBT = connectionStatus.getScannerInfo()
        .getFriendlyName();
</code></pre>

<p>If the friendly name is "Bluetooth Scanner", then we would update the statusView with the Scanner Name and its state.</p>

<p>Later, if the state is <code>CONNECTED</code>, we would invoke <code>initScanner</code> method and <code>deInitScanner</code> method for the <code>DISCONNECTED</code> state.</p>

<p>So the source code for <code>onConnectionChange</code> callback method with the above mentioned steps would look like:</p>

<pre class="prettyprint"><code>
@Override
public void onConnectionChange(ConnectionStatus connectionStatus) {
    String status = "";
    String scannerName = "";

<pre><code>// Returns the Connection State for Bluetooth Scanner through callback
String statusBT = connectionStatus.getConnectionState().toString();
// Returns the Friendly Name of the Scanner through callback
String scannerNameBT = connectionStatus.getScannerInfo()
        .getFriendlyName();

// Get the friendly name of our device's Scanner
scannerName = scanner.getScannerInfo().getFriendlyName();

// Check for the Bluetooth Scanner
if (scannerName.equalsIgnoreCase(scannerNameBT)) {
    // If Bluetooth Scanner, update the status view
    status = scannerNameBT + ":" + statusBT;
    new AsyncStatusUpdate().execute(status);
    // Initialize or De-Initialize Bluetooth Scanner
    // device based on Connection State
    switch (connectionStatus.getConnectionState()) {
        case CONNECTED:
            // Initialize Scanner
            initScanner();
            break;
        case DISCONNECTED:
            // De-Initialize Scanner
            deInitScanner();
            break;
    }
}
</code></pre>

}
</code></pre>

<p>The <code>onConnectionChange</code> method should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/on_connection_change.jpg" alt="img"></p></li>

<li><p>Finally, release all the resources in <code>onClosed</code> method. So it would remove the <code>ScannerConnectionListener</code> and release the <code>EMDKManager</code> using following code.</p>

<pre class="prettyprint"><code>
@Override
public void onClosed() {
    if (emdkManager != null) {
        // Remove the connection listener
        if (barcodeManager != null) {
            barcodeManager.removeConnectionListener(this);
        }
        // Release EMDK Manager
        emdkManager.release();
        emdkManager = null;
    }
    statusView
            .setText("Status: "
                    + "EMDK closed unexpectedly! Please close and restart the application.");
}
</code></pre>

<p>The <code>onClosed</code> method should look like:</p>

<p><img src="../../images/BluetoothScannerTutorialImages/on_closed.jpg" alt="img"></p></li>
</ol>

<p>That's it!!! We are done with all the coding part that will let us perform pairing with Bluetooth Scanning device using Bluetooth Pairing Utility of <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a> introduced in EMDK V 3.1. Now let us run the application.</p>

<h2 id="runningtheapplication" class="anchor"><a class="heading-anchor" href="#runningtheapplication"><span></span></a>Running the Application</h2>

<ol>
<li><p>Connect the device to a USB port.</p></li>

<li><p>Run the application.</p></li>
</ol>

<blockquote>
  <p>Note: Initially the bluetooth of the device is turned OFF.</p>
</blockquote>

<p><img src="../../images/BluetoothScannerTutorialImages/home_screen.png" alt="img"></p>

<p>So it displays a <a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">Toast</a> saying bluetooth scanner is not connected, which would start Bluetooth Pairing Utility to pair devices.</p>

<ol>
<li><p>It will first ask you to enable the Bluetooth of the device.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/enable_bluetooth.png" alt="img"></p></li>

<li><p>Click "Allow" and the Bluetooth Scanning Utility would turn your device's Bluetooth ON.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/turning_on_bluetooth.png" alt="img"></p></li>

<li><p>It would display a screen with a Barcode, which needs to be scanned to pair with this device.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/barcode_screen.png" alt="img"></p></li>

<li><p>You can take a Bluetooth Scanning device (Ex RS507) and scan the Barcode shown on the screen of your app (App is on TC55) and Bluetooth Scanning Utility would pair these two devices.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/bluetooth_scanner_connected.png" alt="img"></p></li>

<li><p>You can see a <a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">Toast</a> confirming that the two devices (TC55 &amp; RS507) have been paired and connected to each other along with the updated status on <code>statusView</code>.</p></li>

<li><p>Now, lets check under Bluetooth Settings of the Mobile device (TC55) for further confirmation. So go to device's Settings -&gt; Bluetooth.</p>

<p><img src="../../images/BluetoothScannerTutorialImages/devices_paired.png" alt="img"></p></li>

<li><p>You can see RS507 under Paired devices that further confirms pairing. This is how we can perform pairing of Mobile device (Ex. TC55) with Bluetooth Scanning device (Ex. RS507) using Bluetooth Pairing Utility of <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a></p></li>
</ol>

<h2 id="importantprogrammingtips" class="anchor"><a class="heading-anchor" href="#importantprogrammingtips"><span></span></a>Important Programming Tips</h2>

<ol>
<li><p>Changes the application's <code>AndroidManifest.xml</code> file as follows:</p>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Include the permission for EMDK:</li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-permission android:name="com.symbol.emdk.permission.EMDK"/&gt;
</code></pre>

<blockquote>
  <p>Note:</p>
  
  <ul>
  <li>Use the EMDK library:</li></ul>
</blockquote>

<pre class="prettyprint"><code>
&lt;uses-library android:name="com.symbol.emdk"/&gt;
</code></pre></li>
</ol>

<h2 id="whatsnext" class="anchor"><a class="heading-anchor" href="#whatsnext"><span></span></a>What's Next</h2>

<p>Now that you have learned how to perform pairing with Bluetooth Scanning device using Bluetooth Pairing Utility of <a href="/emdk-for-android/13-0/api">Bluetooth Scanner API</a>, in the next tutorial we would concentrate on <a href="/emdk-for-android/13-0/api">ScanAndPair APIs</a> and develop an application to demonstrate its use.</p><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2024 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>