
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta content="en-us" http-equiv="Content-Language"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Link-OS Multiplatform SDK Webservices Intro</title>
    <style type="text/css">

        /* General styling */

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            font-size: 0.8em;
            margin: 0;
            padding: 0;
            background-color: #ddd;
        }

        a:link, a:visited {
            text-decoration: none;
            color: #3A75C4;
        }

        a:hover, a:focus {
            text-decoration: none;
            color: #d09c00;
        }

        a:active {
            text-decoration: none;
            color: #3A75C4;
        }

        .table-container {
            padding: 0 15px;
        }

        table {
            width: 100%;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        thead,
        tbody {
            width: 100%;
        }

        thead {
            font-weight: bold;
        }

        thead td {
            background-color: #ddd;
            white-space: nowrap;
        }

        tbody tr:nth-of-type(even) {
            background-color: #eee;
        }

        td {
            padding: 6px 12px;
        }

        .clearfix:after {
            content: "";
            display: table;
            clear: both;
        }

        .hide-mobile {
            display: auto;
        }

        /* Unstyle anchor tags that only serve as other anchor tags' href destinations */
        .a-navigation:hover,
        .a-navigation:focus,
        .a-navigation:link,
        .a-navigation:visited,
        .a-navigation:active {
            color: inherit;
        }

        /* Entire page */

        #pageContainer {
            max-width: 1080px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        #mainDocumentation,
        #mainFooter {
            padding: 15px 30px;
        }

        /* Main header */

        #mainHeader {
            display: block;
            max-width: 1080px;
            margin: 0 auto;
            color: white;
            background-color: #000000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            position: relative;
        }

       #zebraLogo {
            position: absolute;
            top: 15px;
            left: 20px;
            height: 50px;
            width: 141px;
        }

        /* Main navigation */

        #mainNavigation {
            margin: 0 30px 0 0;
            padding: 0;
            float: right;
        }

        #mainNavigation a,
        #mainNavigation a:active,
        #mainNavigation a:focus,
        #mainNavigation a:visited {
            text-decoration: none;
            color: inherit;
        }

        #mainNavigation a:hover {
            color: #ffcc33;
        }

        #mainNavigation li {
            list-style: none;
        }

        .reg {
            vertical-align: top;
            font-size: 0.5em;
        }

        .nav-button-container {
            display: table-cell;
            vertical-align: middle;
            height: 80px;
            padding-left: 20px;
        }

        .nav-button {
            display: block;
        }

        /* Main header text */

        #mainHeaderTextContainer {
            font-size: 2em;
            margin-top: 15px;
            margin-bottom: 30px;
            text-align: right;
            font-weight: bold;
        }

        /* Main content */

        #mainDocumentation {
            max-width: 768px;
            margin: 0 auto;
        }

        .main-section {
            margin-bottom: 30px;
        }

        .main-section-heading {
            margin: 10px -15px 0 -15px;
            padding: 10px 15px;
            background-color: #ffcc33;
        }

        .supported-platform-section {
            margin-bottom: 30px;
        }

        /* Main footer */

        #mainFooter {
            background-color: #222;
            color: #777;
            font-size: 0.8em;
            text-align: center;
            position: relative; /* This allows z-index to overlap fixed position elements */
            z-index: 9998;
        }

        /* 'To Top' button */

        #toTopButton {
            transition: all 0.2s linear;
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: block;
            background-color: #ffcc33;
            border-bottom: 1px solid rgba(0,0,0,0.3);
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            width: 80px;
            height: 80px;
            line-height: 80px;
            border-radius: 40px;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.75);
            z-index: 99999;
            opacity: 0.95;
        }

        #toTopButton:hover {
            opacity: 1;
        }

        #toTopButton,
        #toTopButton:hover,
        #toTopButton:active,
        #toTopButton:focus,
        #toTopButton:visited {
            text-decoration: none;
            color: white;
        }

        /* Media queries */

        @media print {
            * {
                box-shadow: none !important;
            }

            #mainHeader {
                background-color: white;
                color: black;
            }

            #toTopButton {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .hide-mobile {
                display: none;
            }
        }
    </style>

    <!--[if gte mso 9]>
    <xml>
        <mso:CustomDocumentProperties>
            <mso:ContentType msdt:dt="string">Document</mso:ContentType>
        </mso:CustomDocumentProperties>
    </xml>
    <![endif]-->
</head>
<body>

<div id="pageContainer">
    <header id="mainHeader" class="clearfix">
        <ul id="mainNavigation">
            <li id="IntroductionButton"class="nav-button-container">
                <a href="#introduction" class="nav-button">
				<span class="hide-mobile">Introduction</a>
            </li>
            <li id="CertificateButton"class="nav-button-container">
                <a href="#certificates" class="nav-button">
				<span class="hide-mobile">Certificate Generation</a>
            </li>
        </ul>

        <?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <svg version="1.1" id="zebraLogo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 446 144"><defs><style>.a{fill:#fff;}</style></defs><polygon class="a" points="95.62 74.04 85.48 63.9 85.48 92.6 95.62 92.6 95.62 74.04"/><path class="a" d="M228,277.48h24.7l-10.1-10.1,0,0h-13A16.7,16.7,0,0,0,228,234v33.38h0l-27.75-27.67q-2.2,1.14-4.27,2.49a51.22,51.22,0,0,0-4.38,3.21l26.27,26.17V329l20.28,20.28V335L228,324.84V277.48Z" transform="translate(-173 -234)"/><polygon class="a" points="65.19 43.54 65.14 92.53 75.28 92.53 75.33 53.74 65.19 43.54"/><polygon class="a" points="99.99 63.89 89.85 53.75 75.33 53.75 85.46 63.89 99.99 63.89"/><path class="a" d="M207.76,319.5v-0.6h0v-43l-23.3-23.3a50.41,50.41,0,0,0-5.71,8.63l18.87,18.87v14.34h0l-22.89-22.9A50.47,50.47,0,0,0,173,284.13s33.62,34.19,34.76,35.37" transform="translate(-173 -234)"/><polygon class="a" points="0.18 64.65 0.18 78.99 65.19 144 65.19 129.66 0.18 64.65"/><path class="a" d="M288.9,313.78H278.76V326.6H268.62a16.7,16.7,0,1,0,33.41,0Z" transform="translate(-173 -234)"/><polygon class="a" points="199.18 92.82 191.04 107.29 143.51 107.29 174.32 48.09 147.04 48.09 154.65 33.62 202.05 33.62 171.23 92.82 199.18 92.82"/><polygon class="a" points="226.03 63.11 250.34 63.11 250.34 77.58 226.03 77.58 226.03 92.82 250.34 92.82 250.34 107.29 208.14 107.29 208.14 33.61 250.34 33.61 250.34 48.09 226.03 48.09 226.03 63.11"/><path class="a" d="M456.48,267.61c9.39,0,14.8,1,18.78,3.53,5.08,3.1,8.17,9.39,8.17,16.46a17.4,17.4,0,0,1-5,12.81c-2.1,2.21-3.76,3.2-7.73,4.31,4.53,1,6.52,2,8.83,4.2,3.31,3.09,5,7.4,5,12.81,0,6.85-2.76,12.93-7.51,16.13-3.65,2.43-8.06,3.42-15.58,3.42H431.29V267.61h25.18Zm-7.29,30.49h4.42c8.18,0,11.6-2.54,11.6-8.61s-3.42-8.5-11.82-8.5h-4.2V298.1Zm0,30.38h6.52c7.51,0,10.71-2.54,10.71-8.5,0-3.53-1.33-6.08-4-7.51-2-1.1-3.75-1.32-9.17-1.32h-4.08v17.34Z" transform="translate(-173 -234)"/><path class="a" d="M510.2,341.29H492.3V267.61h23.86c9.72,0,16.79,1.77,21.65,5.52,5.08,4,8,10.61,8,18.67,0,11.26-4.75,18.66-14.25,22.42l16.24,27.06H526.32l-16.13-28.5v28.5Zm5.74-38.55c7.29,0,11.71-3.75,11.71-10.16,0-6.07-4.31-10.27-10.61-10.27H510.2v20.44h5.74Z" transform="translate(-173 -234)"/><path class="a" d="M594.81,267.61H572.05l-24.3,73.68h18.87L571.11,327h24l4.48,14.31H619ZM575.65,312.5l7.46-23.79,7.45,23.79H575.65Z" transform="translate(-173 -234)"/></svg>
		
		
    </header>

    <div id="mainDocumentation">
        <header id="mainHeaderTextContainer">
            <span id="mainHeaderText">
                Link-OS Multiplatform SDK<br/>
                <span style="display: block; font-size: 0.5em; font-weight: normal; margin-top: 3px;">(for Webservices)</span>
            </span>
        </header>
        <div class="main-section">
            <h2 class="main-section-heading"><a class="a-navigation" name="introduction">Introduction</a></h2>

            <div class="supported-platform-section">

				<p>This is a Tomcat based implementation of a Weblink / Websocket server.  This server should allow Link-OS&trade; printers to connect and communicate using the Link-OS Multiplatform SDK.</p>
				<p>More information regarding the Weblink / Websocket protocol can be found in the <a href="Weblink WebSocket Endpoint Configuration.pdf">Weblink guide</a>.  
				Printer specific information and troubleshooting can be found in the <a href="link-os-pg-addendum-en.pdf">Link-OS&trade; addendum</a>.
                <p><span><a href="#Top">Back to top</a></span></p>
            </div>
        </div>
		
		<div class="main-section">
            <h2 class="main-section-heading"><a class="a-navigation" name="certificates">Certificate Generation</a></h2>

            <div class="supported-platform-section">
			<p>In order to establish communications between your Weblink server and a Link-OS&trade; printer, you will need to obtain a digital certificate from Zebra.  The following steps will guide you through the process of obtaining a certificate.</p>
			<p><span>Assume for the purposes of example that the name of your server is zserver.fakecompinc.com</span></p>

<p><span>The following command line operations can be run in either Linux or via a Windows command line.<br/>
A version of OpenSSL ('OpenSSL 1.0.0e 6 Sep 2011' or newer) must be installed in order for <br/>
these commands to execute correctly. In Windows it may be required to run in the<br/>
OpenSSL shell. To do so type 'openssl' on the command line and hit enter. From there you can<br/>
issue the openssl commands below.  If using the OpenSSL shel omit 'openssl' from the start of <br/>
the commands.

<ol>
<li><p>Create a directory named zebra_certs anywhere on the disk (e.g. on the Desktop).<br/>
   Run all the commands in this how to from this directory</p></li>


<li><p>Generate the 2K private key as follows. Note, this should be kept hidden and backed up. <br/>
   Zebra cannot retrieve this key for you. If someone malicious gets a hold of the key <br/>
   the security of the connection between the Zebra printer and the Zebra Servlet <br/>
   cannot be guaranteed.</p>

<p><code>$> openssl genrsa -out weblink.zebratest.lan.key 2048</code></p>

<p>NOTE: If this command fails in Windows one of two things must be done before running step 1:<br/>
	&nbsp;&nbsp;A. Run the command line as Administrator<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OR<br/>
	&nbsp;&nbsp;B. Type <code>set RANDFILE=.rnd</code></p></li>

<li><p>Create the Certificate Request as follows. The output of this operation will be sent to Zebra.<br/>
   NOTE: The private key SHOULD NOT be sent to Zebra. This is to be kept private.</p>

<p><code>$> openssl req -new -subj "/C=US/ST=Illinois/L=Vernon Hills/O=Zebra Technologies/OU=Zebra Software/emailAddress=ADMIN@EMAIL/CN=*.weblink.zebratest.lan" -key weblink.zebratest.lan.key -out weblink.zebratest.lan.csr</code></p>

There are four fields that need to be filled in above with information unique to the server:
<ul>
<li>C - Is the two digit Country Code</li>
<li>ST - The Name of the state the server/company resides in</li>
<li>L - The name of the city the server/company resdies in</li>
<li>O - Organization/Company Name</li>
<li>OU - The name of your organizational unit</li>
<li>emailAddress - The contact Email for the creator of the certificate</li>
<li>CN - The full DNS name of the server (this must match the DNS name that is supplied to the printer as the location URL for the weblink connection)</li>
</ul>

<p>The .csr file that is output should be emailed to softpm@zebra.com. The certificate will be signed and emailed back. Once the certificate file is<br/>
received, continue with step 4. You may receive the certificate in a zip file. You will need to unzip it before continuing with step 4.</p></li>

<li><p>Copy the ZebraCAChain.cer from %SDK_INSTALL_PATH%\link_os_sdk\Webservices\VERSION\cert to the current (zebra_certs) directory.</p></li>

<li><p>Convert the new certificate to a format that the Tomcat Server can use by doing the following. A passkey will need to be provided in this step.<br/>
   It is up to the user to create this passkey. Again, this key should be kept private.  The zserver.fakecompinc.com.cer will be the signed certificate file<br/>
   you receive from Zebra Technologies.</p>
   
<p><code>%> openssl pkcs12 -export -in *.weblink.zebratest.lan.cer -inkey weblink.zebratest.lan.key -out weblink.zebratest.lan.p12 -name tomcat -CAfile ZebraCAChain.cer -caname root -chain</code></p></li>

<li><p>Configure tomcat server.xml in the %TOMCAT_INSTALL_LOCATION%\conf directory to use the new key/cert by modifiying the ssl connector as follows.  Place this Connector<br/>
   XML object inside of the Service tag which will look like <code>&lt;Service name="Catalina"&gt;.</code></p>

<p><code>	&lt;Connector SSLEnabled="true" acceptorThreadCount="5" clientAuth="want" keyAlias="tomcat" keystoreFile="conf/zserver.fakecompinc.com.p12" 
	keystorePass="YourPasskeyFromStep4Here" keystoreType="pkcs12" maxConnections="-1" maxThreads="2500" port="443" protocol="org.apache.coyote.http11.Http11NioProtocol" 
	scheme="https" secure="true" sessionTimeout="0" socket.soKeepAlive="true" sslProtocol="TLS"/&gt;</code></p></li>

<li><p>Add the ZebraCAChain.cer to the JRE that will be running your Tomcat server.  If you do not execute this command from the location<br/>
   which ZebraCAChain.cer is stored you will have to append the path to the name on the -file argument.  </p>
   <p>Note: The default password for the Java cacert keystore is 'changeit'.</p>
<p><code>%> keytool -importcert -file ZebraCAChain.cer -keystore "%JRE_HOME%\lib\security\cacerts" -alias "ZebraCAChain"</code></p></li>

<li><p>Copy zebra.war from $ZEBRA_SDK_INSTALL_PATH$\link_os_sdk\Webservices\VERSION\lib to $TOMCAT_INSTALL_LOCATION$\webapps</p></li>

<li><p>Restart the Tomcat server</p></li>

<li><p>Ensure the printer weblink.ip.conn[1|2].location value is set to "https://$CN$/zebra/weblink/".  Where $CN$ is the host name provided in step 3.  Ensure the / at the end is present, <br/>
    as the printer will faill to connect without.</p></li>
	</ol>
	                <p><span><a href="#Top">Back to top</a></span></p>
            </div>
        </div>
        
    </div>

    <footer id="mainFooter">
        &copy; 2017 ZIH Corp. All rights reserved.
    </footer>

    <a id="toTopButton" href="#Top">To Top</a>
</div>
</body>
</html>
