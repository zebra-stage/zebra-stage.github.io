
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="XML Submission">
    <title>XML Submission - Zebra Technologies Techdocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 


    <link rel="shortcut icon" href="/favicon.ico">
<script src="/js/jquery.js"></script></head><!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:42px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <p class="navbar-text">
                                            MDM Toolkit
                                            2.0
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>XML Submission</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="xml-submission" class="anchor"><a class="heading-anchor" href="#xml-submission"><span></span></a>XML Submission</h1>
                                    <p>
                                        MDM Toolkit
                                        2.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p>This document will describe how to send XML to MXMS for setting parameter values for CSPs:</p>

<ul>
<li>Sending XML</li>

<li>Group Submission</li>
</ul>

<p>The structure of the XML is based on a standard format that is being used by the MXMS. Each CSP offers different options for parameters and sub-characteristics, but all follow the same structure:</p>

<pre class="prettyprint"><code>    
    &lt;wap-provisioningdoc&gt;
        &lt;characteristic type="SomeCSP" version="SpecificVersionToUse"&gt;
            &lt;parm name="SomeParm" value="SomeValue"/&gt;
        &lt;/characteristic&gt;
        &lt;characteristic type="SomeCSPWithSubCharacteristic" version="SpecificVersionToUse"&gt;
            &lt;parm name="SomeParm" value="SomeValue"/&gt;
            &lt;characteristic type="SomeSubChar"&gt;
                &lt;parm name="SomeParmofSubChar" value="SomeValue"/&gt;
            &lt;/characteristic&gt;
        &lt;/characteristic&gt;   
    &lt;/wap-provisioningdoc&gt;
</code></pre>

<h3 id="generalsubmissionrules" class="anchor"><a class="heading-anchor" href="#generalsubmissionrules"><span></span></a>General Submission Rules</h3>

<ul>
<li>Characteristics must be wrapped in a <code>wap-provisioningdoc</code> node</li>

<li>Each characteristic must contain a version attribute that indicates the version to use</li>

<li>Multiple characteristics can be sent in one XML package</li>

<li>Characteristics are processed synchronously in the order they appear in the XML</li>
</ul>

<h2 id="generatingxml" class="anchor"><a class="heading-anchor" href="#generatingxml"><span></span></a>Generating XML</h2>

<p>This Toolkit does not provide the means to generate XML required to exchange data with the MXMS. XML should be generated by utilizing the <strong>Export a Profile to an MDM</strong> feature of StageNow 2.3. 
Full instructions for StageNow setup, and Usage can be <a href="http://techdocs.zebra.com/stagenow/2-3/about/" target="_blank">found here</a>.</p>

<h2 id="submittingxml" class="anchor"><a class="heading-anchor" href="#submittingxml"><span></span></a>Submitting XML</h2>

<p>In your application's activity's onServiceConnected method, you can add code before the <code>term</code> call that would submit XML to MXMS. This example adds the utilizeMXMS method here, which will show how to edit XML and submit them to MXMS. However, it would be possible to repeatedly call this method from other locations. The onServiceConnected method is the first location where this method could possibly be called.</p>

<pre class="prettyprint"><code>    
    // This definition is mandatory to track binding to the MXMS
    private ServiceConnection mMxFrameworkServiceConnection = new ServiceConnection()
    {
        // Callback to notify when binding to the MXMS has completed
        public void onServiceConnected(ComponentName className,IBinder service)
        {
            // Pass the binding notification on so the helper class can know the service was bound
            SymbolBrand.MXMS.onServiceConnected(className,service);

            // For the purposes of this test application, we call this from here because this is the FIRST time it can be done
            // In a real world situation, it might be called repeatedly from other locations, as things that need to be done are identified
            utilizeMXMS();

            // Call term 
            SymbolBrand.MXMS.term(m_activity,mMxFrameworkServiceConnection);

            // Exit the application
            m_activity.finish();                
        }

        // Callback to notify when unbinding from the MXMS has occurred
        public void onServiceDisconnected(ComponentName className)
        {
            // Pass the unbinding notification on so the helper class can know the service was unbound
            SymbolBrand.MXMS.onServiceDisconnected(className);
        }
    }; 
</code></pre>

<p>In this example, the utilizeMXMS method is used to demonstrate how to take an XML from the application's Assets folder, change the values of a parm, and send this Request XML document to MXMS. The Result XML document that is returned is then used to get the value of one of the parms. Through the use of the methods that are mentioned here, you can create an application that also performs these actions.</p>

<ol>
<li><p>The utilizeMXMS method uses the isReady method from the SymbolBrand class to check if the application successfully bound to MXMS, which would mean that it is ready to accept XML from your application. </p></li>

<li><p>If isReady returns true, the clock.in.xml is then retrieved from the Assets folder, which will be used as the Request XML document. This XML file contains:</p>

<pre class="prettyprint"><code>
&lt;wap-provisioningdoc&gt;
    &lt;characteristic type="Clock" version="4.2" &gt;
        &lt;parm name="AutoTime" value="false"/&gt;
        &lt;parm name="TimeZone" value="GMT-5"/&gt;
        &lt;parm name="Date" value="2014-12-03"/&gt;
        &lt;parm name="Time" value="11:00:00"/&gt;
    &lt;/characteristic&gt;
&lt;/wap-provisioningdoc&gt;
</code></pre></li>

<li><p>To replace the parms in the Request XML document, an ArrayList must be made to contain ParmValue objects. The ParmValue object is in the XmlParser class and in this example, is instantiated with the Top Level Characteristic type ("clock"), the name of the parm that will be edited ("time"), and the new value that will be used to replace the original value in the XML ("11:11:11"). The Request XML document and the ArrayList of ParmValue objects is used by the XmlParser's replaceParms method, which in this example, will change the "time" parm's value to "11:11:11". </p></li>

<li><p>The modified Request XML document is used by the SymbolBrand class's submitXml method, which will submit this XML to the MXMS. This XML will then be sent to the Clock Feature Type, which will change the time of the device to 11:11:11. </p></li>

<li><p>The MXMS will return a Result XML document is used by the XmlParser's formatXml class to split the Result XML document up onto multiple lines for better readability. </p></li>

<li><p>The XmlParser's isEquivalent method is then used to check that the Result XML document is equivalent to the Result XML document that was submitted, which would indicate that the device's clock was set successfully. If the XML documents were not equivalent, this indicates that there may have been an error in setting the clock and a characteristic error and/or parm error was returned. </p></li>

<li><p>If the XML documents are equivalent, this example shows how the XmlParser's fetchParm method can be used to retrieve the value of the "time" parm. The Top Level Characteristic type ("clock") and the name of the parm who's value will be fetched ("time") are used by the fetchParm method to return this parm's value.</p>

<pre class="prettyprint"><code>
// Function to do something by utilizing the MXMS
private void utilizeMXMS()
{
    // Check to see if the MXMS is successfully bound and ready to accept XML
    // Note: Once the binding complete notification (previous code) is passed on, this function will return true
    //       Depending on where this code is called from, this check may or may not be required, but never hurts.
    if ( SymbolBrand.MXMS.isReady() )
    {
        Log.d(m_activity.getApplicationInfo().name,"MXMS.isReady");

<pre><code>    String xmlName = "clock.in.xml";

    // Extract an XML snippet from the application assets
    String inXml = XmlParser.getAssetXml(m_activity,xmlName);

    // If the XML was successfully obtained
    if ( inXml != null )
    {
        Log.i(m_activity.getApplicationInfo().name,"inXml = "+inXml);

        if ( xmlName.startsWith("clock") )
        {
            // Replace one or more values in the input XML
            ArrayList&amp;lt;ParmValue&amp;gt; replaceValues = new ArrayList&amp;lt;ParmValue&amp;gt;();
            replaceValues.add(new ParmValue("clock","time","11:11:11"));
            String replaceXml = XmlParser.replaceParms(inXml,replaceValues);
            if ( replaceXml != null )
            {
                Log.i(m_activity.getApplicationInfo().name,"replaceXml = "+replaceXml);
                inXml = replaceXml;
            }
        }

        // Submit the XML to the MXMS for processing
        // Note: This will FAIL unless SymbolBrand.MXMS.isReady(), indicating that the binding to the MXMS has completed successfully
        String outXml = SymbolBrand.MXMS.submitXml(inXml);

        // If we got back result XML
        // Note: A null result XML is what happens when the binding to the MXMS has NOT completed successfully
        if ( outXml != null )
        {
            Log.i(m_activity.getApplicationInfo().name,"outXml = "+outXml);

            // Format the return XML for friendlier display
            String fmtOutXml = XmlParser.formatXml(outXml); 

            // If it was formatted successfully
            // Note: If invalid XML results are passed, the formatting may fail
            if ( fmtOutXml != null )
            {
                Log.i(m_activity.getApplicationInfo().name,"fmtOutXml = "+fmtOutXml);

                // Determine whether the submitted and result XML are equivalent
                if ( XmlParser.isEquivalent(inXml,outXml) )
                {
                    Log.i(m_activity.getApplicationInfo().name,"Submitted and Result XML are Equivalent!");

                    if ( xmlName.startsWith("clock.in") )
                    {
                        // Fetch the value of the time parm from the output XML
                        String time = XmlParser.fetchParm(outXml,new ParmSelector("clock","time"));

                        // If we got a non-null value
                        if ( time != null )
                        {
                            Log.i(m_activity.getApplicationInfo().name,"Set time was \""+time+"\"");
                        }
                    }
                }
                else
                {
                    String fmtInXml = XmlParser.formatXml(inXml); 
                    if ( fmtInXml != null ) Log.e(m_activity.getApplicationInfo().name,"inXml = "+fmtInXml);
                    Log.e(m_activity.getApplicationInfo().name,"fmtOutXml = "+fmtOutXml);
                    Log.e(m_activity.getApplicationInfo().name,"Submitted and Result XML are NOT Equivalent!");

                    // Determine whether any top-level characteristic errors were in the result XML
                    int errors = XmlParser.countTlcErrors(outXml);

                    if ( errors &amp;gt; 0 )
                    {
                        Log.e(m_activity.getApplicationInfo().name,"Result XML has "+errors+" top level characteristic errors!");
                    }
                }
            }
            else
            {
                Log.d(m_activity.getApplicationInfo().name,"No formatted XML");
            }
        }
        else
        {
            Log.d(m_activity.getApplicationInfo().name,"No output XML");
        }
    }
    else
    {
        Log.d(m_activity.getApplicationInfo().name,"No input XML");
    }
}
</code></pre>

}
</code></pre></li>
</ol><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        © 2015 ZIH Corp and/or its affiliates. All rights reserved. Zebra and the stylized Zebra head are trademarks of ZIH Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>


         


</body></html>