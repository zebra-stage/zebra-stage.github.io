<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Programmers can use these scanner Software Development Kits to build applications.">
        <meta name="author" content="Zebra Technologies">
        <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
        <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
        <meta title="Bioptic Color Camera SDK for Windows">
        <title>Bioptic Color Camera SDK for Linux - Bounding Box Detection - Zebra Technologies</title>
        <!-- core CSS -->
        <link rel="stylesheet" href="/home/css/uikit.min.css" />
        <link rel="stylesheet" href="/home/css/style.css" />
        <link rel="stylesheet" href="/home/css/bootstrap.min.css" />  
        <link rel="stylesheet" href="/home/css/main.css" >
        <!-- <link href="/css/bootstrap.min.css" rel="stylesheet"> -->
        <link href="/css/font-awesome.min.css" rel="stylesheet">
        <link href="/css/animate.min.css" rel="stylesheet">
        <link href="/css/owl.carousel.css" rel="stylesheet">
        <link href="/css/owl.transitions.css" rel="stylesheet">
        <link href="/css/prettyPhoto.css" rel="stylesheet">
        <!-- <link href="/css/main.css" rel="stylesheet"> -->
        <link href="/css/responsive.css" rel="stylesheet">
        <link href="/css/prettify.css" rel="stylesheet">
        <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
        <link href="../../dcs_styles.css" rel="stylesheet">
        <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/respond.min.js"></script>
        <![endif]--> 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
        <link rel="shortcut icon" href="/favicon.ico">
        <script src="/js/jquery.js"></script>
    </head>
    <body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">
        <header id="header">
            <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">
                            <img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit; padding-right: 3px;">
                        </a> 
                    </div>
                    <div class="collapse navbar-collapse navbar-left">
                        <ul class="nav navbar-nav">
                            <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                            <li>
                                <a href="/dcs/scanners">Barcode Scanner Tools</a>
                            </li>
                            <p class="navbar-text">Bioptic Color Camera SDK for Linux</p>
                        </ul>
                    </div>
                    <div class="collapse navbar-collapse navbar-right">
                        <ul class="nav navbar-nav">
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/about/">About</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/getting-started/">Getting Started</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/sdk/">SDK</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/bounding-box/">Bounding Box Detection</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/monochrome-sdk/">Monochrome Library</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/camera-sdk-linux/download/">
                                    <i class="fa fa-download"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div><!--/.container-->
            </nav><!--/nav-->
        </header><!--/header-->
        <div class="container-fluid">
            <section id="blog">
                <div class="">
                    <section class="content-with-sidebar">
                        <div class="row">
                            <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                                <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                                    <ul class="nav">
                                        <li><strong>Bounding Box Detection</strong></li>
                                    </ul>
                                </nav>                    
                                <script type="text/javascript">
                                    $(document).ready(function() {
                        	            $( "#btn_SaveSmartDocOptions" ).click(function() {
                      			            console.log('Saving Options');
                      			            $("#modal-smartdocs").modal({show: false});
                    		            });
                        	            $( "#btn_SaveSmartDocOptions" ).click(function() {
                      			            console.log('Clearing Options');
                      			            $("#modal-smartdocs").modal({show: false});
                    		            });
                                    });
                                </script>
                                <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                                <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                                <script type="text/javascript">
                                    $(document).ready(function() {                    
                                    });
                                </script>
                            </div>                
                            <div class="col-sm-9 ">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <section id="cta" class="wow fadeIn">
                                            <div class="">
                                                <h1 id="bcc-linux-bounding-box" class="anchor">
                                                    <a class="heading-anchor" href="#bcc-linux-bounding-box"><span></span></a>Bounding Box Implementation
                                                </h1>
                                            </div>
                                        </section>                    
                                    </div>
                                </div>
                                <div id="mainContent" class="row">
                                    <div class="col-sm-12">
                                        <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                                            <!-- Start of guide -->
                                            <div class="service-box wow fadeInRight">
                                                <div class="">
                                                    <div style="display: block; margin: 0 auto; text-align: center;">
                                                        <img src="../../images/camera-sdk-linux/006-bcc-linux-bounding-box.png" style="display: block; margin: 0 auto;"><strong>Figure 1</strong> Bounding Box Detection
                                                    </div><br />

                                                    <p>In the GUI, a ‘CheckBox’ is provided for the user to enable/disable the bounding box feature. Once enabled, every time an object is held in front of the camera, a box will be drawn around it in the UI. In the Sample App, the first video frame is considered as the, ‘background’ that is used for comparison with all the other consecutive frames. Bounding box is detected based on the difference observed during the video frame comparison. User may choose to set the background manually by clicking on the ‘Set Background’ button as well. Once the ‘Set Background’ button is pressed, the particular video frame at that point will be considered for comparison purpose.</p>

                                                    <p>Below is a brief description of the inner functionality of the Bounding Box implementation.</p>

                                                    <p>The file ‘camera_bounding_box_factory.h’ should be included in the .cpp file in which the bounding box functionality is implemented.</p> 

                                                    <p>First, a pointer of the ‘CameraBoundingBoxDetectorInterface’ is defined.</p>
                                                    
                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
CameraBoundingBoxDetectorInterface* frameProc;
</code>
</pre>

                                                    <p>Next, a vector is defined to hold information relevant to the Bounding Box.</p> 

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
vector&lt;BoundingBoxPoint> bounding_rect;
</code>
</pre>

                                                    <p>‘bounding_rect’ is used to contain information of the left bottom coordinates, width and the height of the bounding box. With the following code lines, initialization of the ‘frameProc’ takes place.</p>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
frameProc = CameraImageProcessingFactory::CreateBoundingBoxDetector(BackgroundFilterType::kStatic);
</code>
</pre>

                                                    <p>As the ‘BackgroundFilterType’, user may use ‘kStatic’ , ‘kDynamic’, ‘kDynamicGaussian’. But for continuous detection of bounding box, filter type ‘kStatic’ should be used.Initially it is required to capture a snapshot from the camera without any objects in the fore front. This image is considered as the Background frame that gets compared with every frame that comes next to check if a movement has occurred. If a movement is detected, the object that caused the movement is identified and a rectangle is drawn surrounding it. The method ‘SetBackgroundFrame’ should be called to set the Background for comparison. Before passing parameters to ‘SetBackgroundFrame’, the image that is displayed in the GUI needs to be converted to either a BMP or a JPG image. The conversion can be achieved by the following code lines.</p>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
std::vector&lt;uint8_t> data = Encode(zebra::image::FileConverter::RGB_TO_BMP, image);  
</code>
</pre>

                                                    <p>‘&data[0]’ and ‘data.size()’ are the converted image data and the converted image size respectively.’0’ or ‘1’ should be given if the image type is BMP or JPG respectively. Then the converted image data is provided to the ‘SetBackgroundFrame’ method.</p> 

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
frameProc->SetBackgroundFrame(&data[0], data.size(),image_width_, image_height_,0);
</code>
</pre>

                                                    <p>Full description of the method is provided below.</p>
                                                    <ul>
                                                        <li>Sets the background frame (call with first frame / frame to reset background)</li>
                                                        <li>background_frame_buffer : background frame buffer</li>
                                                        <li>length : length of background frame buffer</li>
                                                        <li>image_width: width of background frame</li>
                                                        <li>image_height: height of background frame</li>
                                                        <li>image_type:  type of background frame (reserved : 0:BMP,1:JPEG)</li>
                                                    </ul>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
virtual void SetBackgroundFrame(BYTE* background_frame_buffer, int length, int image_width, int image_height , int image_type) = 0;
</code>
</pre>

                                                    <p>After setting the Background, ‘DetectBoundingBox’ method needs to be called. ‘DetectBoundingBox’ method accepts image file type as its first argument. Hence it is required to do an image conversion before passing parameters to the method.</p>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
std::vector&lt;uint8_t> data = Encode(zebra::image::FileConverter::RGB_TO_BMP, image); 
</code>
</pre>

                                                    <p>An RGB image is displayed when the Sample App is run. In order to call the ‘DetectBoundingBox’ method, the said image needs to be converted to BMP or JPG.</p>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
bool rect_found = frameProc->DetectBoundingBox(&data[0], data.size(), image_width_,image_height_,0,bounding_rect);
</code>
</pre>

                                                    <p>Full method definition is explained below.</p>

                                                    <ul>
                                                        <li>Detects the foreground object bounding box in the specified frame</li>
                                                        <li>
                                                            <ul>
                                                                <li>input_frame_buffer : input image buffer</li>
                                                                <li>length : length of input frame buffer</li>
                                                                <li>image_width: width of input image</li> 
                                                                <li>image_height: height of input image</li>
                                                                <li>image_type:  type of input image (reserved : 0:BMP,1:JPEG)</li>
                                                                <li>bounding_rect : output bounding box location point array</li>
                                                                <li>return value : returns true if bounding box found</li>
                                                            </ul>
                                                        </li>
                                                    </ul>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
virtual bool DetectBoundingBox(BYTE* input_frame_buffer, int length, int image_width, int image_height,int image_type, vector<BoundingBoxPoint> &bounding_rect) = 0;
</code>
</pre>

                                                    <p>When the above method returns ‘True’, ‘bounding_rect’ vector gets filled with values needed to draw the rectangle on the GUI to represent the bounding box.</p>

                                                    <!-- code segment -->
<pre class="prettyprint">
<code>
float x_pos = (float)bounding_rect[0].x;
float y_pos = (float)bounding_rect[0].y;

float rect_width = (float)bounding_rect[3].x - (float)bounding_rect[0].x ;
float rect_height= (float)bounding_rect[3].y - (float)bounding_rect[0].y;
</code>
</pre>

                                                    <p>Information such as x, y coordinate of the left bottom of the rectangle, width and the height of the rectangle is provided by the vector ‘bounding_rect’.  This in turn can be used to draw a rectangle using wxWidgets.</p>

                                                    <hr>

                                                    <h2 id="video-profile-property" class="anchor"><a class="heading-anchor" href="#video-profile-property"><span></span></a>Video Profile Property</h2>

                                                    <p>Video Profile property drop down is populated at the beginning with a call to <strong>GetSupportedFrameTypes()</strong>. Based on the user choice, video profile of the camera is changed using <strong>SetCurrentFrameType(..)</strong>. The way in which this can be achieved is shown in the code snippet given below.</p>

<pre class="prettyprint">
<code>
void SetCurrentFrameTypeTest(std::shared_ptr&lt;zebra::camera_sdk::ZebraCameraClient> camera)
{
    std::vector&lt;zebra::camera_sdk::FrameType> data = camera->GetSupportedFrameTypes();

    for (size_t i = 0; i &lt; data.size(); i++)
    {
        std::cout &lt;&lt; (int)data[i].format &lt;&lt; "," &lt;&lt; data[i].width &lt;&lt; ", " &lt;&lt; data[i].height &lt;&lt; "," &lt;&lt; data[i].framerate &lt;&lt; std::endl;
    }

    if (data.size() > 1)
    {
        int i = 1;
        camera->SetCurrentFrameType(data[i]);
        std::cout &lt;&lt; (int)data[i].format &lt;&lt; "," &lt;&lt; data[i].width &lt;&lt; ", " &lt;&lt; data[i].height &lt;&lt; "," &lt;&lt; data[i].framerate &lt;&lt; std::endl;
    }
}
</code>
</pre>

                                                    <div style="display: block; margin: 0 auto; text-align: center;">
                                                        <img src="../../images/camera-sdk-linux/009-bcc-linux-video-profile-property.png" style="display: block; margin: 0 auto;"><strong>Figure 2</strong> Video Profile Property
                                                    </div><br />

                                                    <p>Using the drop-down menu shown above, user is able to select the desired Video Profile. Options available in the drop-down menu are as follows, YUY2 960 x 600 @45 fps, YUY2 1200 x 800 @45 fps, YUY2 480 x 300 @45 fps, YUY2 320 x 200 @45 fps.</p>

                                                    <p>With every selection, a message box is displayed in the Sample App to alert the user to perform a ‘Set Background’ again, which is a mandatory step required in Bounding Box feature. As explained in the previous section, Bounding Box feature operates with a comparison between the set Background frame and the incoming video frame. For the comparison to be successful, both frames should be of the same video profile. Hence with every change of video profile, Background frame has to be reset, if the user desires to make use of the Bounding Box feature.</p>

                                                    <div style="display: block; margin: 0 auto; text-align: center;">
                                                        <img src="../../images/camera-sdk-linux/010-bcc-linux-video-profile-property-change.png" style="display: block; margin: 0 auto;"><strong>Figure 3</strong> Video Profile Property Changed
                                                    </div><br />

                                                    <p>Also, options available in the drop down would vary depending on the USB ports used to connect the camera and the scanner cables. For instance, more options will be present in the drop-down menu when connected to USB 3.0 port than when connected to USB 2.0 port.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>    
            <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			    <div class="modal-dialog">
				    <div class="modal-content">
					    <div class="modal-header">
						    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					    </div>
					    <div class="modal-body">
						    <div id="modalImg"></div>
					    </div>
			        </div>
		        </div>
            </div>
        </div>
        <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corporation, registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. &copy;2024 Zebra Technologies Corporation and/or its affiliates. All rights reserved. <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/zebra-technologies"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/owl.carousel.min.js"></script>
        <script src="/js/mousescroll.js"></script>
        <script src="/js/smoothscroll.js"></script>
        <script src="/js/jquery.prettyPhoto.js"></script>
        <script src="/js/jquery.isotope.min.js"></script>
        <script src="/js/jquery.inview.min.js"></script>
        <script src="/js/wow.min.js"></script>
        <script src="/js/bootstrap-treenav.min.js"></script>
        <script src="/js/prettify.js"></script>
        <script src="/js/zepto.js"></script>
        <script src="/js/jquery.waterfall.js"></script>   
        <script src="/js/main.js"></script>
        <script type="text/javascript">
            (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
                e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
            })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

            _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-72584442-1', 'auto');
            ga('send', 'pageview');
        </script> 
        <script>
            ChatraID = 'QDvZ76min4DhLW5vJ';
            (function(d, w, c) {
                var n = d.getElementsByTagName('script')[0],
                    s = d.createElement('script');
                w[c] = w[c] || function() {
                    (w[c].q = w[c].q || []).push(arguments);
                };
                s.async = true;
                s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
                    + '//call.chatra.io/chatra.js';
                n.parentNode.insertBefore(s, n);
            })(document, window, 'Chatra');
        </script>         
    </body>
</html>