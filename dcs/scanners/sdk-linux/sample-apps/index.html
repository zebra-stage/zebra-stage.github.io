<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Programmers can use these scanner Software Development Kits to build applications.">
        <meta name="author" content="Zebra Technologies">
        <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
        <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
        <meta title="Scanner SDK for Linux">
        <title>Scanner SDK for Linux - Sample Source Code - Zebra Technologies</title>
        <!-- core CSS -->
        <link href="/css/bootstrap.min.css" rel="stylesheet">
        <link href="/css/font-awesome.min.css" rel="stylesheet">
        <link href="/css/animate.min.css" rel="stylesheet">
        <link href="/css/owl.carousel.css" rel="stylesheet">
        <link href="/css/owl.transitions.css" rel="stylesheet">
        <link href="/css/prettyPhoto.css" rel="stylesheet">
        <link href="/css/main.css" rel="stylesheet">
        <link href="/css/responsive.css" rel="stylesheet">
        <link href="/css/prettify.css" rel="stylesheet">
        <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
        <link href="../../dcs_styles.css" rel="stylesheet">
        <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/respond.min.js"></script>
        <![endif]--> 
        <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
        <link rel="shortcut icon" href="/favicon.ico">
        <script src="/js/jquery.js"></script>
    </head>
    <body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">
        <header id="header">
            <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">
                            <img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit; padding-right: 3px;">
                        </a> 
                    </div>
                    <div class="collapse navbar-collapse navbar-left">
                        <ul class="nav navbar-nav">
                            <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                            <li>
                                <a href="/dcs/scanners">Barcode Scanner Tools</a>
                            </li>
                            <p class="navbar-text">Scanner SDK for Linux</p>
                        </ul>
                    </div>
                    <div class="collapse navbar-collapse navbar-right">
                        <ul class="nav navbar-nav">
                            <li>
                                <a href="/dcs/scanners/sdk-linux/about">About</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/sdk-linux/setup/">Setup</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/sdk-linux/utilities/">Test Utilities</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/sdk-linux/sample-apps/">Sample Apps</a>
                            </li>
                            <!-- 12/23/2022 : Removed as CIM content is TGCS specific. -->
                            <!--<li>
                                <a href="/dcs/scanners/sdk-linux/cim/">CIM Service Provider</a>
                            </li>-->
                            <li>
                                <a href="/dcs/scanners/sdk-linux/get-set/">GetAndSet Utility</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/sdk-linux/api">API</a>
                            </li>
                            <li>
                                <a href="/dcs/scanners/sdk-linux/download">
                                    <i class="fa fa-download"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div><!--/.container-->
            </nav><!--/nav-->
        </header><!--/header-->
        <div class="container-fluid">
            <section id="blog">
                <div class="">
                    <section class="content-with-sidebar">
                        <div class="row">
                            <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                                <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                                    <ul class="nav">
                                        <li><strong>Linux SDK Sample Applications</strong></li>
                                    </ul>
                                </nav>                    
                                <script type="text/javascript">
                                    $(document).ready(function() {
                        	            $( "#btn_SaveSmartDocOptions" ).click(function() {
                      			            console.log('Saving Options');
                      			            $("#modal-smartdocs").modal({show: false});
                    		            });
                        	            $( "#btn_SaveSmartDocOptions" ).click(function() {
                      			            console.log('Clearing Options');
                      			            $("#modal-smartdocs").modal({show: false});
                    		            });
                                    });
                                </script>
                                <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                                <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                                <script type="text/javascript">
                                    $(document).ready(function() {                    
                                    });
                                </script>
                            </div>                
                            <div class="col-sm-9 ">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <section id="cta" class="wow fadeIn">
                                            <div class="">
                                                <h1 id="samplesourcecode" class="anchor">
                                                    <a class="heading-anchor" href="#samplesourcecode"><span></span></a>Linux SDK Sample Applications
                                                </h1>
                                            </div>
                                        </section>                    
                                    </div>
                                </div>
                                <div id="mainContent" class="row">
                                    <div class="col-sm-12">
                                        <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                                            <!-- Start of guide -->
                                            <div class="service-box wow fadeInRight">
                                                <div class="">
                                                    <h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>
                                                    <p>This chapter describes how to use the Zebra Scanner SDK, and includes code snippets from the sample application.</p>
                                                    <p><strong>NOTE</strong> For a list of a scanner's supported attribute (parameter) numbers and definitions, refer to the scanner Product Reference Guide, available on the Zebra Support website: <a href="http://www.zebra.com/support" target="_blank">http://www.zebra.com/support</a>. Attributes include configuration parameters, monitored data, and asset tracking information.</p>
                                                    
                                                    <hr>

                                                    <h2 id="sdksampleutilities" class="anchor"><a class="heading-anchor" href="#sdksampleutilities"><span></span></a>SDK Sample Utilities</h2>
                                                    
                                                    <p>The Zebra Scanner SDK includes the following sample utilities that demonstrate SDK functionalities. This section describes how to use the utilities to gain an understanding of the SDK.</p>
                                                    <ul>
                                                        <li>Zebra Scanner SDK C++ GUI Demonstration Application, GTK (see <a href="../utilities/#scannersdkcppsampleapplication">Scanner SDK C++ GTK-based Sample Application</a>)</li>
                                                        <li>Zebra Scanner SDK C++ Console Sample Application, Commandline</li>
                                                    </ul>

                                                    <h3 id="sample-app" class="anchor"><a class="heading-anchor" href="#sample-app"><span></span></a>Developing a Console Application Using zebra-scanner-devel and Libraries</h3>

                                                    <p>zebra-scanner-sdk main packages include a development package that contains header files to access CoreScanner API calls, as well as source code for a sample application. The sample application can be modified and compiled using the make file to create a new application. Include a path for header files and LD_FLAGS.</p>

                                                    <p><strong>NOTE</strong> The sample application demonstrates how to develop an application for Zebra scanner drivers.</p>

                                                    <em><p><strong>Table</strong> Installation Locations for Sample Application, Development Resources, and Shared Libraries</p></em>
                                                    <table class="hovertable">
                                                        <tr>
                                                            <th>Application Type</th>
                                                            <th>Installation Location</th>
                                                            <th>File</th>
                                                        </tr>
                                                        <tr>
                                                            <td rowspan="6">Sample application</td>
                                                            <td rowspan="2">/usr/share/zebra-scanner/samples/co nsole-app</td>
                                                            <td>Makefile</td>
                                                        </tr>
                                                        <tr>
                                                            <td>ConsoleApplication</td>
                                                        </tr>
                                                        <tr>
                                                            <td rowspan="2">/usr/share/zebra-scanner/samples/co nsole-app/include</td>
                                                            <td>ConsoleSampleEventListener.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td>ConsoleMain.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td rowspan="2">/usr/share/zebra-scanner/samples/co nsole-app/src</td>
                                                            <td>ConsoleSampleEventListener.cpp</td>
                                                        </tr>
                                                        <tr>
                                                            <td>ConsoleMain.cpp</td>
                                                        </tr>
                                                        <tr>
                                                            <td rowspan="4">Development files for uPOS applications, files are installed by zebra-scanner-devel package</td>
                                                            <td rowspan="4">/usr/include/zebra-scanner</td>
                                                            <td>CsBarcodeTypes.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td>CsUserDefs.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td>CsIEventListenerXml.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Cslibcorescanner_xml.h</td>
                                                        </tr>
                                                        <tr>
                                                            <td rowspan="20">CoreScanner shared libraries</td>
                                                            <td rowspan="20">/usr/lib/zebra-scanner/corescanner</td>
                                                            <td>libcs-iudev.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-comm.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-common.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-snapi.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-client.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-clientscanner.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-clientscale.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-ibmtt.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-ibmhh.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-hidkb.so.4.0.0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-client.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-clientscale.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-clientscanner.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-comm.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-common.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcs-iudev.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-hidkb.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-snapi.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-ibmtt.so</td>
                                                        </tr>
                                                        <tr>
                                                            <td>libcscl-ibmhh.so</td>
                                                        </tr>
                                                    </table><br />

                                                    <p>An application should extend the IEventListenerXml class from the zebra-scanner-devel package. IEventListenerXml is an abstract class with pure virtual functions for all event handling. The included sample application implements all event handling methods. Additional methods support required features, and each method calls the ExecCommand() method after preparing input XML.</p>

                                                    <p>For example, ConsoleSampleEventListener.h is implemented in the IEventListenerXml class of the Console Application.</p>

                                                    <p>A developer implements all pure abstract methods inside the sample application's class SampleEventListener, which is derived from the IEventListenerXML interface. The SampleEventListener class can then be instantiated inside the main method. The following API calls are used for further development:</p>

                                                    <ul>
                                                        <li>Open</li>
                                                        <li>GetScanners</li>
                                                        <li>ExecCommand</li>
                                                        <li>Close</li>
                                                    </ul>
                                                    
                                                    <hr>

                                                    <h2 id="sample-app-source-code" class="anchor"><a class="heading-anchor" href="#sample-app-source-code"><span></span></a>Source Code for the Console Application</h2>

                                                    <h3 id="classsampleeventlistner" class="anchor"><a class="heading-anchor" href="#classsampleeventlistner"><span></span></a>Class SampleEventListener (ConsoleSampleEventListener.h)</h3>

<pre class="prettyprint">
<code>
/*
* ©2022 Zebra Technologies LLC. All rights reserved.
*/

#ifndef SAMPLEEVENTLISTENER_H_
#define SAMPLEEVENTLISTENER_H_

#include "CsIEventListenerXml.h"
#include "CsUserDefs.h"
#include "CsBarcodeTypes.h"
#include "Cslibcorescanner_xml.h"

/* standard C includes */
#include &lt;stdio.h>
#include &lt;stdlib.h>

/* standard template library includes */
#include &lt;string>
#include &lt;iostream>
#include &lt;sstream>

using namespace std;

class SampleEventListener : public IEventListenerXml
{
public:
    explicit SampleEventListener();
    virtual ~SampleEventListener();

    virtual void OnImageEvent( short eventType, int size, short imageFormat, char* sfimageData, int dataLength, std::string& pScannerData );
    virtual void OnVideoEvent( short eventType, int size, char* sfvideoData, int dataLength, std::string& pScannerData );
    virtual void OnBarcodeEvent( short eventType, std::string& pscanData );
    virtual void OnPNPEvent( short eventType, std::string ppnpData );
    virtual void OnCommandResponseEvent( short status, std::string& prspData );
    virtual void OnScannerNotification( short notificationType, std::string& pScannerData );
    virtual void OnIOEvent( short type, unsigned char data );
    virtual void OnScanRMDEvent( short eventType, std::string& prmdData );
    virtual void OnDisconnect();
    virtual void OnBinaryDataEvent( short eventType, int size, short dataFormat, unsigned char* sfBinaryData, std::string&  pScannerData);


    StatusID Open();
    void GetScanners();
    void GetAttribute();
    void GetAttributeNext();
    void GetAllAttributes();
    void SetAttribute();
    void SetAttributeStore();
    void SetZeroWeight();
    void Close();
    
    void RebootScanner();
    void ExecuteActionCommand(CmdOpcode opCode);
    void GetDeviceTopology();
    void FirmwareUpdate();
    void FirmwareUpdateFromPlugin();
    void StartNewFirmware();
    void AbortFirmwareUpdate();
    void GetVersion();
    void SwitchHostMode();
};

#endif /* SAMPLEEVENTLISTENER_H_ */                                                           
</code>
</pre>

                                                        <h3 id="classsampleeventlistnerdefinitions" class="anchor"><a class="heading-anchor" href="#classsampleeventlistnerdefinitions"><span></span></a>Class SampleEventListener Definitions/Implementation (ConsoleSampleEventListener.cpp)</h3>

<pre class="prettyprint">
<code>
/*
* ©2022 Zebra Technologies LLC. All rights reserved.
*/

#include "ConsoleSampleEventListener.h"
#include "ISO15434formatEnvelope.h"

/* standard C includes */
#include &lt;stdio.h>
#include &lt;stdlib.h>
#include &lt;unistd.h>

/* standard template library includes */
#include &lt;string>
#include &lt;iostream>
#include &lt;sstream>
#include &lt;errno.h>
#include &lt;cstring>
#include &lt;time.h>

SampleEventListener::SampleEventListener()
{

}

SampleEventListener::~SampleEventListener()
{
    Close();
}

StatusID SampleEventListener::Open()
{
    StatusID status;
    ::Open(this, SCANNER_TYPE_ALL, &status);
    if(status != STATUS_OK)
    {
        return status;
    }

    std::string inXml = "&lt;inArgs>&lt;cmdArgs>&lt;arg-int>6&lt;/arg-int>&lt;arg-int>1,2,4,8,16,32&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";
    std::string outXml;
    ::ExecCommand(CMD_REGISTER_FOR_EVENTS, inXml, outXml, &status);   
    return status;
}
   
void SampleEventListener::GetScanners()
{
    unsigned short count;
    vector&lt;unsigned int> list;
    string outXml;
    StatusID eStatus;

    ::GetScanners(&count, &list, outXml, &eStatus);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;

    if ( eStatus != STATUS_OK )
    {
        std::cout &lt;&lt; "Get Scanners failed. Can't connect to the corescanner." &lt;&lt; std::endl;
        return ;
    }

    cout &lt;&lt; "Get Scanners command success. " &lt;&lt; endl &lt;&lt; endl;
    cout &lt;&lt; "Scanner Count: " &lt;&lt; count &lt;&lt; endl;
    for(int x=0; x<count; x++)
    {
        cout &lt;&lt; "Scanner IDs : " &lt;&lt; list[x] &lt;&lt; std::endl;
    }
    cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
void SampleEventListener::GetDeviceTopology()
{
    string inXml;
    string outXml;
    StatusID sId;
    
    cout &lt;&lt; "================================" &lt;&lt; endl;
    
    ::ExecCommand(CMD_GET_DEVICE_TOPOLOGY, inXml, outXml, &sId);
    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "Get Device Topology command success. " &lt;&lt; endl &lt;&lt; endl;
        cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    }
    else
    {
        cout&lt;&lt; "Get Device Topology command failed. Error code : " &lt;&lt; sId &lt;&lt;endl;
    }    
    
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}

void SampleEventListener::GetAttribute()
{
    std::string scannerID = "";
    cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; endl;
    cin >> scannerID;
    cout &lt;&lt; "Enter attribute number or comma separated attribute numbers : " ;
    std::string attribute_number = "";
    cin >> attribute_number;

    std::string inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + 
                        "&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>" + 
                        attribute_number + "&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";
            
    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;
    ::ExecCommand(CMD_RSM_ATTR_GET, inXml, outXml, &sId);    
    
    cout &lt;&lt; "================================" &lt;&lt; endl;
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "GetAttribute command success." &lt;&lt; endl &lt;&lt; endl;        
        cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    }
    else
    {
        cout &lt;&lt; "GetAttribute command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }
    cout &lt;&lt; "================================" &lt;&lt; endl&lt;&lt; endl;
}
   
void SampleEventListener::GetAttributeNext()
{
    std::string scannerID = "";
    cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; endl;
    cin >> scannerID;
    cout &lt;&lt; "Enter current attribute number : " ;
    std::string attribute_number = "";
    cin >> attribute_number;

    std::string inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + 
                        "&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>" + 
                        attribute_number + "&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";    
    
    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;
    ::ExecCommand(CMD_RSM_ATTR_GETNEXT, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;
    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "GetAttributeNext command success. " &lt;&lt; endl &lt;&lt; endl;        
        cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    }
    else
    {
        cout &lt;&lt; "GetAttributeNext command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }
    
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
void SampleEventListener::GetAllAttributes()
{    
    std::string scannerID = "";     
    
    cout &lt;&lt; "Enter scanner ID: ";
    cin >> scannerID;
    
    std::string inXml = "&lt;inArgs>&lt;scannerID>"+scannerID+"&lt;/scannerID>&lt;/inArgs>";
    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;
    ::ExecCommand(CMD_RSM_ATTR_GETALL, inXml, outXml, &sId);
        
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "GetAllAttributes command success. " &lt;&lt; endl &lt;&lt; endl;        
        cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    }
    else
    {
        cout &lt;&lt; "GetAllAttributes command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}

void SampleEventListener::SetAttribute()
{
    std::string scannerID = "";
    cout &lt;&lt; "Enter scanner ID : " &lt;&lt; endl;
    cin >> scannerID;
    std::string attributeNumber = "";
    cout &lt;&lt; "Enter attribute number : " &lt;&lt; endl;
    cin >> attributeNumber;
    std::string dataType = "";
    cout &lt;&lt; "Enter data type : " &lt;&lt; endl;
    cin >> dataType;
    std::string attributeValue = "";
    cout &lt;&lt; "Enter attribute value : " &lt;&lt; endl;
    cin >> attributeValue;
    
    std::string inXml = "&lt;inArgs>&lt;scannerID>"+ scannerID +
                        "&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>&lt;attribute>&lt;id>" + attributeNumber + 
                        "&lt;/id>&lt;datatype>" + dataType + 
                        "&lt;/datatype>&lt;value>" + attributeValue + 
                        "&lt;/value>&lt;/attribute>&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";
    
    StatusID sId;    
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;   
    ::ExecCommand(CMD_RSM_ATTR_SET, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "SetAttribute command success. " &lt;&lt; endl &lt;&lt; endl;            
    }
    else
    {
        cout &lt;&lt; "SetAttribute command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }
    
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;

}
   
void SampleEventListener::SetAttributeStore()
{
    std::string scannerID = "";
    cout &lt;&lt; "Enter scanner ID : " &lt;&lt; endl;
    cin >> scannerID;
    std::string attributeNumber = "";
    cout &lt;&lt; "Enter attribute number : " &lt;&lt; endl;
    cin >> attributeNumber;
    std::string dataType = "";
    cout &lt;&lt; "Enter data type : " &lt;&lt; endl;
    cin >> dataType;
    std::string attributeValue = "";
    cout &lt;&lt; "Enter attribute value : " &lt;&lt; endl;
    cin >> attributeValue;    

    std::string inXml = "&lt;inArgs>&lt;scannerID>"+ scannerID +
                        "&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>&lt;attribute>&lt;id>" + attributeNumber + 
                        "&lt;/id>&lt;datatype>" + dataType + 
                        "&lt;/datatype>&lt;value>" + attributeValue + 
                        "&lt;/value>&lt;/attribute>&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";
    
    StatusID sId;    
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl; 
    ::ExecCommand(CMD_RSM_ATTR_STORE, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "StoreAttribute command success. " &lt;&lt; endl &lt;&lt; endl;               
    }
    else
    {
        cout &lt;&lt; "StoreAttribute command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }    
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
void SampleEventListener::SetZeroWeight()
{
    std::string inXml = "&lt;inArgs>&lt;scannerID>1&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>&lt;attribute>&lt;id>6019&lt;/id>&lt;datatype>X&lt;/datatype>&lt;value>0&lt;/value>&lt;/attribute>&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";

    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;     
    ::ExecCommand(CMD_RSM_ATTR_SET, inXml, outXml, &sId);
        
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "SetZeroWeight command success. " &lt;&lt; endl &lt;&lt; endl;          
    }
    else
    {
        cout &lt;&lt; "SetZeroWeight command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
//Event EventListener for get Get Version number of Core scanner
void SampleEventListener::GetVersion() {
    
    std::string inXml = "&lt;inArgs>&lt;/inArgs>";   
    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;
    ::ExecCommand(CMD_GET_VERSION, inXml, outXml, &sId);
        
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "GetVersion command success. " &lt;&lt; endl &lt;&lt; endl;        
        cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    }
    else
    {
        cout &lt;&lt; "GetVersion command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;    
}

void SampleEventListener::Close()
{
    StatusID status;
    ::Close(0, &status);

}
   
string getStringFromRawData(unsigned char* rawData,int startIndex, int endIndex)
{
    int numElements = endIndex-startIndex;
    char buffer [numElements];
    int j=0;
    for(int i=startIndex;i&lt;endIndex;i++){
        sprintf (&buffer[j++], "%c", rawData[i]);
    }
    string str(buffer);
    return str;
}

void SampleEventListener::OnImageEvent( short eventType, int size, short imageFormat, char* sfimageData, int dataLength, std::string& pScannerData )
{
    cout &lt;&lt; "OnImageEvent" &lt;&lt; endl;
}
   
void SampleEventListener::OnBinaryDataEvent( short eventType, int size, short dataFormat, unsigned char* sfBinaryData, std::string&  pScannerData)
{    
    //Constants for ISO15434 messages
    const unsigned char ISO_RS = 0x1E;      // ISO15454 Format Trailer Character
    //const unsigned char ISO_GS = 0x1D;    // ISO15454 Data Element Separator
    const unsigned char ISO_EOT = 0x04;     // ISO15454 Message Trailer Character
    const unsigned char MSG_EASYCAP = 0;    // ISO15451 Message DocCap message number
    FILE *imgFile; 
    cout &lt;&lt; "OnBinaryDataEvent" &lt;&lt; endl;
        
    int packetLength = (sfBinaryData[0] &lt;&lt; 24) |
                    (sfBinaryData[1] &lt;&lt; 16) |
                    (sfBinaryData[2] &lt;&lt; 8) |
                    sfBinaryData[3];
    
    if(packetLength+4!= size)
    {
        cout &lt;&lt; "Incorrect packet size\n" &lt;&lt; endl;
    }
    else
    {
        if(sfBinaryData[4]!= MSG_EASYCAP)
        {
            cout &lt;&lt; "Incorrect Msg type\n" &lt;&lt; endl;
        }
        else
        {
            // ISO15434 Envelope: is message header correct?
            if ((sfBinaryData[5] != '[') || (sfBinaryData[6] != ')') || (sfBinaryData[7] != '>') || (sfBinaryData[8] != ISO_RS))
            {
                cout &lt;&lt; "Incorrect message header\n" &lt;&lt; endl;
            }
            else
            {
                // ISO15434 Envelope: is message header correct?
                if (sfBinaryData[size - 1] != ISO_EOT)
                {
                    cout &lt;&lt; "Incorrect message header ISO_EOT\n" &lt;&lt; endl;
                }
                else
                {
                    cout &lt;&lt; "Correct packet received \n" &lt;&lt; endl;
                    ISO15434formatEnvelope *anEnvelope = new ISO15434formatEnvelope(sfBinaryData,size, 9);
                    while (anEnvelope->getNext())
                    {
                        string fileType = anEnvelope->getFileType();

                        if (fileType == "BarCode")
                        {
                            string decodeData=getStringFromRawData(sfBinaryData,anEnvelope->getDataIndex(),anEnvelope->getDataIndex()+anEnvelope->getDataLength());
                            cout &lt;&lt; "Barcode received " &lt;&lt; endl;
                            cout &lt;&lt; " Data type = "&lt;&lt;  (int)decodeData.at(0) &lt;&lt; endl;
                            cout &lt;&lt; " Data = "&lt;&lt; decodeData.substr(1,anEnvelope->getDataLength())&lt;&lt; endl;
                        }
                        else
                        {
                            char filename[200];
                            string fileFormat = anEnvelope->getFileType();
                            time_t t = time(0);   // get time now
                            tm* now = localtime(&t);
                            sprintf(filename,"ZIMG-%d%d%d%d%d%d%s%s", now->tm_year + 1900, now->tm_mon + 1,now->tm_mday,now->tm_hour,now->tm_min,now->tm_sec,".",fileFormat.c_str());
                            imgFile = fopen(filename, "w");
                            if (!imgFile)
                            {
                                cout &lt;&lt; "Unable to open file " &lt;&lt; filename&lt;&lt; endl;
                                continue;
                            }
                            fwrite(&sfBinaryData[anEnvelope->getDataIndex()]+6,sizeof(unsigned char),anEnvelope->getDataLength()+6,imgFile);
                            fflush(imgFile);
                            fclose (imgFile);
                            cout &lt;&lt; "ImageData saved in " &lt;&lt;filename&lt;&lt; endl;
                        }
                    }
                }
            }  
        }
    }
}
   
void SampleEventListener::OnVideoEvent( short eventType, int size, char* sfvideoData, int dataLength, std::string& pScannerData )
{
    cout &lt;&lt; "OnVideoEvent" &lt;&lt; endl;
}

void SampleEventListener::OnPNPEvent( short eventType, std::string ppnpData )
{
    string str;
    if (eventType == SCANNER_ATTACHED) {
        cout &lt;&lt; "Scanner attached" &lt;&lt; endl;
        str = ppnpData;
    } else if (eventType == SCANNER_DETACHED) {
        cout &lt;&lt; "Scanner detached" &lt;&lt; endl;
        str =  ppnpData;
    } else {
        str = " UNKNOWN PNP Event ";
    }
    cout &lt;&lt; str &lt;&lt; endl;
}

void SampleEventListener::OnCommandResponseEvent( short status, std::string& prspData )
{
    cout &lt;&lt; endl &lt;&lt; "Scanner data: " &lt;&lt; prspData &lt;&lt; endl;
    cout &lt;&lt; "OnCommandResponseEvent" &lt;&lt; endl;
    cout &lt;&lt; prspData &lt;&lt; endl;
}

void SampleEventListener::OnScannerNotification( short notificationType, std::string& pScannerData )
{
    cout &lt;&lt; endl &lt;&lt; "Scanner event data: " &lt;&lt; pScannerData &lt;&lt; endl;
    cout &lt;&lt; "OnScannerNotification" &lt;&lt; endl;
}

void SampleEventListener::OnIOEvent( short type, unsigned char data )
{
    cout &lt;&lt; "OnIOEvent" &lt;&lt; endl;
}
   
void SampleEventListener::OnScanRMDEvent( short eventType, std::string& prmdData )
{
    cout &lt;&lt; "OnScanRMDEvent" &lt;&lt; endl;
        cout &lt;&lt; "Out XML " &lt;&lt; endl;
        cout &lt;&lt; prmdData &lt;&lt; endl;
}

void SampleEventListener::OnDisconnect()
{
    cout &lt;&lt; "OnDisconnect" &lt;&lt; endl;
}

void SampleEventListener::OnBarcodeEvent(short int eventType, std::string & pscanData)
{
    cout &lt;&lt; "Barcode Detected" &lt;&lt; endl;
    cout &lt;&lt; "Out XML" &lt;&lt; endl;
    cout &lt;&lt; pscanData &lt;&lt; endl;
}

void SampleEventListener::RebootScanner()
{
    
}
   
void SampleEventListener::FirmwareUpdate()
{
    std::string inXml;
    std::string outXml;
    std::string datFilePath; 
    StatusID sId;
    std::string scannerID;
    std::string bulkOption;
    
    std::cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; std::endl;
    std::cin >> scannerID;
    std::cout &lt;&lt; "Enter Firmware DAT file path: " &lt;&lt; std::endl;
    std::cin >> datFilePath;
    std::cout &lt;&lt; "Enter USB communication mode 1=hid, 2=bulk : ";
    std::cin >> bulkOption;
    
    inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;cmdArgs>&lt;arg-string>" + datFilePath + "&lt;/arg-string>&lt;arg-int>" + bulkOption + "&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;     
    ::ExecCommand(CMD_DEVICE_UPDATE_FIRMWARE, inXml, outXml, &sId);
        
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "Firmware Update command success. " &lt;&lt; endl &lt;&lt; endl;              
    }
    else
    {
        cout &lt;&lt; "Firmware Update command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;    
}
   
void SampleEventListener::FirmwareUpdateFromPlugin()
{
    std::string inXml;
    std::string outXml;
    std::string pluginFilePath=""; 
    StatusID sId;
    std::string scannerID;
    std::string bulkOption;
    
    std::cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; std::endl;
    std::cin >> scannerID;
    std::cout &lt;&lt; "Enter Firmware Plug-in file path: " &lt;&lt; std::endl;
    //std::cin >>  pluginFilePath;

    while ( pluginFilePath.size() &lt; 4 ){
        std::getline(std::cin, pluginFilePath);
    }
    
    if ( !(pluginFilePath.substr(pluginFilePath.find_last_of(".")+ 1) == "SCNPLG") ){
        std::cout &lt;&lt; "Please Enter a file with extension .SCNPLG." &lt;&lt; std::endl &lt;&lt; std::endl;
        return;
    }
    
    std::cout &lt;&lt; "Enter USB communication mode 1=hid, 2=bulk : ";
    std::cin >> bulkOption;
    
    inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;cmdArgs>&lt;arg-string>" + pluginFilePath + "&lt;/arg-string>&lt;arg-int>" + bulkOption + "&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl; 
    ::ExecCommand(CMD_DEVICE_UPDATE_FIRMWARE_FROM_PLUGIN, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "FirmwareUpdate From Plug-in command success. " &lt;&lt; endl &lt;&lt; endl;              
    }
    else
    {
        cout &lt;&lt; "FirmwareUpdate From Plug-in command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
void SampleEventListener::StartNewFirmware()
{
    std::string inXml;
    std::string outXml;
    StatusID sId;
    std::string scannerID;
    
    std::cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; std::endl;
    std::cin >> scannerID;
        
    inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>"; 
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;   
    ::ExecCommand(CMD_START_NEW_FIRMWARE, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "Start New Firmware command success. " &lt;&lt; endl &lt;&lt; endl;            
    }
    else
    {
        cout &lt;&lt; "Start New Firmware command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
void SampleEventListener::AbortFirmwareUpdate()
{
    std::string inXml;
    std::string outXml;
    StatusID sId;
    std::string scannerID;    
    
    std::cout &lt;&lt; "Enter Scanner ID : " &lt;&lt; std::endl;
    std::cin >> scannerID;
    
    inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>";
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl; 
    ::ExecCommand(CMD_DEVICE_ABORT_UPDATE_FIRMWARE, inXml, outXml, &sId);
    
    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "Abort Firmware Update command success. " &lt;&lt; endl &lt;&lt; endl;              
    }
    else
    {
        cout &lt;&lt; "Abort Firmware Update command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}
   
/**
* Method to execute action attribute related commands.
* added to v1.3.0 release.
* @param opCode
*/
void SampleEventListener::ExecuteActionCommand(CmdOpcode opCode)
{
    std::string scannerID = "";
    std::string ledNumber = "";
    std::string beeperCode = "";
    std::string inXml;
    std::string commandName = "";
            
    switch (opCode)
    {
        case CMD_DEVICE_LED_ON:
        case CMD_DEVICE_LED_OFF:
        {
            commandName = "Device LED ON/OFF command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            cout &lt;&lt; "Enter LED number : ";
            cin >> ledNumber;

            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + 
                                "&lt;/scannerID>&lt;cmdArgs>&lt;arg-int>" + ledNumber +
                                "&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";
            break;
        }
        case CMD_DEVICE_BEEP_CONTROL:
        {
            commandName = "Beep command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            cout &lt;&lt; "Enter Beeper code : ";
            cin >> beeperCode;

            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + 
                                "&lt;/scannerID>&lt;cmdArgs>&lt;arg-int>" + beeperCode +
                                "&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";
            break;
        }
        case CMD_DEVICE_SCAN_ENABLE:
        case CMD_DEVICE_SCAN_DISABLE:
        {
            commandName = "Device Scan Enable/Disable command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>";
            break;
        }
        case CMD_REBOOT_SCANNER:
        {
            commandName = "Reboot scanner command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>";
            break;
        }
        case CMD_DEVICE_AIM_ON:
        case CMD_DEVICE_AIM_OFF:
        {
            commandName = "Device AIM ON/OFF command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>";
            break;
        }
        case CMD_LOAD_CONFIGURATION:
        {
            std::string config_file_path = "";
            commandName = "Configuration update ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            cout &lt;&lt; "Enter configuration file path : ";
            cin.ignore();
            std::getline(std::cin, config_file_path);

            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>" + 
                    "&lt;cmdArgs>&lt;arg-string>" + config_file_path + "&lt;/arg-string>&lt;/cmdArgs>" +
                    "&lt;/inArgs>";
            break;
        }
        default:
        {
            commandName = "Default Action command ";
            cout &lt;&lt; "Enter scanner ID : ";
            cin >> scannerID;
            inXml = "&lt;inArgs>&lt;scannerID>" + scannerID + "&lt;/scannerID>&lt;/inArgs>";
            break;
        }
    }
        
    StatusID sId;
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl; 
    ::ExecCommand(opCode, inXml, outXml, &sId);

    cout &lt;&lt; "================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; commandName &lt;&lt; "success. " &lt;&lt; endl &lt;&lt; endl;              
    }
    else
    {
        cout &lt;&lt; commandName &lt;&lt; "failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    } 
    cout &lt;&lt; "================================" &lt;&lt; endl &lt;&lt; endl;
}

/**
* Method to execute switch host mode command (option 20).
*/
void SampleEventListener::SwitchHostMode()
{
    std::string scannerID = "";
    cout &lt;&lt; "Enter scanner ID : ";
    cin >> scannerID;
    std::string hostMode = "";
    cout &lt;&lt; "Host mode options : " &lt;&lt; endl;
    cout &lt;&lt; "   1. USB-HIDKB " &lt;&lt; endl;
    cout &lt;&lt; "   2. USB-SNAPI with imaging " &lt;&lt; endl;
    cout &lt;&lt; "   3. USB-SNAPI without imaging " &lt;&lt; endl;
    cout &lt;&lt; "   4. USB-IBMHID " &lt;&lt; endl;
    cout &lt;&lt; "   5. USB-IBMTT " &lt;&lt; endl;
    cout &lt;&lt; "Enter host mode to switch into (1-5): ";
    cin >> hostMode;
    std::string hostModeString = "";
    int hostModeInteger = atoi(hostMode.c_str());
    switch (hostModeInteger)
    {
        case 1:
        {
            hostModeString = "XUA-45001-3";
            break;
        }  
        case 2:
        {
            hostModeString = "XUA-45001-9";
            break;
        }
        case 3:
        {
            hostModeString = "XUA-45001-10";
            break;
        } 
        case 4:
        {
            hostModeString = "XUA-45001-1";
            break;
        } 
        case 5:
        {
            hostModeString = "XUA-45001-2";
            break;
        } 
        default:
        {
            cout &lt;&lt; "=================================" &lt;&lt; endl;
            cout &lt;&lt; "Error : Invalid value entered!!!"  &lt;&lt; endl;
            cout &lt;&lt; "=================================" &lt;&lt; endl&lt;&lt; endl;
            return;
        }
    }
    
    std::string inXml = "&lt;inArgs>&lt;scannerID>"+ scannerID +"&lt;/scannerID>&lt;cmdArgs>"
                        "&lt;arg-string>"+ hostModeString +"&lt;/arg-string>"
                        "&lt;arg-bool>FALSE&lt;/arg-bool>&lt;arg-bool>TRUE&lt;/arg-bool>&lt;/cmdArgs>&lt;/inArgs>";
    
    StatusID sId;    
    std::string outXml;
    cout &lt;&lt; "In XML  : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;   
    ::ExecCommand(CMD_DEVICE_SWITCH_HOST_MODE, inXml, outXml, &sId);
    
    cout &lt;&lt; "==================================" &lt;&lt; endl;    
    if(sId == STATUS_OK)
    {
        cout &lt;&lt; "Switch host mode command success. " &lt;&lt; endl;            
    }
    else
    {
        cout &lt;&lt; "Switch host mode command failed. Error code : " &lt;&lt; sId &lt;&lt; endl;
    }
    
    cout &lt;&lt; "==================================" &lt;&lt; endl &lt;&lt; endl;
}
</code>
</pre>

                                                    <p>After implementation for the class IEventListenerXml, the main class can create an instance of the class SampleEventListener for the demonstration application. It is mandatory to implement IEventListenerXml class because it is an abstract class provided by zebra-scanner. Following is main.cpp for the sample application.</p>

                                                    <h3 id="mainmethodimplementation" class="anchor"><a class="heading-anchor" href="#mainmethodimplementation"><span></span></a>Main Method Implementation (ConsoleMain.cpp)</h3>

<pre class="prettyprint">
<code>
/*
* ©2022 Zebra Technologies LLC. All rights reserved.
*/

#include "ConsoleMain.h"
#include "ConsoleSampleEventListener.h"

#include &lt;stdlib.h>
//class LoggingContext;

bool hasAlreadyOpen = false;

int ReturnChoice()
{
    cout &lt;&lt; "======Select CoreScanner command====" &lt;&lt; endl;
    cout &lt;&lt; "=== 1. GetAttribute " &lt;&lt; endl;
    cout &lt;&lt; "=== 2. GetAllAttributes " &lt;&lt; endl;
    cout &lt;&lt; "=== 3. Get Scanners " &lt;&lt; endl;
    cout &lt;&lt; "=== 4. SetAttribute " &lt;&lt; endl;
    cout &lt;&lt; "=== 5. SetAttribute-Store " &lt;&lt; endl;
    cout &lt;&lt; "=== 6. Device LED ON or OFF " &lt;&lt; endl;
    cout &lt;&lt; "=== 7. Scanner Enable " &lt;&lt; endl;
    cout &lt;&lt; "=== 8. Scanner Disable " &lt;&lt; endl;
    cout &lt;&lt; "=== 9. Scanner Reboot " &lt;&lt; endl;
    cout &lt;&lt; "== 10. Action - Beeper command" &lt;&lt; endl;
    cout &lt;&lt; "== 11. AIM ON" &lt;&lt; endl;
    cout &lt;&lt; "== 12. AIM OFF" &lt;&lt; endl;
    cout &lt;&lt; "== 13. Get Device Topology" &lt;&lt; endl;
    cout &lt;&lt; "== 14. Firmware Update" &lt;&lt; endl;
    cout &lt;&lt; "== 15. Start New Firmware" &lt;&lt; endl;
    cout &lt;&lt; "== 16. Abort Firmware Update" &lt;&lt; endl;
    cout &lt;&lt; "== 17. Firmware Update From Plugin"&lt;&lt; std::endl;
    cout &lt;&lt; "== 18. Get Version "&lt;&lt; endl;
    cout &lt;&lt; "== 19. GetNextAttribute " &lt;&lt; endl;
    cout &lt;&lt; "== 20. Switch Host Mode - permanent" &lt;&lt; endl;
    cout &lt;&lt; "== 21. Configuration Update " &lt;&lt; endl;
        
    cout &lt;&lt; "====================================" &lt;&lt; endl;
    cout &lt;&lt; "=== 0. Exit" &lt;&lt; endl;
    cout &lt;&lt; "= 100. Main Menu" &lt;&lt; endl;
    //cout &lt;&lt; "====================================" &lt;&lt; endl;
    //cout &lt;&lt; "== 7. SetScaleZero " &lt;&lt; endl;
    //cout &lt;&lt; "== 8. Discover Tunneling " &lt;&lt; endl;
    //cout &lt;&lt; "== 9. Open called again " &lt;&lt; endl;
    cout &lt;&lt; "====================================" &lt;&lt; endl;
    cout &lt;&lt; "Enter choice : " ;
            
    int choice = 0;
    cin >> choice;
    return choice;
}

int main(void)
{
    cout &lt;&lt; "Zebra Scanner Sample Application" &lt;&lt; endl;
    cout &lt;&lt; "====================================" &lt;&lt; endl;

    SampleEventListener sel;
    SampleEventListener sel2;

    if(STATUS_OK != sel.Open())
    {
        std::cout &lt;&lt; "Corescanner service is not Active." &lt;&lt; std::endl;
        return STATUS_ERROR;
    }
        
    sel.GetScanners();

    int choice = ReturnChoice();

    do 
    {
        switch (choice) 
        {
            case 1:
                sel.GetAttribute();
                break;
            case 2:
                sel.GetAllAttributes();
                break;
            case 3:
                sel.GetScanners();
                break;
            case 4:
                sel.SetAttribute();
                break;
            case 5:
                sel.SetAttributeStore();
                break;  
            case 6:
                sel.ExecuteActionCommand(CMD_DEVICE_LED_ON);
                break;
            case 7:
                sel.ExecuteActionCommand(CMD_DEVICE_SCAN_ENABLE);
                break;
            case 8:
                sel.ExecuteActionCommand(CMD_DEVICE_SCAN_DISABLE);
                break;
            case 9:
                sel.ExecuteActionCommand(CMD_REBOOT_SCANNER);
                break;
            case 10:
                sel.ExecuteActionCommand(CMD_DEVICE_BEEP_CONTROL);
                break;
            case 11:
                sel.ExecuteActionCommand(CMD_DEVICE_AIM_ON);
                break;
            case 12:
                sel.ExecuteActionCommand(CMD_DEVICE_AIM_OFF);
                break;
            case 13:
                sel.GetDeviceTopology();
                break;
            case 14:
                sel.FirmwareUpdate();
                break;
            case 15:
                sel.StartNewFirmware();
                break;
            case 16:
                sel.AbortFirmwareUpdate();
                break;
            case 17:
                sel.FirmwareUpdateFromPlugin();
                break;
            case 18:
                sel.GetVersion();
                break;
            case 19:
                sel.GetAttributeNext();
                break;
            case 20:
                sel.SwitchHostMode();
                break;
            case 21:
                sel.ExecuteActionCommand(CMD_LOAD_CONFIGURATION);
                break;	
            case 100:
                cout &lt;&lt; "====================================" &lt;&lt; endl;
                break;
            case 0:
            default:
                break;
        }
                
        if(choice != 0)
        {
            choice = ReturnChoice();
        }

    } 
    while (choice);
    
    sel.Close();
    return 0;
}
</code>
</pre>

                                                    <h3 id="callingopencommand" class="anchor"><a class="heading-anchor" href="#callingopencommand"><span></span></a>Calling Open Command</h3>

<pre class="prettyprint">
<code>
void SampleEventListener::Open()
{
    StatusID status;
    ::Open(this, SCANNER_TYPE_ALL, &status);

    // register for all events.
    std::string inXml = "&lt;inArgs>&lt;cmdArgs>&lt;arg-int>6&lt;/arg-int>&lt;arg-int>1,2,4,8,16,32&lt;/arg-int>&lt;/cmdArgs>&lt;/inArgs>";

    std::string outXml;
    ::ExecCommand(CMD_REGISTER_FOR_EVENTS, inXml, outXml, &status);
}
</code>
</pre>

                                                    <h3 id="callingclosecommand" class="anchor"><a class="heading-anchor" href="#callingclosecommand"><span></span></a>Calling Close Command</h3>

<pre class="prettyprint">
<code>
void SampleEventListener::Close()
{
    StatusID status;
    ::Close(0, &status);
}
</code>
</pre>

                                                    <h3 id="callinggetscannerscommand" class="anchor"><a class="heading-anchor" href="#callinggetscannerscommand"><span></span></a>Calling GetScanners Command</h3>

<pre class="prettyprint">
<code>
void SampleEventListener::GetScanners()
{
    unsigned short count;
    vector&ltunsigned int> list;
    string outXml;
    StatusID eStatus;

    ::GetScanners(&count, &list, outXml, &eStatus);

    cout &lt;&lt; "GetScanners" &lt;&lt; endl;
    cout &lt;&lt; outXml &lt;&lt; endl;
}
</code>
</pre>

                                                    <h3 id="callingexeccommand" class="anchor"><a class="heading-anchor" href="#callingexeccommand"><span></span></a>Calling ExecCommand Command</h3>

<pre class="prettyprint">
<code>
void SampleEventListener::GetAttribute()
{
    cout &lt;&lt; "================================" &lt;&lt; endl;
    cout &lt;&lt; "GetAttribute " &lt;&lt; endl;
    std::string scannerID = "";
    
    cout &lt;&lt; "Enter Scanner ID" &lt;&lt; endl;
    cin >> scannerID;
    
    cout &lt;&lt; "Enter attribute number or comma separated attribute numbers : ";
    std::string attribute_number = "";
    cin >> attribute_number;

    std::string inXml = "&lt;inArgs>&lt;scannerID>" + 
                        scannerID +
                        "&lt;/scannerID>&lt;cmdArgs>&lt;arg-xml>&lt;attrib_list>" +
                        attribute_number + 
                        "&lt;/attrib_list>&lt;/arg-xml>&lt;/cmdArgs>&lt;/inArgs>";

    cout &lt;&lt; "In XML : " &lt;&lt; inXml &lt;&lt; endl &lt;&lt; endl;
    StatusID sId;
    std::string outXml;
    ::ExecCommand(CMD_RSM_ATTR_GET, inXml, outXml, &sId);

    cout &lt;&lt; "Out XML : " &lt;&lt; outXml &lt;&lt; endl;
    cout &lt;&lt; "================================" &lt;&lt; endl;
}
</code>
</pre>

                                                    <hr>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>    
            <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			    <div class="modal-dialog">
				    <div class="modal-content">
					    <div class="modal-header">
						    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					    </div>
					    <div class="modal-body">
						    <div id="modalImg"></div>
					    </div>
			        </div>
		        </div>
            </div>
        </div>
        <footer id="footer" class="navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corporation, registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. &copy;2022 Zebra Technologies Corporation and/or its affiliates. All rights reserved. <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/terms-of-use.html">Terms &amp; Conditions</a>
                    </div>
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&amp;gid=3220074&amp;trk=anet_ug_hm&amp;goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/zebra-technologies"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer><!--/#footer-->
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/owl.carousel.min.js"></script>
        <script src="/js/mousescroll.js"></script>
        <script src="/js/smoothscroll.js"></script>
        <script src="/js/jquery.prettyPhoto.js"></script>
        <script src="/js/jquery.isotope.min.js"></script>
        <script src="/js/jquery.inview.min.js"></script>
        <script src="/js/wow.min.js"></script>
        <script src="/js/bootstrap-treenav.min.js"></script>
        <script src="/js/prettify.js"></script>
        <script src="/js/zepto.js"></script>
        <script src="/js/jquery.waterfall.js"></script>   
        <script src="/js/main.js"></script>
        <script type="text/javascript">
            (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
                e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
            })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

            _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
        </script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-72584442-1', 'auto');
            ga('send', 'pageview');
        </script> 
        <script>
            ChatraID = 'QDvZ76min4DhLW5vJ';
            (function(d, w, c) {
                var n = d.getElementsByTagName('script')[0],
                    s = d.createElement('script');
                w[c] = w[c] || function() {
                    (w[c].q = w[c].q || []).push(arguments);
                };
                s.async = true;
                s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
                    + '//call.chatra.io/chatra.js';
                n.parentNode.insertBefore(s, n);
            })(document, window, 'Chatra');
        </script>         
    </body>
</html>