<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utiltiescomp including EMDK for Android, EMDK for Xamarin, StageNow, Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="Pre-Filter Tutorial">
    <title>TC53E,EM45-Firmware Update - Zebra Technologies Techdocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
    <script src="/js/jquery.js"></script>
</head>
<!--/head-->


<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a>


                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TECHDOCS</strong></li>
                        <li>
                            <a href="/dcs/rfid">RFID</a>
                        </li>
                        <p class="navbar-text">RFID SDK for Android</p>
                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">



                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/guide/about">
                                About
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/guide/gettingstarted">
                                Getting Started
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/tutorials">
                                Tutorials
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/samples">
                                Samples
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/guide/programming-guides">
                                Guides
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/apis">
                                APIs
                            </a>
                        </li>
                        <li>
                            <a href="https://developer.zebra.com/community/home/discussions/">
                                <i class="fa fa-comments-o"></i>
                            </a>
                        </li>
                        <li>
                            <a href="/dcs/rfid/android/2-0-5-208/search">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>

                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div>
            <!--/.container-->
        </nav>
        <!--/nav-->
    </header>
     <!--/header-->
    <div class="container-fluid">
        <section id="blog">
            <div class="">
                <section class="content-with-sidebar">
                    <div class="row">
                        <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">


                            <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">

                                <ul class="nav">
                                    <li><strong>TC53E , EM45-Firmware Update</strong></li>
                                </ul>
                            </nav>

                            <script type="text/javascript">
                                $(document).ready(function() {
                                    $("#btn_SaveSmartDocOptions").click(function() {
                                        console.log('Saving Options');
                                        $("#modal-smartdocs").modal({
                                            show: false
                                        });
                                    });
                                    $("#btn_SaveSmartDocOptions").click(function() {
                                        console.log('Clearing Options');
                                        $("#modal-smartdocs").modal({
                                            show: false
                                        });
                                    });
                                });

                            </script>
                            <link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                            <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                            <script type="text/javascript">
                                $(document).ready(function() {

                                });

                            </script>
                        </div>
                        <div class="col-sm-9 ">
                            <div class="row">
                                <div class="col-sm-12">
                                    <section id="cta" class="wow fadeIn">
                                        <div class="">
                                            <h1 id="TC53E,EM45-Firmware Update tutorial" class="anchor"><a class="heading-anchor" href="#TC53E,EM45-Firmware Update"><span></span></a>Firmware Update</h1>
                                            <p>
                                                RFID SDK for Android
                                                2.0.5.208</p>
                                            <p>
                                                Applicable Devices : RFID integrated Mobile Computers
                                            </p>
                                        </div>
                                    </section>
                                </div>
                            </div>
                            <div id="mainContent" class="row">
                                <div class="col-sm-12">
                                    <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                                        <!-- Start of guide -->
                                        <div class="service-box wow fadeInRight">
                                            <div class="">

                                                <p></p>
                                                <h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

                                                <p>This Tutorial provides a walk-through of the steps to update firmware</p>


                                                <h3 id="createtheproject" class="anchor"><a class="heading-anchor" href="#createtheproject"><span></span></a>Create The Project</h3>
                                                <ul>
                                                    <li>Start by creating a new project in Android Studio. For help, see the <a href="../../tutorials/tutCreateProjectAndroidStudio">Android Studio tutorial</a>. </li>
                                                    <li>Refer <a href="../../samples/hellorfid">Hello RFID</a> to prepare basic setup to work with RFID Reader and then follow this guide</li>
                                                </ul>

                                                <h3 id="tutorial1" class="anchor"><a class="heading-anchor" href="#tutorial1"><span></span></a>Details</h3>
                                                <p>SDK can update the TC53E   firmware using the following API.</p>
												<pre class="prettyprint"><code>
  updateFirmware(String path, String ip)                                                                 
                                                </code></pre>
 											  <p>User needs to make sure that path is obtained using the Android Storage Access Framework. IP address of the interface from where reader reach your android device hosting the firmware files.</p>
                                                
                                              <p><b>NOTE :</b> To receive the firmware update events set  setFirmwareUpdateEvent as true. Refer <a href="/dcs/rfid/android/2-0-5-208/guide/event-handling/">Event Handling</a> to manage events. </p>
                                              <pre class="prettyprint"><code>reader.Events.setFirmwareUpdateEvent(true);</code></pre>
                                                                                             <h2 id="code1" class="anchor"><a class="heading-anchor" href="#code1"><span></span></a>Setting Permission</h2>
                                                <p>The code is used to request the MANAGE_EXTERNAL_STORAGE permission, allowing the app to access and manage all files on the device's external storage. This is part of the MANAGE_EXTERNAL_STORAGE permission introduced in Android 11 above.</p>
                                                <pre class="prettyprint"><code>
        if(!Environment.isExternalStorageManager()){
                try{
                    Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);
                    intent.addCategory("android.intent.category.DEFAULT");
                    intent.setData(Uri.parse(String.format("package:%s",getApplicationContext().getPackageName())));
                    startActivityIfNeeded(intent,101);
                } catch (Exception exception){
                    Intent intent = new Intent();
                    intent.setAction(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);
                    startActivityIfNeeded(intent,101);
                }
            }
</code><a class="heading-anchor" href="#code2"><span></span></a>
</pre>
												
<p>Setting in the manifest file for accessing the firmware file from the external storage.</p>												
 <pre class="prettyprint"><code> 
 &lt;uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE" />
 </code></pre>
                                                
                                             <h2 id="code1" class="anchor"><a class="heading-anchor" href="#code1"><span></span></a>Performing Operation</h2>
                                                <p>Calling the Firmware update API call</p>
                                                <pre class="prettyprint"><code>
try {
    String path ="/storage/emulated/0/Download/CAAHFS00-001-R01D0.DAT";
    String ip = "127.0.0.1";   // localHost IP 
    reader.Config.updateFirmware(path, ip);
} catch (InvalidUsageException | OperationFailureException e) {
    if (e.getStackTrace().length > 0) {
        Log.e(TAG, e.getStackTrace()[0].toString());
    }
}
</code><a class="heading-anchor" href="#code2"><span></span></a>
</pre>
												
<p>Getting firmware update status under event status notification</p>												
 <pre class="prettyprint"><code>                                                   
 public void eventStatusNotify(RfidStatusEvents rfidStatusEvents) {
        if(rfidStatusEvents.StatusEventData.getStatusEventType() == STATUS_EVENT_TYPE.FIRMWARE_UPDATE_EVENT){
            String status = rfidStatusEvents.StatusEventData.FWEventData.getStatus();
            int imageDownloadProgress = rfidStatusEvents.StatusEventData.FWEventData.getImageDownloadProgress();
            int overallUpdateProgress = rfidStatusEvents.StatusEventData.FWEventData.getOverallUpdateProgress();
            Log.d(TAG,"FW status: "+status+", idp: "+imageDownloadProgress+", ovp: "+overallUpdateProgress );
        }
    }
}

 </code></pre>
												

                                                <h2 id="code2" class="anchor"><a class="heading-anchor" href="#code2"><span></span></a> Closer Look </h2>
												<p>Support function to launch file storage and select the firmware file.</p>
                                                <p>NOTE : Don't select file from shortcut path.</p>
                                                <pre class="prettyprint"><code>
  public void openFileStorage() {
        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("*/*");
        Uri uri = Uri.parse("content://com.android.externalstorage.documents/document/primary:Download");
        intent.putExtra("DocumentsContract.EXTRA_INITIAL_URI", uri);
        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
        activityResultLauncher.launch(intent);
    }
    public static File selectedPlugIn = null;
    ActivityResultLauncher<Intent> activityResultLauncher = registerForActivityResult(
            new ActivityResultContracts.StartActivityForResult(),
            new ActivityResultCallback<ActivityResult>() {
                @Override
                public void onActivityResult(ActivityResult result) {
                    if (result.getResultCode() == Activity.RESULT_OK) {
                        Intent data = result.getData();
                        Uri documentUri;
                        if (data != null) {
                            documentUri = data.getData();
                            selectedPlugIn = new File(documentUri.getPath());
                            selectedPlugIn = new File(selectedPlugIn.toString().replace("/document/primary:","/storage/emulated/0/"));
                        }
                    }
                }
            });

         </code></pre>

                                            
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--/.col-sm-6-->
                    </div>
                </section>
            </div>
        </section>

        <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    </div>
                    <div class="modal-body">
                        <div id="modalImg">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <footer id="footer" class="navbar-fixed-bottom">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-10">
                    ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corporation, registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. Â©2024 Zebra Technologies Corporation and/or its affiliates. All rights reserved. <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms &amp; Conditions</a>
                </div>
                <!--                 
                    <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
            </div>
        </div>
    </footer>
    <!--/#footer-->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>
    <script src="/js/main.js"></script>

    <script type="text/javascript">
        (function(w, d, t, u, n, s, e) {
            w['SwiftypeObject'] = n;
            w[n] = w[n] || function() {
                (w[n].q = w[n].q || []).push(arguments);
            };
            s = d.createElement(t);
            e = d.getElementsByTagName(t)[0];
            s.async = 1;
            s.src = u;
            e.parentNode.insertBefore(s, e);
        })(window, document, 'script', '//s.swiftypecdn.com/install/v2/st.js', '_st');

        _st('install', 'zRzEsAUhWTTkrdEN2YfA', '2.0.0');

    </script>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-72584442-1', 'auto');
        ga('send', 'pageview');

    </script>

    <script>
        ChatraID = 'QDvZ76min4DhLW5vJ';
        (function(d, w, c) {
            var n = d.getElementsByTagName('script')[0],
                s = d.createElement('script');
            w[c] = w[c] || function() {
                (w[c].q = w[c].q || []).push(arguments);
            };
            s.async = true;
            s.src = (d.location.protocol === 'https:' ? 'https:' : 'http:') +
                '//call.chatra.io/chatra.js';
            n.parentNode.insertBefore(s, n);
        })(document, window, 'Chatra');

    </script>


</body>

</html>