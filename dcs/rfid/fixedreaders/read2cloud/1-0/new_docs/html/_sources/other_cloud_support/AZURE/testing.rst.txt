===============================
Test Reader Connection To Cloud
===============================

.. important::
    
    This guide uses ``Azure IoT Hub VS Code Plugin`` to test cloud connection.



1. Install `vscode <https://code.visualstudio.com/download>`_.

2. Install Azure IoT Hub VS Code plugin from Extensions.

    .. image:: images/AZURE14.png

3. Login into Azure account from VS code and connect to AZURE IOT HUB created

    .. image:: images/AZURE15.png

4. The device connection status can be indicated by green color as shown.

5. Monitor events generated by device by right click on device and click ``Start Monitoring Built-in Event Endpoint``.

    .. image:: images/AZURE16.png

6. Tag Data Events and Management Events will be printed in the terminal.

7. To send commands to device right click on the device and click ``Send C2D Message to Device``.

    * Example Command to retrieve device firmware versions.

        .. code-block::

            {
                "command": "get_version",
                "command_id": "16266718797272556",
                "payload": {}
            }
    
    * Response:

        .. image:: images/AZURE17.png


6. ``start/stop`` tag read events.


    * command to start tag reads.

        .. code-block:: json

            {
                "command": "start",
                "command_id": "16266718797272556",
                "payload": {}
            }
        
        .. figure:: images/AZURE18.png
    
    * Tag Data Events:

        .. figure:: images/AZURE19.png
        
    * command to stop tag reads.

        .. code-block:: json

            {
                "command": "stop",
                "command_id": "16266718797272556",
                "payload": {}
            }

.. important::

    For full set of supported commands refer :ref:`raw_mqtt_payloads` section.
