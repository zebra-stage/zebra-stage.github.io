
<!DOCTYPE html>
<html lang="en"><head>

    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Online Documentation for Zebra Technologies developer tools and utilties, including EMDK for Android, EMDK for Xamarin, StageNow and Enterprise Browser.">
    <meta name="author" content="Zebra Technologies">
    <meta name="google-site-verification" content="i4B78BrWnNy8ShJwe5feRW3jO3HE6gfYlYqYbxfl8yY">
    <meta name="msvalidate.01" content="6B651B00161BCE79B8950AC09D5C4C75">
    <meta title="API">
    <title>API - TechDocs</title>
    <!-- core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
<!--     
    <link href="/css/font-awesome.min.css" rel="stylesheet">
 -->    
    <link href="/css/all.css" rel="stylesheet">
    <link href="/css/v4-shims.css" rel="stylesheet">
    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.css" rel="stylesheet">
    <link href="/css/owl.transitions.css" rel="stylesheet">
    <link href="/css/prettyPhoto.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/responsive.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">
    <link href="/css/bootstrap-treenav.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]--> 

    <script src="//load.sumome.com/" data-sumo-site-id="699cb66cf4dc59352efb45705526d15cbe314e1cd43f7761b94d96f3cf7338e8" async="async"></script>
    <link rel="shortcut icon" href="/favicon.ico">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-01QJCMQM9N"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-01QJCMQM9N');
</script><script src="/js/jquery.js"></script></head><!--/head-->

<!-- Google tag -->





<body id="home" class="homepage" data-spy="scroll" data-offset="100" data-target="#toc">

    <header id="header">
        <nav id="main-menu" class="navbar navbar-default navbar-fixed-top" role="banner">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo" style="max-height:66px;float: inherit;
    padding-right: 3px;"></a> 
                    
                   
                </div>
                <div class="collapse navbar-collapse navbar-left">
                    <ul class="nav navbar-nav">
                        <li class="navbar-text pull-left"><strong>TechDocs</strong></li>
                        <p class="navbar-text">
                                            Zebra VAS SDK
                                            2.0
                        </p>

                    </ul>
                </div>
                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        


                        <li>
                            <a href="/nfc-vas/2-0/guide/about">
                                    About
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/2-0/guide/api">
                                    API
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/2-0/guide/demo">
                                    Demo
                            </a>
                        </li>
                        <li>
                            <a href="/nfc-vas/2-0/search">
                                    <i class="fa fa-search"></i>
                            </a>
                        </li>
                        
                        <!-- <li ><a href="/products">SDKs</a></li>
                        <li ><a href="/samples">Samples</a></li>
                        <li ><a href="/guides">Guides</a></li>
                        <li ><a href="/tutorials">Tutorials</a></li>
                        <li ><a href="/apis">APIs</a></li> -->
                        <!-- <li><a href="#"><input type="text" class="st-default-search-input"></a></li> -->
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
    </header><!--/header-->
<div class="container-fluid">
    <section id="blog">
        <div class="">
            <section class="content-with-sidebar">
            <div class="row">
                <div class="col-sm-3 hidden-sm hidden-xs" id="sidebar">
                    
                    
                    <nav id="toc" data-toggle="toc" data-spy="affix" style="height: 75%; max-width: 225px; overflow-y: auto; ">
                        
                        <ul class="nav">
                            <li><strong>API</strong></li>
                        </ul>
                    </nav>
                    <div class="modal fade" id="modal-smartdocs" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
                    	<div class="modal-dialog">
                    		<div class="modal-content">
                    			<div class="modal-header">
                    				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                    			</div>
                    			<div class="modal-body">
                    				<form>
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">MX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="4.0">4.0</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="5.0">5.0</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">OSX Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="1.0">1.0</option>
                    					  <option value="1.2">1.2</option>
                    					  <option value="1.3.4-56">1.3.4-56</option>
                    					  <option value="3.4">3.4</option>
                    					  <option value="3.5">3.5</option>
                    					  <option value="3.6">3.6</option>
                    					  <option value="4.1">4.1</option>
                    					  <option value="4.2">4.2</option>
                    					  <option value="4.3">4.3</option>
                    					  <option value="4.4">4.4</option>
                    					</select>
                    				  </div>						
                    				  <div class="form-group">
                    				    <label for="exampleInputEmail1">Android Version On Device:</label>
                    				    <select class="form-control">
                    					  <option value="23">6.0 Marshmallow</option>
                    					  <option value="22">5.1 Lollipop</option>
                    					  <option value="21">5.0 Lollipop</option>
                    					  <option value="19">4.4 Kitkat</option>
                    					  <option value="18">4.3 Jellybean</option>
                    					  <option value="17">4.2.x Jellybean</option>
                    					  <option value="16">4.1.x Jellybean</option>
                    					  <option value="15">4.0.3-4.0.4 Ice Cream Sandwich</option>
                    					  <option value="14">4.0-4.0.2 Ice Cream Sandwich</option>
                    					  <option value="10">2.3.3-2.3.4 Gingerbread</option>
                    					</select>
                    				  </div>
                    				  <div class="form-group">
                    				  	<button class="primary" id="btn_SaveSmartDocOptions">Save Changes</button><button class="primary" id="btn_ClearSmartDocOptions">Clear Changes</button>
                    				  </div>
                    				</form>
                    			</div>
                    	</div>
                      </div>
                    </div>
                    
                    <script type="text/javascript">
                        $(document).ready(function() {
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Saving Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        	$( "#btn_SaveSmartDocOptions" ).click(function() {
                      			console.log('Clearing Options');
                      			$("#modal-smartdocs").modal({show: false});
                    		});
                        });
                    </script><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.css">
                    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v0.3.0/dist/bootstrap-toc.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                    
                        });
                    
                    
                    </script>
                </div>                
                <div class="col-sm-9 ">
                    <div class="row">
                        <div class="col-sm-12">
                            <section id="cta" class="wow fadeIn">
                                <div class="">
                                    <h1 id="api" class="anchor"><a class="heading-anchor" href="#api"><span></span></a>API</h1>
                                    <p>
                                            Zebra VAS SDK
                                            2.0
                                    </p>
                                </div>
                            </section>                    
                        </div>
                    </div>
                    <div id="mainContent" class="row">
                        <div class="col-sm-12">
                            <div class="blog-post blog-large wow fadeInLeft" data-wow-duration="300ms" data-wow-delay="0ms">
                            <!-- Start of guide -->
                                <div class="service-box wow fadeInRight">
                                    <div class="">

                                        <p></p><h2 id="overview" class="anchor"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>

<p><strong>Zebra VAS SDK</strong> is an Android library built on top of the existing Android NFC APIs and the third party VAS protocol, such as Apple VAS or Google Smart Tap. It offers streamlined configuration and management of the necessary procedures involved in accessing and processing data from an NFC pass.</p>

<p>The main SDK components are:</p>

<ol>
<li><strong>ZebraNfcVas -</strong> The main class that manages all interaction with NFC passes, configures the NFC reader, and reads the pass data, whether or not from the mobile wallet.</li>

<li><strong>VasConfig -</strong> A base class object used to provide an interface for storing and accessing merchant parameters required to access an NFC pass. Two types of configuration objects are automatically generated when creating a VasConfig object:


<ul>
<li><strong><a href="#applevasconfig">AppleVasConfig</a> -</strong> A VASConfig object that contains information specific to Apple VAS, used for accessing and processing passes from Apple Wallet.</li>

<li><strong><a href="#smarttapvasconfig">SmartTapVasConfig</a> -</strong> A VASConfig object that contains information specific to Google Smart Tap, used for accessing and processing passes from Google Wallet.</li></ul>
</li>

<li><strong>Pass object -</strong> Encapsulates the information about the NFC pass that is read, including the payload data and supplementary metadata. The Pass object enables developers to validate the pass type and ensure that it is not a replay attack (i.e. the date and time is within 10 seconds of the actual date and time), adhering to Apple requirements.</li>
</ol>

<p>This section offers guidance on developing an application to read NFC passes using the Zebra VAS SDK. A single application can be built to access and read Apple Wallet, Google Wallet, or other NFC passes.</p>

<hr>

<h2 id="installsdk" class="anchor"><a class="heading-anchor" href="#installsdk"><span></span></a>Install SDK</h2>

<p>Perform the steps below to install the SDK and prepare to run the developed application on the device:</p>

<ol>
<li><strong>Download Zebra VAS SDK</strong> from <a href="https://www.zebra.com/us/en/support-downloads/software/developer-tools/value-added-services-sdk.html">Zebra Support Portal</a> and extract the files from the download.</li>

<li><strong>Import the Android .AAR file</strong> into the "libs" folder of the Android application project.</li>

<li><strong>Install the Zebra VAS Service .APK</strong> on the supported Zebra mobile computer. This is required to establish communication between the SDK and the Zebra device via the Zebra VAS Service.</li>
</ol>

<h3 id="upgradefromprevioussdk" class="anchor"><a class="heading-anchor" href="#upgradefromprevioussdk"><span></span></a>Upgrade from Previous SDK</h3>

<p>For apps developed with prior version VAS SDK v1.0, there are some APIs that have been updated or removed. Refer to the changes in the table below:</p>

<table class="facelift" align="center" style="width:100%" border="1" padding="5px">
  <tbody><tr bgcolor="#dce8ef">
    <th>Original API <br>(VAS SDK v1.0)</th>
    <th>Replacement API <br>(VAS SDK v2.0)</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>createAppleVasConfig()</td>
    <td>AppleVasConfig avc = new AppleVasConfig;</td>
    <td>Create an AppleVasConfig object.</td>
  </tr>

  <tr>
    <td>setPassTypeIds()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>avc.setPassTypeIds();</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
  </tr>

 <tr>
    <td>setPrivateKey()</td>
    <td>AppleVasConfig avc = new AppleVasConfig();<br>avc.setPrivateKey();</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

 <tr>
    <td>setFilter()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>avc.setFilter();</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

 <tr>
    <td>setMerchantURL()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>avc.setMerchantURL();</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

  <tr>
    <td>setVasConfig()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>ZebraNfcVas VasSdk = new ZebraNfcVas(Context);<br>VasSdk.setVasConfig(avc); </td>
    <td>VasConfig is an abstract class extended by AppleVasConfig. A ZebraNfcVas object must be created, then pass the AppleVasConfig object.</td>
 </tr>

  <tr>
    <td>setVasConfigs()</td>
    <td>ZebraNfcVas VasSdk = new ZebraNfcVas(Context);<br>VasSdk.setVasConfigs(Arrays.asList(new VasConfig[]{az_cfg, z_cfg}));</td>
    <td>VasConfig is an abstract class extended by AppleVasConfig. A ZebraNfcVas object must be created, then pass the list of AppleVasCOnfig objects. This allows multiple objects to be set at the same time.</td>
 </tr>

  <tr>
    <td>getType()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>avc.getType();</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

  <tr>
    <td>getMerchantUrl()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>Avc.getMerchantURL()</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

  <tr>
    <td>getTerminalMode()</td>
    <td>AppleVasConfig avc = new AppleVasConfig(); <br>Avc.getTerminalMode()</td>
    <td>This method is moved to AppleVasConfig class. The AppleVasConfig object must be created before calling this method.</td>
 </tr>

</tbody></table>

<h3 id="xamarinsupport" class="anchor"><a class="heading-anchor" href="#xamarinsupport"><span></span></a>Xamarin Support</h3>

<p><strong>To use Zebra VAS SDK in Xamarin,</strong> convert "zebranfcvas-release.aar" to a .DLL file. Refer to instructions from Microsoft to <a href="https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/binding-an-aar">bind an .AAR</a>. If .DLL creation fails with errors during the build, resolve the issue by removing TerminalMode with the following change to Metadata.xml, then binding the library:</p>

<pre class="prettyprint"><code>    &lt;remove-node
        path="/api/package[@name='com.zebra.nfcvas']/class[@name='ZebraNfcVas.TerminalMode']"&gt;
    &lt;/remove-node&gt;
</code></pre>

<p>Terminal Mode is reserved for further implementation and future expansion. Removing it does not cause any harm. Zebra mobile computers are VAS_Only terminals; payment is not supported.</p>

<hr>

<h2 id="developerguide" class="anchor"><a class="heading-anchor" href="#developerguide"><span></span></a>Developer Guide</h2>

<p>Zebra VAS SDK is capable of reading Apple Wallet passes (Apple VAS) and Google Wallet (Google Smart Tap) passes. This section provides guidance for developers to build apps based on the type of pass being read. Refer to the sample <a href="../demo/">demo app</a> and corresponding source code.</p>

<h3 id="applevas" class="anchor"><a class="heading-anchor" href="#applevas"><span></span></a>Apple VAS</h3>

<p>The following provides guidance to develop an application that reads an Apple Wallet NFC pass:</p>

<ol>
<li><p><strong>Implement IZebraServiceConnection Interface -</strong> It is required to implement IZebraServiceConnection Interface to receive callback methods from the Zebra NFC VAS service on the service connection/disconnection and NFC pass object. The 3 callback methods are: onServiceConnected, onServiceDisconnected, and onPassDetected.</p>

<pre class="prettyprint"><code>public class AppleVASActivity extends AppCompatActivity implements IZebraServiceConnection {
    ...
}
</code></pre>

<p>Replace "AppleVASActivity" with the name of the class implemented within your application.</p></li>

<li><p><strong>Create a ZebraNFCVAS object and intialize the object -</strong> ZebraNfcVas object should be declared in onCreate() and initialized by calling init(). </p>

<pre class="prettyprint"><code>private ZebraNfcVas vasSDK;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init(); //UI Initialization

<pre><code>vasSdkInit();
</code></pre>

}

private void vasSdkInit() {
    Log.e(TAG, "vasSdkInit");
    vasSDK = new ZebraNfcVas(this);
    vasSDK.init();
}
</code></pre></li>

<li><p><strong>After initialization, a callback to onServiceConnection is available.</strong> Proceed with the subsequent steps for implementation of this method.</p>

<pre class="prettyprint"><code>@Override
public void onServiceConnection() {
    Log.e(TAG,"onServiceConnection");
    //Start with the app implemenation
}
</code></pre>

<p>a. <strong>Create an AppleVasConfig object -</strong> This is the object that the SDK uses to interact with a presented NFC pass.</p>

<pre class="prettyprint"><code>AppleVasConfig av_cfg = new AppleVasConfig();
</code></pre>

<p>b. <strong>Set the appropriate configuration values in the AppleVasConfig object</strong> by using the following APIs:</p>

<ul>
<li>av_cfg.setPassTypeIds(String[] ptis)</li>

<li>az_cfg.setPrivateKey(PrivateKeyStr)</li>

<li>av_cfg.setFilter(byte[] filter, ZebraNfcVas.FilterType)</li>

<li>av_cfg.setMerchantURL(String url)</li></ul>

<p><strong>Sample code</strong> (<strong>Note:</strong> Replace Merchant URL, Pass Type ID, and private key with your specific values):</p>

<pre class="prettyprint"><code>az_cfg.setPrivateKey(ZebraPrivateKeyStr);
az_cfg.setFilter(new byte[]{(byte) 0xaa, 0x55, (byte) 0xaa, 0x55}, ZebraNfcVas.FilterType.ExactMatch);
az_cfg.setMerchantURL("https://www.zebra.com/vas-signup");
az_cfg.setPassTypeIds(new String[]{"pass.com.pronto.zebra-wallet-pass.demo"});
</code></pre>

<p>c. <strong>Create the ZebraNFCVAS object.</strong> This holds the instance of a VasConfig object for pass detection operation.</p>

<pre class="prettyprint"><code>vasSDK.createZebraNfcVasConfig();
</code></pre>

<p>d. <strong>Set the AppleVasConfig object into the ZebraNFCVAS object -</strong> This informs the SDK about the configuration data to use when reading the NFC pass. Multiple VasConfigs or a single VasConfig can be provided.</p>

<p><strong>Multiple VasConfigs:</strong></p>

<pre class="prettyprint"><code>vasSDK.setVasConfigs(List&lt;VasConfig&gt;);
</code></pre>

<p><strong>Single VasConfig:</strong></p>

<pre class="prettyprint"><code>vasSDK.setVasConfig(av_cfg);
</code></pre>

<p>e. <strong>Call connectToReader -</strong> This establishes the connection with the NFC reader.</p>

<pre class="prettyprint"><code>vasSDK.connectToReader();
</code></pre>

<p>f. Perform one of the following based on your requirement. Only read capability is enabled and polling is configured to read NfcA, NfcB, NfcV, and IsoDep tags:</p>

<ul>
<li><p><strong>If no additional tags are required to be read,</strong> call enableReadPassMode():</p>

<pre class="prettyprint"><code>vasSDK.enableReadPassMode();
</code></pre></li>

<li><p><strong>If NfcF or Ndef tags are additionally required to be read,</strong> call enableReadPassMode() with parameters:</p>

<pre class="prettyprint"><code>enableReadPassMode(boolean doSkipNdef, boolean doEnableNFC_F);
</code></pre>

<p><strong>For NfcF tags,</strong> set "doEnableNFC_F" to "true." <br>
<strong>For Ndef tags,</strong> set "doSkipNdef" to "false." <strong>Note:</strong> Performance could be affected since an NDEF check is performed along with additional checks from the OS after initialzing the tag communication. This affects the processing time of the NFC pass. The advantage of this is the OS reads the NDEF message and it is be enumerated in the Tag object, which can be easily be accessed. </p></li></ul>

<p>g. <strong>When an NFC pass is read, onPassDetected() is called -</strong> This method receives the Pass object when a pass is read. Process the data read from the pass based on business needs.</p>

<pre class="prettyprint"><code>public void onPassDetected(Pass pass) {
    Log.v(TAG, "&gt;&gt;&gt; PASS DETECTED &lt;&lt;&lt;");
    // Process data read from the pass
}
</code></pre>

<p>h. <strong>Call disableReadPassMode before the app goes to the background or when the activity ends -</strong> This returns the device to the default NFC Forum polling mode.</p>

<pre class="prettyprint"><code>@Override
public void onPause() {
    super.onPause();
    Log.i(TAG, "onPause called &amp; Reader Mode Deactivated .....");
    vasSDK.disableReadPassMode();
}
</code></pre></li>
</ol>

<!--
#### Apple VAS - SDK Upgrade

For applications originally developed using VAS SDK 1.0 and are upgrading to VAS SDK 2.0, refer to the table below on the replacement methods:

1. In v1.0, AppleVAS was created using vasSdk.createAppleVasConfig() method. In v2.0 use the following to create an AppleVAS configuration object:

        AppleVasConfig avc = new AppleVasConfig();

2. In v1.0, vasSdk.setPrivateKey() method was used to set the private key in AppleVas. In v2.0, set private key is now part of AppleVasConfig class. Create the AppleVasConfig object (shown in step 1), then call the method to set private key:

        AppleVasConfig avc = new AppleVasConfig();
        avc.setPrivateKey();

3. In v1.0, vasSdk.setPassTypeIds() method was used to set pass type IDs in AppleVAS. In v2.0, it is now part of AppleVasConfig class. Create the AppleVasConfig object (shown in step 1), then call the method to set pass type IDs:

        AppleVasConfig avc = new AppleVasConfig();
        avc.setPassTypeIds();

4. In v1.0, vasSdk. setFilter () method was used to set the filter in AppleVAS. In v2.0, it is now part of AppleVasConfig class. Create the AppleVasConfig object (shown in step 1), then call the method to set filter:

        AppleVasConfig avc = new AppleVasConfig();
        avc.setFilter();

5. In v1.0, vasSdk.setMerchantURL() was used to set the merchant URL in AppleVAS. In v2.0, it is now part of AppleVasConfig class. Create the AppleVasConfig object (shown in step 1), then call the method to set the merchange URL:

        AppleVasConfig avc = new AppleVasConfig();
        avc.setMerchantURL();

6. In v1.0, vasSdk.getType() method was used to return the type of object. In v2.0, it is now part of AppleVasConfig class. Create the AppleVasConfig object (shown in step 1), then return the type of object:

        AppleVasConfig avc = new AppleVasConfig();
        avc.getType();

7. In v1.0, vasSdk. getMerchantUrl ();   we used to set the getMerchantUrl in appleVas using this method

Now in Version 2.0 we have a different way to do this. It is now part of AppleVasConfig class. So first create the AppleVasConfig object (Shown in option 1)
AppleVasConfig avc = new AppleVasConfig();

avc. getMerchantUrl ();

In Version 1.0 we used to set the getTerminalMode in appleVas using this method
vasSdk. getTerminalMode ();
Now in Version 2.0 we have a different way to do this. It is now part of AppleVasConfig class. So first create the AppleVasConfig object (Shown in option 1)
AppleVasConfig avc = new AppleVasConfig();

avc. getTerminalMode ();

In Version 1.0 we used to set the set config like this.
vasSdk. setVasConfig ();
Now in Version 2.0 we have a different way to do this.  Now this method takes parameter as VasConfig. Vasconfig is an Abstract class Extentded by AppleVasConfig, So now we have to pass the AppleVasConfig object created in Option 1 in this method .


vasSdk. setVasConfig (avc);

In Version 1.0 we used to set the set config like this.
vasSdk. setVasConfigs ();
Now in Version 2.0 we have a different way to do this.  Now this method takes parameter as List<VasConfig>. Vasconfig is an Abstract class Extentded by AppleVasConfig, So now we have to pass the list of AppleVasConfig objects . This help to set Multiple AppleVasConfig at a time .


vasSDK.setVasConfigs(Arrays.asList(new VasConfig[]{az_cfg, z_cfg}));

-->

<h3 id="googlesmarttap" class="anchor"><a class="heading-anchor" href="#googlesmarttap"><span></span></a>Google Smart Tap</h3>

<p>The following provides guidance to develop an application that reads a Google Wallet NFC pass:</p>

<ol>
<li><p><strong>Implement IZebraServiceConnection Interface -</strong> It is required to implement IZebraServiceConnection Interface to receive callback methods from the Zebra NFC VAS service on the service connection/disconnection and NFC pass object. The 3 callback methods are: onServiceConnected, onServiceDisconnected, and onPassDetected.</p>

<pre class="prettyprint"><code>public class AppleVASActivity extends AppCompatActivity implements IZebraServiceConnection {
    ...
}
</code></pre>

<p>Replace "AppleVASActivity" with the name of the class implemented within your application.</p></li>

<li><p><strong>Create a ZebraNFCVAS object and intialize the object -</strong> ZebraNfcVas object should be declared in onCreate() and initialized by calling init(). </p>

<pre class="prettyprint"><code>private ZebraNfcVas vasSDK;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init(); //UI Initialization

<pre><code>vasSdkInit();
</code></pre>

}

private void vasSdkInit() {
    Log.e(TAG, "vasSdkInit");
    vasSDK = new ZebraNfcVas(this);
    vasSDK.init();
}
</code></pre></li>

<li><p><strong>After initialization, a callback to onServiceConnection is available.</strong> Proceed with the subsequent steps for implementation of this method.</p>

<pre class="prettyprint"><code>@Override
public void onServiceConnection() {
    Log.e(TAG,"onServiceConnection");
    //Start with the app implemenation
}
</code></pre>

<p>a. <strong>Create an SmartTapVasConfig object -</strong> This is the object that the SDK uses to know how to interact with a presented NFC pass.</p>

<pre class="prettyprint"><code>SmartTapVasConfig g_cfg = new SmartTapVasConfig();
</code></pre>

<p>b. <strong>Set the appropriate configuration values in the AppleVasConfig object</strong> by using the following APIs:</p>

<ul>
<li>g_cfg.setCollectorID(String collID)</li>

<li>g_cfg.setPrivateKey(String PrivateKeyStr, int PrivateKeyVersion);</li></ul>

<p>Optionally, additional values can be configured:</p>

<ul>
<li>g_cfg.setMerchantNameNdefRecord(NdefRecord record)</li>

<li>g_cfg.setStoreLocationIdNdefRecord(NdefRecord record)</li>

<li>g_cfg.setServiceTypes(ServiceType[] type)</li></ul>

<p><strong>Sample code</strong> (<strong>Note:</strong> Replace Collector ID, NDEF record, store location ID NDEF record, and private key with your specific values):</p>

<pre class="prettyprint"><code>g_cfg.setCollectorID("12703788");    // decimal value
g_cfg.setPrivateKey(DemoPrivateKeyStr, DemoPrivateKeyVersion);//smartPrivateKey
g_cfg.setMerchantNameNdefRecord(rec);
g_cfg.setStoreLocationIdNdefRecord(rec);
g_cfg.setServiceTypes(new SmartTapVasConfig.ServiceType[]{SmartTapVasConfig.ServiceType.AllExceptPPSE});
g_cfg.setPrivateKey(ZebraPrivateKeyStr, ZebraPrivateKeyVersion);
</code></pre>

<p>c. <strong>Create the ZebraNFCVAS object.</strong> This holds the instance of a VasConfig object for pass detection operation.</p>

<pre class="prettyprint"><code>vasSDK.createZebraNfcVasConfig();
</code></pre>

<p>d. <strong>Set the AppleVasConfig object into the ZebraNFCVAS object -</strong> This informs the SDK about the configuration data to use when reading the NFC pass. For Google, only a single configuration is supported at a time.</p>

<pre class="prettyprint"><code>vasSDK.setVasConfig(VasConfig);
</code></pre>

<ul>
<li><p>Sample code to configure only Google Smart Tap:</p>

<p><code>vasSDK.setVasConfig(g_cfg);</code></p></li></ul>

<p>Since Apple supports multiple configurations, the following applies if configuring both Apple VAS and Google Smart Tap at the same time:</p>

<pre class="prettyprint"><code>vasSDK.setVasConfigs(List&lt;VasConfig&gt;);
</code></pre>

<ul>
<li><p>Sample code to configure both Apple VAS and Smart Tap configurations at the same time:</p>

<p><code>vasSDK.setVasConfigs(Arrays.asList(new VasConfig[]{az_cfg, g_cfg}));</code></p></li></ul>

<p>e. <strong>Call connectToReader -</strong> This establishes the connection with the NFC reader.</p>

<pre class="prettyprint"><code>vasSDK.connectToReader();
</code></pre>

<p>f. Perform one of the following based on your requirement. Only read capability is enabled and polling is configured to read NfcA, NfcB, NfcV, IsoDep, and GOOGLE_SMART_TAP tags:</p>

<ul>
<li><p><strong>If no additional tags are required to be read,</strong> call enableReadPassMode():</p>

<pre class="prettyprint"><code>vasSDK.enableReadPassMode();
</code></pre></li>

<li><p><strong>If NfcF or Ndef tags are additionally required to be read,</strong> call enableReadPassMode() with parameters:</p>

<pre class="prettyprint"><code>enableReadPassMode(boolean doSkipNdef, boolean doEnableNFC_F);
</code></pre>

<p><strong>For NfcF tags,</strong> set "doEnableNFC_F" to "true." <br>
<strong>For Ndef tags,</strong> set "doSkipNdef" to "false." <strong>Note:</strong> Performance could be affected since an NDEF check is performed along with additional checks from the OS after initialzing the tag communication. This affects the processing time of the NFC pass. The advantage of this is the OS reads the NDEF message and it is be enumerated in the Tag object, which can be easily be accessed. </p></li></ul>

<p>g. <strong>When an NFC pass is read, onPassDetected() is called -</strong> This method receives the Pass object when a pass is read. Process the data read from the pass based on business needs.</p>

<pre class="prettyprint"><code>public void onPassDetected(Pass pass) {
    Log.v(TAG, "&gt;&gt;&gt; PASS DETECTED &lt;&lt;&lt;");
    // Process data read from the pass
}
</code></pre>

<p>h. <strong>Call disableReadPassMode before the app goes to the background or when the activity ends -</strong> This returns the device to the default NFC Forum polling mode.</p>

<pre class="prettyprint"><code>@Override
public void onPause() {
    super.onPause();
    Log.i(TAG, "onPause called &amp; Reader Mode Deactivated .....");
    vasSDK.disableReadPassMode();
}
</code></pre></li>
</ol>

<hr>

<h2 id="zebranfcvas" class="anchor"><a class="heading-anchor" href="#zebranfcvas"><span></span></a>ZebraNfcVAS</h2>

<p>ZebraNfcVAS is the main class of the SDK that establishes a connection with the Zebra NFC VAS service, handles all the communication with the NFC passes, configures the NFC reader, and reads the pass from the Apple or Google Wallet (if in use). This object must be explicitly created and initialized. After the pass is successfully read, ZebraNfcVas decrypts the data (given that a private key is provided and all information is correct and intact) and returns the Pass object back to the caller. If a private key is not provided, the SDK returns the encrypted data. The following subsections detail the available methods.</p>

<!--
Updated and removed APIs from VAS SDK 1.0:


<table class="facelift" align="center" style="width:85%" border="1" padding="5px">
  <tr bgcolor="#dce8ef">
    <th>Original API</th>
    <th>Replacement API</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>createAppleVasConfig</td>
    <td>AppleVasConfig</td>
    <td>Create an AppleVasConfig object, for example:<br /><code>AppleVasConfig Avc = new AppleVasConfig</code></td>
  </tr>

  <tr>
    <td>setPassTypeIds</td>
    <td>Avc.setPassTypeIds()</td>
    <td>This method is moved to AppleVasConfig class.</td>
  </tr>

 <tr>
    <td>setPrivateKey</td>
    <td>Avc.setPrivateKey()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

 <tr>
    <td>setFilter</td>
    <td>Avc.setFilter()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

 <tr>
    <td>setMerchantURL</td>
    <td>Avc.setMerchantURL()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

  <tr>
    <td>setVasConfig</td>
    <td>VasSdk.setVasConfig(VasConfig)</td>
    <td>Create ZerbaNfcVas object, for example:<br /><code>ZebraNfcVas VasSdk = new ZebraNfcVas(Context)</code></td>
 </tr>

  <tr>
    <td>setVasConfigs</td>
    <td>VasSdk.setVasConfigs(List<VasConfig> configs)</td>
    <td>Create ZebraNfcVas objects, for example:<br /><code>ZebraNfcVas VasSdk = new ZebraNfcVas(Context)</code></td>
 </tr>

  <tr>
    <td>getType</td>
    <td>Avc.getType()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

  <tr>
    <td>getMerchantUrl</td>
    <td>Avc.getMerchantURL()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

  <tr>
    <td>getTerminalMode</td>
    <td>Avc.getTerminalMode()</td>
    <td>This method is moved to AppleVasConfig class.</td>
 </tr>

</table>

-->

<h3 id="init" class="anchor"><a class="heading-anchor" href="#init"><span></span></a>init</h3>

<pre class="prettyprint"><code>    public void init()
</code></pre>

<p>Initializes and binds to the Zebra NFC VAS Service.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong> <code>RuntimeException</code> if the service is not available or the security/signature does not match.</p>

<h3 id="onserviceconnected" class="anchor"><a class="heading-anchor" href="#onserviceconnected"><span></span></a>onServiceConnected</h3>

<p>This is a callback method invoked when Zebra NFC VAS service is connected. IZebraServiceConnection interface must be implemented. When init() is called, it tries to connect to the Zebra NFC VAS service. If successful, it calls onServiceConnected.</p>

<h3 id="onservicedisconnected" class="anchor"><a class="heading-anchor" href="#onservicedisconnected"><span></span></a>onServiceDisconnected</h3>

<p>This is a callback method invoked when Zebra NFC VAS service is disconnected. IZebraServiceConnection interface must be implemented. When init() is called, it tries to connect to the Zebra NFC VAS service. If unsuccessful, it calls onServiceDisconnected.</p>

<h3 id="setvasconfig" class="anchor"><a class="heading-anchor" href="#setvasconfig"><span></span></a>setVasConfig</h3>

<pre class="prettyprint"><code>    public void setVASConfig()
</code></pre>

<p>Specifies the VASConfig object to be used for interacting with the passes. Prior to using this method, createAppleVasConfig() must be called to create the VasConfig object. To retrieve or pass data, call createZebraVasConfig().</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> or <code>RuntimeException</code> if VasConfig object is null.</p>

<h3 id="setvasconfigs" class="anchor"><a class="heading-anchor" href="#setvasconfigs"><span></span></a>setVasConfigs</h3>

<pre class="prettyprint"><code>    public void setVASConfigs()
</code></pre>

<p>Specifies the VASConfig objects to be used for interacting with the passes. Prior to using this method, createAppleVasConfig() must be called to create the VasConfig object. To retrieve or pass data, call createZebraVasConfig().</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> or <code>RuntimeException</code> if VasConfig object is null.</p>

<h3 id="clearconfigs" class="anchor"><a class="heading-anchor" href="#clearconfigs"><span></span></a>clearConfigs</h3>

<pre class="prettyprint"><code>    public void clearConfigs()
</code></pre>

<p>Clears the VASConfig object that is used for interacting with passes. After clearing the object, data from the NFC passes cannot be retrieved until calling: setPrivateKey(), setFilter(), setPassIds(), and setVasConfig().</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<p>Throws: <code>RuntimeException</code> if VasConfig object is null.</p>

<h3 id="createzebravasconfig" class="anchor"><a class="heading-anchor" href="#createzebravasconfig"><span></span></a>createZebraVasConfig</h3>

<pre class="prettyprint"><code>    public void createZebraVasConfig()
</code></pre>

<p>Creates the ZebraConfig object and holds the instance of a VasConfig object for pass detection operation.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return:</strong> None</p>

<h3 id="connecttoreader" class="anchor"><a class="heading-anchor" href="#connecttoreader"><span></span></a>connectToReader</h3>

<pre class="prettyprint"><code>    pubilc void connectToReader()
</code></pre>

<p>Obtains a connection to the NFC adapter.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> Returns error code indicating success or failure:</p>

<ul>
<li><code>ERROR_NFC_IS_DISABLED</code> - the NFC adapter is disabled</li>

<li><code>ERROR_NO_NFC_SUPPORT</code> - the hardware does not have NFC support</li>

<li><code>ERROR_SUCCESS</code> - connection is successful</li>
</ul>

<h3 id="enablereadpassmode" class="anchor"><a class="heading-anchor" href="#enablereadpassmode"><span></span></a>enableReadPassMode</h3>

<pre class="prettyprint"><code>    pubilc void enableReadPassMode()
</code></pre>

<p>Limits the NFC controller to reader mode, disabling card emulation. Polling is configured for the Zebra NFC reader to read NFC Type A and Type B cards.</p>

<p><i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> <strong>IMPORTANT NOTE:</strong> Since the NFC resources are fully allocated, no other application (running on the foreground or background) can request for NFC resources.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<h3 id="disablereadpassmode" class="anchor"><a class="heading-anchor" href="#disablereadpassmode"><span></span></a>disableReadPassMode</h3>

<pre class="prettyprint"><code>    public void disableReadPassMode()
</code></pre>

<p>Returns to default NFC Forum polling mode. This method should be called whenever the app moves to the background or when the activity is terminated.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong> None</p>

<h3 id="onpassdetected" class="anchor"><a class="heading-anchor" href="#onpassdetected"><span></span></a>onPassDetected</h3>

<pre class="prettyprint"><code>    public void onPassDetected(Pass pass)
</code></pre>

<p>The interface method onPassDetected is a callback that gets invoked when an NFC pass is read. The SDK passes the NFC pass and identifies whether the pass is encrypted or decrypted. <strong>Pass</strong> is a class where all Pass data can be accessed via getter methods:</p>

<ul>
<li><code>public String getStatusWord()</code> – Returns the StatusWord of the NFC pass detected</li>

<li><code>public Result getResultCode()</code> - Returns the ResultCode of the NFC pass detected</li>

<li><code>public byte[] getMerchantId()</code> - Returns the MerchantID (Pass Type Identifier converted to SHA256) of the NFC pass detected</li>

<li><code>public String getPassTypeId()</code> - Returns the PassTypeID of the NFC pass detected</li>

<li><code>public Type getPassType()</code> - Returns the PassType of the NFC pass detected</li>

<li><code>public byte[] getPayloadMessage()</code> - Returns the PayloadMessage of the NFC pass detected</li>

<li><code>public Date getPayloadDate()</code> - Returns the PayloadDate of the NFC pass detected</li>

<li><code>public boolean isDecrypted()</code> – Returns the status of the payload message: decrypted or encrypted</li>
</ul>

<p><strong>Parameter:</strong> Pass object</p>

<p><strong>Return value:</strong> None</p>

<h3 id="getsdkversion" class="anchor"><a class="heading-anchor" href="#getsdkversion"><span></span></a>getSdkVersion</h3>

<pre class="prettyprint"><code>    public String getSdkVersion()
</code></pre>

<p>Returns the version of the SDK formatted as MAJ.MIN.BUG.</p>

<p><strong>Parameter:</strong> <code>Activity activity</code> - This is the activity that registered for the NFC intent Response resp, the class that has implemented the response interface and receives the pass data.</p>

<p><strong>Return value:</strong> String - the SDK version in MAJOR.MINOR.BUG_FIX format.</p>

<hr>

<h2 id="vasconfig" class="anchor"><a class="heading-anchor" href="#vasconfig"><span></span></a>VasConfig</h2>

<p>This is the abstract base class (interface) for a VAS configuration object and is not instantiated by itself. It contains information for accessing and interpreting a NFC pass.&nbsp;The configuration object contains one or more Pass Type Identifier(s), which identifies the pass to be returned, and may contain an associated private key, used to decrypt data from the pass. The following subsections detail the available methods.</p>

<p><i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> <b>NOTE:</b> Google Smart Tap supports only 1 configuration object. Apple VAS supports 1 or more configuration objects.</p>

<h3 id="enumvastype" class="anchor"><a class="heading-anchor" href="#enumvastype"><span></span></a>enum VasType&nbsp;</h3>

<p>Identifies the type of VasConfig object as one of two possible values:</p>

<ul>
<li><code>APPLE_VAS</code> - Apple VAS configuration object</li>

<li><code>GOOGLE_SMART_TAP</code> - Google Smart Tap configuration object</li>

<li><code>UNKNOWN</code> - Other NFC-type configuration object, including ISO or NDEF-formatted</li>
</ul>

<h3 id="gettype" class="anchor"><a class="heading-anchor" href="#gettype"><span></span></a>getType</h3>

<pre class="prettyprint"><code>    public VasType getType()&nbsp;
</code></pre>

<p>Returns the type of the VASConfig object.</p>

<p><strong>Return value:</strong>&nbsp;One of the following:</p>

<ul>
<li><code>VasType.APPLE_VAS</code> - Apple VAS configuration object</li>

<li><code>VasType.GOOGLE_SMART_TAP</code>&nbsp;- Google Smart Tap configuration object</li>

<li><code>UNKNOWN</code> - Other NFC-type configuration object, including ISO or NDEF-formatted</li>
</ul>

<h3 id="setprivatekeyapplevas" class="anchor"><a class="heading-anchor" href="#setprivatekeyapplevas"><span></span></a>setPrivateKey (Apple VAS)</h3>

<pre class="prettyprint"><code>    public void setPrivateKey(String key)&nbsp;
</code></pre>

<p><strong><em>This method only applies to Apple VAS.</em></strong> Sets the EC private key in PEM format. The private key must be properly formatted or decrypted and cannot be null or an empty string. For example:</p>

<pre class="prettyprint"><code>    -----BEGIN EC PARAMETERS-----\n&nbsp;
    alkidnklde==\n&nbsp;
    -----END EC PARAMETERS-----\n&nbsp;
    -----BEGIN EC PRIVATE KEY——\n&nbsp;
    aslkdflaksdfjfkk328klxld…\n&nbsp;
    ak7ujvbn9b8o3bv9hae98fn2…\n&nbsp;
    9asjh90fuh34n2uh33==\n&nbsp;
    -----END EC PRIVATE KEY-----\n&nbsp;
</code></pre>

<p><strong>Parameters:</strong>&nbsp;String key</p>

<p><strong>Return values:</strong>&nbsp;None</p>

<p><strong>Throws:</strong>&nbsp;<code>InvalidParameterException</code>&nbsp;if the parameter is null or the string is empty.</p>

<p><br></p>

<h3 id="setprivatekeygooglesmarttap" class="anchor"><a class="heading-anchor" href="#setprivatekeygooglesmarttap"><span></span></a>setPrivateKey (Google Smart Tap)</h3>

<pre class="prettyprint"><code>     public void setPrivateKey(String key, int Version)&nbsp;
</code></pre>

<p><strong><em>This method only applies to Google Smart Tap.</em></strong> Sets the EC private key in PEM format. The private key must be properly formatted or decrypted and cannot be null or an empty string. For example:</p>

<pre class="prettyprint"><code>    -----BEGIN EC PARAMETERS-----\n&nbsp;
    alkidnklde==\n&nbsp;
    -----END EC PARAMETERS-----\n&nbsp;
    -----BEGIN EC PRIVATE KEY——\n&nbsp;
    aslkdflaksdfjfkk328klxld…\n&nbsp;
    ak7ujvbn9b8o3bv9hae98fn2…\n&nbsp;
    9asjh90fuh34n2uh33==\n&nbsp;
    -----END EC PRIVATE KEY-----\n&nbsp;
</code></pre>

<p><strong>Parameters:</strong></p>

<ul>
<li>String key</li>

<li>Int Version&nbsp;
<br></li>
</ul>

<p><strong>Return values:</strong>&nbsp;None</p>

<p><strong>Throws:</strong>&nbsp;<code>InvalidParameterException</code> if the parameter is null or the empty string.</p>

<p>See best practices for Google Smart Tap <a href="#googlesmarttap-1">Private Key Management</a>.</p>

<hr>

<h2 id="applevasconfig" class="anchor"><a class="heading-anchor" href="#applevasconfig"><span></span></a>AppleVASConfig</h2>

<p>AppleVASConfig is the configuration class object for Apple NFC passes.&nbsp;It is inherited from VasConfig and contains parameters specific to Apple VAS for accessing and processing Apple Wallet passes. This configures the criteria used to choose which passes to access and read. The passes that are read must match the configuration parameters specified by the AppleVASConfig object. The following subsections detail the available methods.</p>

<p><b></b></p><p style="font-size:24px;"><b>constructor</b></p> <!-- "constructor" as a heading here causes a build error--><p></p>

<pre class="prettyprint"><code>    public void AppleVASConfig()
</code></pre>

<p>Creates and initializes a new AppleVasConfig object containing details specific to Apple VAS.</p>

<h3 id="setpasstypeids" class="anchor"><a class="heading-anchor" href="#setpasstypeids"><span></span></a>setPassTypeIds</h3>

<pre class="prettyprint"><code>    public void setPassTypeIds(String[] passTypeIds)
</code></pre>

<p>Sets one or more Pass Type Identifiers in the app prior to reading the NFC pass. This overwrites any pre-existing values. The Pass Type Identifier is provided by Apple, Google, or the issuer of the NFC pass. The app uses these unique string values as identifiers to ensure that when it reads the NFC pass, it can verify whether the pass type identifier matches the one that was used during the NFC pass creation process. These identifiers are typically in the form 'com.companyname.pass' or other similar reverse domain string. When an NFC reader specifies one or more Pass Type Identifiers, only passes that match those identifiers are retrieved.</p>

<p><strong>Parameters:</strong> String[] passTypeIds <br>
This is an array of one or more Pass Type IDs. For example, {“pass.com.zebra”} or {“pass.com.zebra”, “pass.com.xyz.somethingspecific”}. When attempting to read a pass, the pass being read is checked against each Pass Type ID in the array.</p>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong></p>

<ul>
<li><code>InvalidParameterException</code> when there are null or empty strings in the array, invalid characters, or the array is empty in any of the Pass Type IDs.</li>

<li><code>UnsupportedEncodingException</code> when a UTF-8 conversion encoding error occurs.</li>

<li><code>NoSuchAlgorithmException</code> when a SHA256 conversion error occurs.</li>
</ul>

<h3 id="setfilter" class="anchor"><a class="heading-anchor" href="#setfilter"><span></span></a>setFilter</h3>

<pre class="prettyprint"><code>    public void setFilter(byte[] filter, FilterType type)
</code></pre>

<p><strong><em>Optional:</em></strong> Sets the filter information to be read for the NFC pass. The filter is supplied by the merchant of the NFC pass. This overwrites any pre-existing value. A company may issue passes for different reasons and/or uses. The filter offers the ability to issue numerous similar passes with distinguiahsable variations.</p>

<p>A sample use case could involve a company issuing a season of tickets to a sporting event. In this case, all the tickets originate from the same company, with each ticket sharing similarities except for access date, which serves as the sole distinguishing factor. This distinguishing factor is used as the filter to identify any combination of dates. For example, consider a scenario where there are 4 games taking place on different dates. The developer could assign each game a specific within the date filter. The Zebra VAS SDK SDK can support all 4 games by determining which bit is set. When using the NFC reader, a filter can be specified with one bit set for the current game, and it can be designated as a bit-mask. By doing so, any pass with the corresponding bit set for the present date can be read, while passes without the bit set can be skipped.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><strong>byte[] filter -</strong> This is a 4-byte array that is the filter value used during the pass retrieval process.</li>

<li><strong>FilterType type -</strong> This is one of two constants:


<ul>
<li><code>FILTER_TYPE_EXACT_MATCH</code> - When the specified filter value exactly matches the merchant pass filter value, the match is successful.</li>

<li><code>FILTER_TYPE_BIT_MASK</code> - When the specified filter value is bitwise ANDed with the merchant pass filter value and the result equals the merchant pass filter value, the match is successful.</li></ul>
</li>
</ul>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the filter value is not exactly 4 bytes in size.</p>

<h3 id="setfilternone" class="anchor"><a class="heading-anchor" href="#setfilternone"><span></span></a>setFilterNone</h3>

<pre class="prettyprint"><code>    public void setFilterNone()
</code></pre>

<p>Clears the filter for any filter value in a pass (including no filter value) to be accepted.</p>

<h3 id="setmerchanturl" class="anchor"><a class="heading-anchor" href="#setmerchanturl"><span></span></a>setMerchantURL</h3>

<pre class="prettyprint"><code>    public void setMerchantURL(String url)
</code></pre>

<p><strong><em>Optional:</em></strong> Sets the VAS Merchant URL where the Apple device should be directed if no pass is currently available on the device. This overwrites any pre-existing value.</p>

<p>Passes are often used as loyalty cards. In situations where a customer is not yet a loyalty member, the user could simply tap the reader, and the Merchant URL can be transmitted to the device, guiding the user to a sign-up page. This implementation requires specific server APIs and processes that are beyond the scope of this document.</p>

<p><strong>Parameter:</strong> String url <br>
This is the merchant URL string for the associated pass, which is generally used to sign-up for a pass. It <em>must</em> include "https://". The maximum string length is 64 bytes.</p>

<p><strong>Return value:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the length is too long or does not contain a valid "https://" header.</p>

<h3 id="getpasstypeids" class="anchor"><a class="heading-anchor" href="#getpasstypeids"><span></span></a>getPassTypeIds</h3>

<pre class="prettyprint"><code>    public String[] getPassTypeIds()
</code></pre>

<p>Gets the list of currently configured Pass Type IDs in string format.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li>String[] of Pass Type Ids.</li>

<li>null, if no passTypeIds have been set.</li>
</ul>

<h3 id="getmerchantids" class="anchor"><a class="heading-anchor" href="#getmerchantids"><span></span></a>getMerchantIds</h3>

<pre class="prettyprint"><code>    public byte[][] getMerchantIds()
</code></pre>

<p>Get the list of currently configured Merchant IDs as byte arrays, where the merchant ID is the the Pass Type ID converted to SHA256 format.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li>byte[][] of Merchant Ids</li>

<li>null, if no passTypeIds have been set.</li>
</ul>

<h3 id="getfilter" class="anchor"><a class="heading-anchor" href="#getfilter"><span></span></a>getFilter</h3>

<pre class="prettyprint"><code>    public byte[] getFilter()
</code></pre>

<p>Get the currently configured filter</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li>byte[] of the filter in exactly 5 bytes</li>

<li>null, if no filter has been set</li>
</ul>

<p>The filter[5] contains the filter type (0x01 is exact match, 0x02 is bit_mask).</p>

<h3 id="getmerchanturl" class="anchor"><a class="heading-anchor" href="#getmerchanturl"><span></span></a>getMerchantURL</h3>

<pre class="prettyprint"><code>    public String getMerchantURL()
</code></pre>

<p>Gets the Merchant URL string which the Apple device should be directed if no pass is currently available on the device. Generally this is provided for the user to sign-up for a pass.</p>

<p><strong>Parameter:</strong> None</p>

<p><strong>Return value:</strong></p>

<ul>
<li>If successful, returns the string of the merchant URL.</li>

<li>If unsuccessful and no merchant URL has been set, returns null.</li>
</ul>

<h3 id="getterminalmode" class="anchor"><a class="heading-anchor" href="#getterminalmode"><span></span></a>getTerminalMode</h3>

<pre class="prettyprint"><code>    public AppleVasConfig.TerminalMode getTerminalMode()
</code></pre>

<p>Returns the private key currently configured, in PEM format.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> This always returns <code>TerminalMode.VasOnly</code></p>

<h3 id="getprotocol" class="anchor"><a class="heading-anchor" href="#getprotocol"><span></span></a>getProtocol</h3>

<pre class="prettyprint"><code>    public AppleVasConfig.VasProtocol getProtocol()
</code></pre>

<p>Returns the protocol currently configured, in PEM format</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> This always returns <code>VasProtocol.FullVASProtocol</code></p>

<hr>

<h2 id="smarttapvasconfig" class="anchor"><a class="heading-anchor" href="#smarttapvasconfig"><span></span></a>SmartTapVasConfig</h2>

<p>SmartTapVasConfig is the configuration class object for Google Wallet passes.&nbsp;It is inherited from VASConfig and contains the parameters specific to Google Smart Tap for accessing and processing a Google Wallet passes. This configures the criteria used to choose which passes to access and read. The passes that are read must match the configuration parameters specific by the SmartTapVasConfig object.&nbsp;See <a href="https://developers.google.com/wallet">Google Wallet</a> documentation for reference. The following subsections detail the available methods.</p>

<h3 id="constructor-NaN" class="anchor"><a class="heading-anchor" href="#constructor-NaN"><span></span></a>constructor</h3>

<pre class="prettyprint"><code>    public void SmartTapVasConfig()
</code></pre>

<p>Creates and initializes a new VAS config object containing details specific to Google Smart Tap.</p>

<h3 id="setcollectorid" class="anchor"><a class="heading-anchor" href="#setcollectorid"><span></span></a>setCollectorID</h3>

<pre class="prettyprint"><code>    public void setCollectorID(String collId)
</code></pre>

<p>Specifies the single Collector ID associated with the pass(es) to be read.&nbsp;This is <em>mandatory</em> and serves as the primary value that is used to match with a NFC pass on the Android device.&nbsp;The pass on the Android device must contain a matching Collector ID. Decimal number identifiers are assigned to each pass issuer for identification purposes. Only passes that match the Collector ID specified are accepted. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> String collectorId
This is one Collector ID.&nbsp; Only one Collector ID is allowed</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong></p>

<ul>
<li><code>InvalidParameterException</code>&nbsp;if the array is empty, there are null or empty strings in the array, or invalid characters in any of the pass Type Ids.</li>

<li><code>UnsupportedEncodingException</code> if the UTF-8 conversion encoding is not available.&nbsp;UTF-8 conversion encoding is required to convert the PassTypeID string into byte encoding for the MerchantID calculation.</li>

<li><code>NoSuchAlgorithmException</code> if the SHA-256 algorithm is not available.&nbsp; This is required to automatically convert the PassTypeID to the equivalent MerchantID.</li>
</ul>

<h3 id="setservicetypes" class="anchor"><a class="heading-anchor" href="#setservicetypes"><span></span></a>setServiceTypes</h3>

<pre class="prettyprint"><code>    public void setServiceTypes(ServiceType[] types)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies an array of pass types that shall be accepted. One or more types may be specified, for example: Loyalty and/or GiftCard. The default value is "AllExceptPPSE".&nbsp;This overwrites any pre-existing values. See <a href="#enumservicetype">enum ServiceType</a> for all possible values.</p>

<p><strong>Parameters:</strong> ServiceType[] types
Array of one or more ServiceTypes. This must not be null and or empty.</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code>&nbsp;if the array is empty, there are null or empty strings in the array, or there are invalid characters in any of the pass Type Ids.</p>

<p>Sample code:</p>

<pre class="prettyprint"><code>    // Create a GoogleSmartTap Config object
    SmartTapVasConfig z_cfg = new SmartTapVasConfig();&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    // Set the service type. This is optional - if not specified, AllExceptPPSE is used (method example for this setServiceTypes)
    z_cfg.setServiceTypes(new SmartTapVasConfig.ServiceType[]{SmartTapVasConfig.ServiceType.AllExceptPPSE});
</code></pre>

<h3 id="enumservicetype" class="anchor"><a class="heading-anchor" href="#enumservicetype"><span></span></a>enum ServiceType</h3>

<pre class="prettyprint"><code>    public enum ServiceType{
        AllServices("All Services", 0x00),
        AllExceptPPSE("All Excpet PPSE", 0x01),
        Loyalty("Loyalty", 0x03),
        Offer("Offer", 0x04),
        GiftCard("Gift Card", 0x05),
        PrivateLabelCard("Private Label Card", 0x06),
        EventTicket("Event Ticket", 0x07),
        Flight("Flight", 0x08),
        Transit("Transit", 0x09),
        CloudBasedWallet("Cloud Based Wallet", 0x10),
        MobileMarketingPlatform("Mobile Marketing Platform", 0x11),
        Generic("Generic", 0x12),
        GenericPrivatePass("Generic Private Pass", 0x13),
        WalletCustomer("Wallet Customer", 0x40);

    }
</code></pre>

<h3 id="setposcapabilitiesarray" class="anchor"><a class="heading-anchor" href="#setposcapabilitiesarray"><span></span></a>setPosCapabilitiesArray</h3>

<pre class="prettyprint"><code>    public void setPosCapabilitiesArray(byte[] posCapabilities)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies a 5-byte array that indicates the POS capabilities. Data read from the NFC pass must match this data for validation. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> byte[] posCapabilities (must be 5 bytes)</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the array is null or not 5 bytes long.</p>

<h3 id="setstorelocationidndefrecord" class="anchor"><a class="heading-anchor" href="#setstorelocationidndefrecord"><span></span></a>setStoreLocationIdNdefRecord</h3>

<pre class="prettyprint"><code>    public void setStoreLocationIdNdefRecord(NdefRecord storeLocationIdRecord)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies the store location ID NDEF record to be placed into the Merchant data based on Google specifications. Data read from the NFC pass must match this data for validation. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> NdefRecord storeLocationIdRecord</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the NDEF record is NULL.</p>

<p>Sample code:</p>

<pre class="prettyprint"><code>    // Create a GoogleSmartTap Config object
    SmartTapVasConfig z_cfg = new SmartTapVasConfig();
    z_cfg.setCollectorID("95011179");

    // EXAMPLE - OPTIONAL FIELD - create an NDEF Record for the location ID in the Merchant NDEF Record
    ByteBuffer bb = ByteBuffer.allocate(4);
    byte [] locId = bb.putInt(12345).array();
    rec = new NdefRecord(NdefRecord.TNF_EXTERNAL_TYPE, new byte[]{(byte) 0x6c, (byte) 0x69, (byte) 0x64}, // 'lid' in byte form
        null, concatenateByteArrays(new byte[]{(byte) 0x04}, // payload format byte
        locId ));
    z_cfg.setStoreLocationIdNdefRecord(rec);
</code></pre>

<h3 id="setterminalidndefrecord" class="anchor"><a class="heading-anchor" href="#setterminalidndefrecord"><span></span></a>setTerminalIdNdefRecord</h3>

<pre class="prettyprint"><code>    public void setTerminalIdNdefRecord(NdefRecord terminalIdRecord)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies the terminal ID NDEF record to be placed into the Merchant data based on Google specifications. Data read from the NFC pass must match this data for validation. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> NdefRecord terminalIdRecord</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the NDEF record is NULL.</p>

<h3 id="setmerchantnamendefrecord" class="anchor"><a class="heading-anchor" href="#setmerchantnamendefrecord"><span></span></a>setMerchantNameNdefRecord</h3>

<pre class="prettyprint"><code>    public void setMerchantNameNdefRecord(NdefRecord merchantNameRecord)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies the merchant name NDEF record to be placed into the Merchant data based on Google specifications.&nbsp;Data read from the NFC pass must match this data for validation. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> NdefRecord merchantNameRecord</p>

<p><strong>Return values:</strong> None</p>

<p><strong>Throws:</strong> <code>InvalidParameterException</code> if the NDEF record is NULL.</p>

<p>Sample code:</p>

<pre class="prettyprint"><code>    // Create a GoogleSmartTap Config object
    SmartTapVasConfig z_cfg = new SmartTapVasConfig();
    z_cfg.setCollectorID("95011179");

    // EXAMPLE - OPTIONAL FIELD - create an NDEF Record for the Merchant name in the Merchant NDEF Record
    byte[] name = new String("Sample Merchant").getBytes(StandardCharsets.UTF_8);
    byte[] strHeader = new byte[] {(byte) 0x02, (byte) 0x65, (byte) 0x6E};
    NdefRecord rec = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT, new byte[]{(byte) 0x6d,(byte) 0x6e, (byte) 0x72}, // 'mnr' in byte form
    concatenateByteArrays(strHeader, name));
    z_cfg.setMerchantNameNdefRecord(rec);
</code></pre>

<h3 id="setmerchantcategoryndefrecord" class="anchor"><a class="heading-anchor" href="#setmerchantcategoryndefrecord"><span></span></a>setMerchantCategoryNdefRecord</h3>

<pre class="prettyprint"><code>    public void setMerchantCategoryIdNdefRecord(NdefRecord merchantCategoryRecord)
</code></pre>

<p><strong><em>Optional:</em></strong> Specifies the merchant category NDEF record to be placed into the Merchant data based on Google specifications.&nbsp;Data read from the NFC pass must match this data for validation. This overwrites any pre-existing values.</p>

<p><strong>Parameters:</strong> NdefRecord merchantCategoryRecord
<strong>Return values:</strong> None
<strong>Throws:</strong> <code>InvalidParameterException</code> if the NDEF record is NULL.</p>

<h3 id="getcollectoridhexstr" class="anchor"><a class="heading-anchor" href="#getcollectoridhexstr"><span></span></a>getCollectorIDHexStr</h3>

<pre class="prettyprint"><code>    public String getCollectorIDHexStr()
</code></pre>

<p>Returns the Collector ID as a string in hex format.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong></p>

<ul>
<li>String collectorID as a hex string.</li>

<li>null, if no Collector IDs have been set.</li>
</ul>

<h3 id="getcollectoridint" class="anchor"><a class="heading-anchor" href="#getcollectoridint"><span></span></a>getCollectorIDInt</h3>

<pre class="prettyprint"><code>    public int getCollectorIDInt()
</code></pre>

<p>Returns the Collector ID in integer format.</p>

<p><strong>Parameters:</strong> None</p>

<p><strong>Return values:</strong> Integer format of Collector ID. Null if no Collector IDs have been set.</p>

<h3 id="getposcapabilitiesarray" class="anchor"><a class="heading-anchor" href="#getposcapabilitiesarray"><span></span></a>getPosCapabilitiesArray</h3>

<pre class="prettyprint"><code>    public byte[] getPosCapabilitiesArray()
</code></pre>

<p><strong><em>Optional:</em></strong> Returns the 5-byte array that indicates the POS capabilities. This is set from setPosCapabilitiesArray() method.</p>

<p><strong>Parameters:</strong> none</p>

<p><strong>Return values:</strong> byte[] - 5 byte array with the POS capability masks</p>

<h3 id="getstorelocationidndefrecord" class="anchor"><a class="heading-anchor" href="#getstorelocationidndefrecord"><span></span></a>getStoreLocationIdNdefRecord</h3>

<pre class="prettyprint"><code>    public NdefRecord getStoreLocationIdNdefRecord()
</code></pre>

<p><strong><em>Optional:</em></strong> Returns the store location ID NDEF record. This is set from setStoreLocationIdNdefRecord() method.</p>

<p><strong>Parameters:</strong> none</p>

<p><strong>Return values:</strong> NdefRecord storeLocationIdNdefRecord</p>

<h3 id="getterminalidndefrecord" class="anchor"><a class="heading-anchor" href="#getterminalidndefrecord"><span></span></a>getTerminalIdNdefRecord</h3>

<pre class="prettyprint"><code>    public void getTerminalIdNdefRecord()
</code></pre>

<p><strong><em>Optional:</em></strong> Returns the terminal ID NDEF record. This is set from setTerminalIdNdefRecord() method.</p>

<p><strong>Parameters:</strong> none</p>

<p><strong>Return values:</strong> NdefRecord terminalIdNdefRecord</p>

<h3 id="getmerchantnamendefrecord" class="anchor"><a class="heading-anchor" href="#getmerchantnamendefrecord"><span></span></a>getMerchantNameNdefRecord</h3>

<pre class="prettyprint"><code>    public void getMerchantNameNdefRecord()
</code></pre>

<p><strong><em>Optional:</em></strong> Returns the merchant name NDEF record. This is set from setMerchantNameNdefRecord() method.</p>

<p><strong>Parameters:</strong> none</p>

<p><strong>Return values:</strong> NdefRecord merchantNameNdefRecord</p>

<h3 id="getmerchantcategoryndefrecord" class="anchor"><a class="heading-anchor" href="#getmerchantcategoryndefrecord"><span></span></a>getMerchantCategoryNdefRecord</h3>

<pre class="prettyprint"><code>    public void getMerchantCategoryIdNdefRecord()
</code></pre>

<p><strong><em>Optional:</em></strong> - Returns the merchant category NDEF record. This is set from setMerchantCategoryIdNdefRecord().</p>

<p><strong>Parameters:</strong> none</p>

<p><strong>Return values:</strong> NdefRecord merchantCategoryRecord</p>

<hr>

<h2 id="security" class="anchor"><a class="heading-anchor" href="#security"><span></span></a>Security</h2>

<p>Zebra VAS SDK implemented advanced security features to help protect the private key operation and communication between the authorized Zebra NFC VAS service and the line-of-business application. Since the Zebra NFC VAS service requires installation via the supplied .APK file, the enhanced security mechanism is designed to ensure the application connects with a genuine Zebra NFC VAS service.</p>

<p>The Zebra VAS SDK incorporates security measures to ensure the authenticity of the Zebra NFC VAS service. This includes but is not limited to the following:</p>

<ul>
<li>Since the Zebra VAS Service is not part of the device system software (OS), the Zebra NFC VAS service is signed by a Zebra key (unprivileged) to ensure it is obtained from a trusted source.</li>

<li>The Zebra VAS SDK validates the Zebra NFC VAS service by checking the signature of the service.</li>

<li>The Zebra NFC VAS service source code and binary are secured with an obfuscation tool.</li>
</ul>

<p>Considering the SDK is an Android .AAR file that is imported into the application project, it is possible to decompile the .AAR file and regenerate it into a modified version that connects to a malicious service. This could compromise the security and encryption of the private key, as well as other essential data, introducing potential security vulnerabilities.</p>

<p><i class="fa fa-exclamation-triangle" style="color:#FFA500;"></i> <strong>Zebra recommends application developers to implement the following integrity check to ensure the authenticity of Zebra VAS SDK:</strong> To ensure the authenticity of the Zebra VAS SDK, check whether the .AAR file checksum matches the checksum of the SDK provided by Zebra. The SDK is posted on the <a href="https://www.zebra.com/us/en/support-downloads/software/developer-tools/value-added-services-sdk.html">Zebra support portal</a> along with its file checksum details. To run the checksum of the SDK, Zebra recommends using any free “sha512sum” verification tool. Compare the result checksum with the checksum for Zebra VAS SDK (.AAR), which is the following for version 2.0.1:</p>

<pre class="prettyprint"><code>    VAS SDK (.aar) version: 2.0.1
    sha512 check sum:
    a4089c74612aacd5b5cb45ac380d1d5bd53e0e6e9f4923f2dca50fcf61c14411123df67ffcdcf203bea1ab91ff38d7cd4f61243ee31945682a60a6818d0925e7
</code></pre>

<!--
The Zebra VAS SDK (.AAR) checksum follows based on the version.

For version Zebra VAS SDK 2.0.1:

        VAS SDK (.aar) version: 2.0.1
        sha512 check sum:
        a4089c74612aacd5b5cb45ac380d1d5bd53e0e6e9f4923f2dca50fcf61c14411123df67ffcdcf203bea1ab91ff38d7cd4f61243ee31945682a60a6818d0925e7
-->

<hr>

<h2 id="bestpractices" class="anchor"><a class="heading-anchor" href="#bestpractices"><span></span></a>Best Practices</h2>

<h3 id="googlesmarttap-1" class="anchor"><a class="heading-anchor" href="#googlesmarttap-1"><span></span></a>Google Smart Tap</h3>

<p><strong>Private Key Management</strong></p>

<p>Zebra recommends to follow Google’s specified guidelines for private key management. Effective key management is crucial to ensure the security of the Smart Tap protocol and business application. This guide includes the following sections:</p>

<ul>
<li>Key Generation</li>

<li>Key Injection</li>

<li>Key Versioning </li>

<li>Key Rotation</li>

<li>Key Storage</li>
</ul>

<p><strong>Note:</strong> The term “Terminal vendor” used within this section refers to any entity that purchases and sells Zebra devices.</p>

<blockquote>
  <p><b>ALL INFORMATION IN THIS SECTION IS SOURCED BY GOOGLE, WITH MINOR MODIFICATIONS FROM ZEBRA</b></p>
</blockquote>

<p><br></p>

<h4 id="keygeneration" class="anchor"><a class="heading-anchor" href="#keygeneration"><span></span></a>Key Generation</h4>

<p>Google recommends the long-term key pair to be generated outside of the Zebra terminal and then injected into the terminal. This is because the same key is shared by all the terminals for a given merchant. The key pair can be generated by the merchant or by the terminal vendor on behalf of the merchant.
The private key should always be kept secret using standard best practices. If the terminal vendor generates the key pair and injects the key on behalf of the merchant, only the public key should be shared with the merchant.</p>

<p><br></p>

<h4 id="keyinjection" class="anchor"><a class="heading-anchor" href="#keyinjection"><span></span></a>Key Injection</h4>

<p>The long-term private key can be injected into the Zebra terminal in multiple ways:</p>

<ul>
<li>The terminal vendor can inject the private key using remote key injection.</li>

<li>The terminal vendor can encrypt the private key using a key encryption key, provide the encrypted private key to the merchant, and the merchant can configure the terminal with the encrypted private key as a parameter. The terminal can use a decryption key that's already in the terminal to decrypt the encrypted private key.</li>

<li>The private key is within an encrypted file that can be securely loaded onto the terminal.</li>

<li>The private key is injected within a secure facility and the terminals are hot-swapped.</li>
</ul>

<p><br></p>

<h4 id="keyversioning" class="anchor"><a class="heading-anchor" href="#keyversioning"><span></span></a>Key Versioning</h4>

<p>To aid in key rotation, a key version must be defined with the long-term public key. Multiple long-term public keys can be in production at the same time. The key version is sent as a binary hex value during Smart Tap authentication.</p>

<p><br></p>

<h4 id="keyrotation" class="anchor"><a class="heading-anchor" href="#keyrotation"><span></span></a>Key Rotation</h4>

<p>Key rotation involves the following steps:</p>

<ol>
<li>Upload a new public key to Google Wallet</li>

<li>Allow 24 hours for the new public key to be synced to the users' mobile devices</li>

<li>Update all terminals to use the new private key</li>

<li>Revoke the old public key from the Google Wallet platform</li>
</ol>

<p>Key rotation requires that some terminals use old keys while newer terminals are using new keys. Both long-term public keys (old and new) are uploaded to Google Wallet. Both keys are then synced to the users' mobile devices. A user can tap at a terminal using an old key or a new key while the rotation is in-progress. Once the final terminal has been updated, the old long-term public key can be removed from Google Wallet.</p>

<p><strong>Note:</strong> <strong>To maintain speedy turnarounds with key rotations,</strong> especially when an unexpected compromise occurs, Google strongly recommends merchants have a system in place that allows them to update the private key used on all terminals in less than 24 hours. </p>

<p><strong>Note:</strong> <strong>Zebra's MX platform exposes functionality to install certificates,</strong> see <a href="https://techdocs.zebra.com/mx/certmgr/">Certificate Manager</a>. To deploy a public certificate along with a private key, Zebra recommends using a certificate container (.PFX) file.</p>

<p><strong>Recommended Rotations</strong></p>

<p>Google recommends having three valid public keys on the Google Wallet platform at any time and suggests performing a daily rotation. The following steps outline an example rotation scenario based on these recommendations.
First, create the following initial configuration:</p>

<ul>
<li>Three public keys are uploaded to Google Wallet: A, B, and C.</li>

<li>Terminals are configured to use A's private key.</li>

<li>Private keys B and C are stored securely outside the terminals.</li>
</ul>

<p>Next, perform a rotation:</p>

<ol>
<li>Generate a new key pair, D.</li>

<li>Upload D's public key to Google Wallet.</li>

<li>Store D's private key securely outside the terminals.</li>

<li>Configure terminals to use B's private key.</li>

<li>Remove A's public key from Google Wallet.</li>
</ol>

<p>Assume that less than 24 hours after this rotation is complete, private key B (currently in use) has become compromised. The following steps outline an example rotation scenario for compromised keys:</p>

<ol>
<li>Configure terminals to use C's private key.</li>

<li>Revoke B's public key from Google Wallet.</li>

<li>Generate a new key pair, E.</li>

<li>Upload E's public key to Google Wallet.</li>

<li>Store E's private key securely outside the terminals.</li>
</ol>

<p>The terminals must first be configured to use a new private key before an existing public key is revoked from Google Wallet. Otherwise, the mobile devices would no longer accept the previous key even though there are still terminals that are attempting to use it for authentication.</p>

<p>In this scenario, less than 24 hours had elapsed since key B was "rotated in" (being used on terminals). Within this time period, the newly-created key, D, would not have sufficient opportunity to propagate to all of the users' mobile devices. By having 3 public keys in Google Wallet, a potential outage was avoided when rotating to key C.</p>

<p><strong>Minimum Rotations</strong></p>

<p>Google recommends to have at least one valid public key stored in Google Wallet at any time, and suggests to perform key rotations on a monthly basis. The following steps outline an example rotation scenario based on these recommendations.</p>

<p>First, create the following initial configuration:</p>

<ul>
<li>One public key is uploaded to Google Wallet: X.</li>

<li>Terminals are configured to use X’s private key.</li>
</ul>

<p>Next, perform a rotation:</p>

<ol>
<li>Generate a new key pair, Y.</li>

<li>Upload Y's public key to Google Wallet.</li>

<li>Wait 24 hours for Y's public key to sync to users' mobile devices.</li>

<li>Configure terminals to use Y’s private key.</li>

<li>Remove X's public key from Google Wallet.</li>
</ol>

<p>Assume that less than 24 hours after this rotation is complete, private key Y (currently in use) has become compromised. The following steps outline an example rotation scenario for compromised keys:</p>

<ol>
<li>Generate a new key pair, Z.</li>

<li>Upload Z's public key to Google Wallet.</li>

<li>Configure terminals to use Z's private key.</li>

<li>Revoke Y’s public key from Google Wallet.</li>
</ol>

<p>When the public key Z is uploaded to Google Wallet, it may take up to 24 hours to sync to users' mobile devices. A merchant in this case must decide how much time, if any, to wait before revoking public key Y. A longer period of time allows more devices to sync to the new public key, reducing the size of an outage when the terminals start using the new key or when users' devices start rejecting the old key. However, it also increases the time in which the compromised private key is valid and accepted as authentication for attacks.</p>

<p>If key Y is revoked before the terminals are configured to use key Z, there would be an outage because there would be no public key available for authentication.</p>

<p><br></p>

<h4 id="keystorage" class="anchor"><a class="heading-anchor" href="#keystorage"><span></span></a>Key Storage</h4>

<h5 id="publickeys" class="anchor"><a class="heading-anchor" href="#publickeys"><span></span></a>Public Keys</h5>

<p>Public keys shouldn't be considered a security mechanism. For the purpose of security modeling, the public key should always be considered as compromised and publicly available. In actuality, the public key shouldn't be made publicly available. Limiting access to the public key increases the difficulty of a potential attack but doesn't eliminate the possibility. Limiting access also limits the potential for a rogue device to emulate the Google Wallet application.</p>

<h5 id="privatekeys" class="anchor"><a class="heading-anchor" href="#privatekeys"><span></span></a>Private Keys</h5>

<p>The private key is used to authenticate the merchant terminal. If compromised, a malicious terminal can use the long-term private key to impersonate a legitimate merchant’s terminal until the key is rotated.</p>

<p>While NFC traffic can always be sniffed, it can only ever be decrypted by the initiating terminal. Compromised private keys can never be used to decrypt sniffed traffic from another terminal, even if the same private key was used for authentication.</p>

<p>Relay attacks are possible, but unlikely given the required proximity and collision avoidance mechanisms of the lower-level NFC protocol.</p>

<h5 id="ontheterminal" class="anchor"><a class="heading-anchor" href="#ontheterminal"><span></span></a>On The Terminal</h5>

<p>The private key should be stored and used only in a secure enclave of the terminal. Zebra recommends using Secure Element or Qualcomm TE where available on Zebra products. Refer to Zebra product documentation for more information. </p>

<p><strong>Minimum Requirements</strong></p>

<p>The private key can be stored in the main file system but should be encrypted at rest using a key encryption key (KEK). The KEK used to decrypt the private key should be stored in the secure enclave of the terminal. During a transaction, the encrypted private key is first decrypted in the secure enclave. The decrypted private key should only be used in the main CPU/RAM.</p>

<p><em>For more information, contact Google or refer to their relevant documentation.</em></p>

<p><br></p>

<h3 id="applevas-1" class="anchor"><a class="heading-anchor" href="#applevas-1"><span></span></a>Apple VAS</h3>

<p>For optimal performance of the Apple VAS solution, set the <strong>Card Detection Mode</strong> (polling mode) to <strong>Standard</strong> in the <strong>Enterprise NFC Settings.</strong> To access these settings, go to device Settings &gt; Connected Devices. For more information, refer to the product documentation posted on the <a href="https://www.zebra.com/us/en/support-downloads.html">Zebra support portal</a>.</p>

<p><img src="card-detection-mode.png" alt="" style="height:350px">
<em>Card Detection Mode in Enterprise NFC Settings</em></p>

<hr>

<h2 id="seealso" class="anchor"><a class="heading-anchor" href="#seealso"><span></span></a>See Also</h2>

<ul>
<li><a href="../about">About Zebra VAS SDK</a></li>

<li><a href="../demo">Demo</a></li>
</ul><p></p>
                                        


                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!--/.col-sm-6-->
            </div>
            </section>
        </div>
    </section>    

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true" data-backdrop="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
					</div>
					<div class="modal-body">
						<div id="modalImg">
						
						</div>
					</div>
			</div>
		  </div>
		</div> </div>
         <footer id="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-10">
                        ZEBRA and the stylized Zebra head are trademarks of Zebra Technologies Corp., registered in many jurisdictions worldwide. All other trademarks are the property of their respective owners. ©2024 Zebra Technologies Corp. and/or its affiliates.<br> <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal.html">Legal</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/compliance/information-privacy/terms-of-use.html">Terms of Use</a> | <a href="https://www.zebra.com/us/en/about-zebra/company-information/legal/privacy-statement.html">Privacy Policy</a> 
                    </div>
                     <!--
                     <div class="col-sm-2">
                        <ul class="social-icons">
                            <li><a href="http://www.facebook.com/pages/Zebra-Technologies/107703715989073"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://twitter.com/ZebraDevs"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="http://www.youtube.com/zebratechnologies/"><i class="fa fa-youtube"></i></a></li>
                            <li><a href="https://www.linkedin.com/groups?home=&gid=3220074&trk=anet_ug_hm&goback=%2Egmr_3220074"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="https://github.com/developer-zebra"><i class="fa fa-github"></i></a></li>
                        </ul>
                    </div> -->
                 </div>
            </div>
        </footer>
    
    <!--/#footer 
        10/25/18 removed <footer id="footer" class="navbar-fixed-bottom">
    -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/mousescroll.js"></script>
    <script src="/js/smoothscroll.js"></script>
    <script src="/js/jquery.prettyPhoto.js"></script>
    <script src="/js/jquery.isotope.min.js"></script>
    <script src="/js/jquery.inview.min.js"></script>
    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap-treenav.min.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/zepto.js"></script>
    <script src="/js/jquery.waterfall.js"></script>   
    <script src="/js/main.js"></script>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','zRzEsAUhWTTkrdEN2YfA','2.0.0');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72584442-1', 'auto');
  ga('send', 'pageview');

</script> 

<script>
    ChatraID = 'QDvZ76min4DhLW5vJ';
    (function(d, w, c) {
        var n = d.getElementsByTagName('script')[0],
            s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
            + '//call.chatra.io/chatra.js';
        n.parentNode.insertBefore(s, n);
    })(document, window, 'Chatra');
</script>         


</body></html>